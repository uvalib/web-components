import("./fonts-fe148514.js"),import("./icons-89ae3148.js");class t extends HTMLElement{static get observedAttributes(){return["override","alerts"]}constructor(){super()}connectedCallback(){this._setupDom(),this.override||this._setupAlertsModel()}_setupAlertsModel(){import("./uvalib-model-alerts-408bd70a.js").then(function(){this._alertsModel=document.createElement("uvalib-model-alerts"),import("./debounce-04dc1c3b.js").then(function(t){this._alertsModel.addEventListener("seen-count-changed",t.default(function(t){const e=t.detail&&t.detail.seenCount?parseInt(t.detail.seenCount):0;this.seenCount=e,this.setAttribute("seen-count",e),this._alertsSeen=this._alertsModel.seen}.bind(this),300).bind(this)),this._alertsModel.addEventListener("alerts-changed",t.default(function(t){this._updateAlerts(this._alertsModel.alerts)}.bind(this),300).bind(this))}.bind(this)),this._alertsModel.setAttribute("auto",""),this.shadow.appendChild(this._alertsModel)}.bind(this))}_updateAlerts(t){if(Array.isArray(t)&&t.length>0){this._setupStyle();var e=document.createElement("div");t.forEach(function(t){this._addAlert(e,t)}.bind(this)),this.shadow.replaceChild(e,this._alertsContainer),this._alertsContainer=e}else this._alertsContainer.innerHTML=""}_addAlert(t,e){var s=[];s.push(import("./debounce-04dc1c3b.js")),s.push(import("./uvalib-button-11ee4e92.js")),s.push(import("./uvalib-collapse-65ef9618.js")),Promise.all(s).then(function(s){s[0].default;var i=document.createElement("uvalib-collapse");i.innerHTML=`\n        <div class="alert-item ${e.severity}" uuid="${e.uuid}">\n          <div data-title="${e.title}">\n          <div class="alert-head">\n            <div class="alert-title" >${e.title}</div>\n            <uvalib-button class="moreButton toggle" ${this._isHot(e.severity)?"hidden ":""}>More</uvalib-button>\n            <uvalib-button class="lessButton toggle" ${this._isHot(e.severity)?"":"hidden"}>Less</uvalib-button>\n            <uvalib-button class="dismissButton" ${this._isHot(e.severity)?"hidden ":""}>Dismiss</uvalib-button>\n          </div>\n          <uvalib-collapse class="bodyCollapse" ${this._isHot(e.severity)?"opened":""} ${this._isHot(e.severity)?"opened":""}>\n            <div class="alert-body">${e.body}</div>\n          </uvalib-collapse>\n          </div>\n        </div>\n      `,i.querySelector(".moreButton").addEventListener("click",this._toggleIt.bind(this)),i.querySelector(".lessButton").addEventListener("click",this._toggleIt.bind(this)),i.setAttribute("opened",e.seen?null:""),i.addEventListener("opened-changed",this._sizeChanged.bind(this)),i.addEventListener("transitioning-changed",this._sizeChanged.bind(this)),t.appendChild(i)}.bind(this))}_setupStyle(){this._style||(this._style=document.createElement("style"),this.shadow.appendChild(this._style),import("./uvalib-alerts-9de8e65f.js").then(function(t){this._style.innerHTML=t.default}.bind(this)))}_setupDom(){this.shadow=this.attachShadow({mode:"open"}),this.shadow.innerHTML="<style>:host {visibility: hidden;}</style>",this._alertsContainer=document.createElement("div"),this.shadow.appendChild(this._alertsContainer)}attributeChangedCallback(t,e,s){switch(t){case"override":this.override=""===s;break;case"alerts":this.alerts=JSON.parse(s)}}_sizeChanged(){this.dispatchEvent(new CustomEvent("size-changed",{detail:{height:this.clientHeight}}))}_isHot(t){return"alert1"===t}_toggleIt(t){this.dispatchEvent(new CustomEvent("uvalib-analytics-event",{bubbles:!0,composed:!0,detail:{track:["alert",t.currentTarget.textContent,t.currentTarget.parentElement.parentElement.dataset.title]}})),t.currentTarget.parentElement.parentElement.querySelector(".bodyCollapse").toggle(),t.currentTarget.parentElement.querySelectorAll(".toggle").forEach((function(t){""!==t.getAttribute("hidden")?t.setAttribute("hidden",""):(t.removeAttribute("hidden"),t.focus())}))}}window.customElements.define("uvalib-alerts",t);
