class e extends HTMLElement{static get observedAttributes(){return["opened"]}get opened(){return!!this._opened}set opened(e){this._opened=!!e,this._eval().then(function(){this.dispatchEvent(new CustomEvent("transitioning-changed",{bubbles:!0,composed:!0,detail:{opened:this._opened}}))}.bind(this)),this.dispatchEvent(new CustomEvent("opened-changed",{bubbles:!0,composed:!0,detail:{opened:this._opened}}))}attributeChangedCallback(e,t,s){switch(e){case"opened":t!=s&&(this.opened=null!==s)}}constructor(){super(),this.opened=!1}connectedCallback(){this._eval(!1),this._setupDom()}_setupDom(){this.shadow=this.attachShadow({mode:"open"}),this.shadow.innerHTML="\n      <style>\n        :host {\n          display: block;\n          overflow: hidden;\n        }\n      </style>\n      <slot></slot>\n    ",this.sl=this.shadow.querySelector("slot"),this.sl.addEventListener("slotchange",function(e){this._eval(!1)}.bind(this))}_eval(e=!0){var t=Promise.resolve();if(e){var s=this.scrollHeight;t=this._animate(s,!this.opened)}else this.style.height=this.opened?"auto":"0px";return t}_animate(e,t=!1){this.transitioning=!0;var s=this.animate(t?{height:[e+"px",0]}:{height:[0,e+"px"]},{easing:"ease-in-out",duration:1.5*e,fill:"forwards"});return s.finished.then(function(){this.style.height=t?"0":"auto",s.cancel(),this.transitioning=!1}.bind(this))}toggle(){this.opened=!this.opened,this.opened?(this.sl.setAttribute("tabindex","0"),this.setAttribute("opened","")):(this.sl.setAttribute("tabindex","-1"),this.removeAttribute("opened"))}}window.customElements.define("uvalib-collapse",e);
