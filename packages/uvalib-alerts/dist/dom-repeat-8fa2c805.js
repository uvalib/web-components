import{r as t,p as e,s,a as r,d as n,P as o,b as i,l as a,c as l,w as _,e as h,f as p,u as c,g as d,h as u,i as m,M as f,O as y,j as P,k as C,m as b,t as w,D as g,n as S,o as T,q as O}from"./uvalib-alerts-c438ea0e.js";
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let v={},E={};function x(t,e){v[t]=E[t.toLowerCase()]=e}function I(t){return v[t]||E[t.toLowerCase()]}class H extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,e){if(t){let s=I(t);return s&&e?s.querySelector(e):s}return null}attributeChangedCallback(t,e,s,r){e!==s&&this.register()}get assetpath(){if(!this.__assetpath){const s=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,r=t(this.getAttribute("assetpath")||"",s.baseURI);this.__assetpath=e(r)}return this.__assetpath}register(t){if(t=t||this.id){if(s&&void 0!==I(t))throw x(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,x(t,this),(e=this).querySelector("style")&&console.warn("dom-module %s has style outside template",e.id)}var e}}H.prototype.modules=v,customElements.define("dom-module",H);function A(t){return H.import(t)}function F(t){let e=t.body?t.body:t;const s=r(e.textContent,t.baseURI),n=document.createElement("style");return n.textContent=s,n}function k(t){const e=t.trim().split(/\s+/),s=[];for(let t=0;t<e.length;t++)s.push(...z(e[t]));return s}function z(t){const e=A(t);if(!e)return console.warn("Could not find style data in module named",t),[];if(void 0===e._styles){const t=[];t.push(...D(e));const s=e.querySelector("template");s&&t.push(...M(s,e.assetpath)),e._styles=t}return e._styles}function M(t,e){if(!t._styles){const s=[],n=t.content.querySelectorAll("style");for(let t=0;t<n.length;t++){let o=n[t],i=o.getAttribute("include");i&&s.push(...k(i).filter((function(t,e,s){return s.indexOf(t)===e}))),e&&(o.textContent=r(o.textContent,e)),s.push(o)}t._styles=s}return t._styles}function D(t){const e=[],s=t.querySelectorAll("link[rel=import][type~=css]");for(let t=0;t<s.length;t++){let r=s[t];if(r.import){const t=r.import,s=r.hasAttribute("shady-unscoped");if(s&&!t._unscopedStyle){const e=F(t);e.setAttribute("shady-unscoped",""),t._unscopedStyle=e}else t._style||(t._style=F(t));e.push(s?t._unscopedStyle:t._style)}}return e}function R(t){let e=t.trim().split(/\s+/),s="";for(let t=0;t<e.length;t++)s+=N(e[t]);return s}function N(t){let e=A(t);if(e&&void 0===e._cssText){let t=function(t){let e="",s=D(t);for(let t=0;t<s.length;t++)e+=s[t].textContent;return e}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e),s=e.querySelector("template");s&&(t+=function(t,e){let s="";const r=M(t,e);for(let t=0;t<r.length;t++){let e=r[t];e.parentNode&&e.parentNode.removeChild(e),s+=e.textContent}return s}(s,e.assetpath)),e._cssText=t||null}return e||console.warn("Could not find style data in module named",t),e&&e._cssText||""}function L(t){}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const q=n(t=>{const e=o(t);function s(t){const e=Object.getPrototypeOf(t);return e.prototype instanceof n?e:null}function r(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",t))){let e=null;if(t.hasOwnProperty(JSCompiler_renameProperty("properties",t))){const s=t.properties;s&&(e=function(t){const e={};for(let s in t){const r=t[s];e[s]="function"==typeof r?{type:r}:r}return e}(s))}t.__ownProperties=e}return t.__ownProperties}class n extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const t=this._properties;this.__observedAttributes=t?Object.keys(t).map(t=>this.prototype._addPropertyToAttributeMap(t)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const t=s(this);t&&t.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const t=r(this);t&&this.createProperties(t)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const t=s(this);this.__properties=Object.assign({},t&&t._properties,r(this))}return this.__properties}static typeForProperty(t){const e=this._properties[t];return e&&e.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return n}),J=window.ShadyCSS&&window.ShadyCSS.cssBuild,$=n(n=>{const o=q(i(n));function m(t,e,s,r){if(!J){const n=e.content.querySelectorAll("style"),o=M(e),i=function(t){let e=A(t);return e?D(e):[]}(s),a=e.content.firstElementChild;for(let s=0;s<i.length;s++){let n=i[s];n.textContent=t._processStyleText(n.textContent,r),e.content.insertBefore(n,a)}let l=0;for(let e=0;e<o.length;e++){let s=o[e],i=n[l];i!==s?(s=s.cloneNode(!0),i.parentNode.insertBefore(s,i)):l++,s.textContent=t._processStyleText(s.textContent,r)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,s),c&&J&&d){const s=e.content.querySelectorAll("style");if(s){let e="";Array.from(s).forEach(t=>{e+=t.textContent,t.parentNode.removeChild(t)}),t._styleSheet=new CSSStyleSheet,t._styleSheet.replaceSync(e)}}}return class extends o{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){o._finalizeClass.call(this);const t=((e=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",e))||(e.__ownObservers=e.hasOwnProperty(JSCompiler_renameProperty("observers",e))?e.observers:null),e.__ownObservers);var e;t&&this.createObservers(t,this._properties),this._prepareTemplate()}static _prepareTemplate(){let t=this.template;t&&("string"==typeof t?(console.error("template getter must return HTMLTemplateElement"),t=null):a||(t=t.cloneNode(!0))),this.prototype._template=t}static createProperties(t){for(let o in t)e=this.prototype,s=o,r=t[o],n=t,r.computed&&(r.readOnly=!0),r.computed&&(e._hasReadOnlyEffect(s)?console.warn(`Cannot redefine computed property '${s}'.`):e._createComputedProperty(s,r.computed,n)),r.readOnly&&!e._hasReadOnlyEffect(s)?e._createReadOnlyProperty(s,!r.computed):!1===r.readOnly&&e._hasReadOnlyEffect(s)&&console.warn(`Cannot make readOnly property '${s}' non-readOnly.`),r.reflectToAttribute&&!e._hasReflectEffect(s)?e._createReflectedProperty(s):!1===r.reflectToAttribute&&e._hasReflectEffect(s)&&console.warn(`Cannot make reflected property '${s}' non-reflected.`),r.notify&&!e._hasNotifyEffect(s)?e._createNotifyingProperty(s):!1===r.notify&&e._hasNotifyEffect(s)&&console.warn(`Cannot make notify property '${s}' non-notify.`),r.observer&&e._createPropertyObserver(s,r.observer,n[r.observer]),e._addPropertyToAttributeMap(s);var e,s,r,n}static createObservers(t,e){const s=this.prototype;for(let r=0;r<t.length;r++)s._createMethodObserver(t[r],e)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const t=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==t?t:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(t){let e=null;if(t&&(!s||u)&&(e=H.import(t,"template"),s&&!e))throw new Error("strictTemplatePolicy: expecting dom-module or null template for "+t);return e}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(t){this._template=t}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const t=this.importMeta;if(t)this._importPath=e(t.url);else{const t=H.import(this.is);this._importPath=t&&t.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=l,this.importPath=this.constructor.importPath;let t=function(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",t))){t.__propertyDefaults=null;let e=t._properties;for(let s in e){let r=e[s];"value"in r&&(t.__propertyDefaults=t.__propertyDefaults||{},t.__propertyDefaults[s]=r)}}return t.__propertyDefaults}(this.constructor);if(t)for(let e in t){let s=t[e];if(this._canApplyPropertyDefault(e)){let t="function"==typeof s.value?s.value.call(this):s.value;this._hasAccessor(e)?this._setPendingProperty(e,t,!0):this[e]=t}}}_canApplyPropertyDefault(t){return!this.hasOwnProperty(t)}static _processStyleText(t,e){return r(t,e)}static _finalizeTemplate(e){const s=this.prototype._template;if(s&&!s.__polymerFinalized){s.__polymerFinalized=!0;const r=this.importPath;m(this,s,e,r?t(r):""),this.prototype._bindTemplate(s)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(t){const e=_(this);if(e.attachShadow)return t?(e.shadowRoot||(e.attachShadow({mode:"open",shadyUpgradeFragment:t}),e.shadowRoot.appendChild(t),this.constructor._styleSheet&&(e.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),h&&window.ShadyDOM&&window.ShadyDOM.flushInitial(e.shadowRoot),e.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(t){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,t)}resolveUrl(e,s){return!s&&this.importPath&&(s=t(this.importPath)),t(e,s)}static _parseTemplateContent(t,e,s){return e.dynamicFns=e.dynamicFns||this._properties,o._parseTemplateContent.call(this,t,e,s)}static _addTemplatePropertyEffect(t,e,s){return!p||e in this._properties||s.info.part.signature&&s.info.part.signature.static||s.info.part.hostProp||t.nestedTemplate||console.warn(`Property '${e}' used in template but not declared in 'properties'; attribute will not be observed.`),o._addTemplatePropertyEffect.call(this,t,e,s)}}});
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class j{constructor(t){this.value=t.toString()}toString(){return this.value}}function B(t){if(t instanceof HTMLTemplateElement)return t.innerHTML;if(t instanceof j)return function(t){if(t instanceof j)return t.value;throw new Error("non-literal value passed to Polymer's htmlLiteral function: "+t)}(t);throw new Error("non-template value passed to Polymer's html function: "+t)}const Y=function(t,...e){const s=document.createElement("template");return s.innerHTML=e.reduce((e,s,r)=>e+B(s)+t[r+1],t[0]),s},U=$(HTMLElement),V=function(){let t,e;do{t=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),e=m()}while(t||e)};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let X=null;function G(){return X}G.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:G,writable:!0}});const K=i(G),Q=f(K);const W=i(class{});function Z(t,e){for(let s=0;s<e.length;s++){let r=e[s];if(Boolean(t)!=Boolean(r.__hideTemplateChildren__))if(r.nodeType===Node.TEXT_NODE)t?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__;else if("slot"===r.localName)if(t)r.__polymerReplaced__=document.createComment("hidden-slot"),_(_(r).parentNode).replaceChild(r.__polymerReplaced__,r);else{const t=r.__polymerReplaced__;t&&_(_(t).parentNode).replaceChild(r,t)}else r.style&&(t?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__);r.__hideTemplateChildren__=t,r._showHideChildren&&r._showHideChildren(t)}}class tt extends W{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let e=[];this.children=e;for(let t=this.root.firstChild;t;t=t.nextSibling)e.push(t),t.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let s=this.__templatizeOptions;(t&&s.instanceProps||!s.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(let e in t)this._setPendingProperty(e,t[e])}forwardHostProp(t,e){this._setPendingPropertyOrPath(t,e,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,e,s){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,e,t=>{t.model=this,s(t)});else{let r=this.__dataHost.__dataHost;r&&r._addEventListenerToNode(t,e,s)}}_showHideChildren(t){Z(t,this.children)}_setUnmanagedPropertyToNode(t,e,s){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&"textContent"==e?t.__polymerTextContent__=s:super._setUnmanagedPropertyToNode(t,e,s)}get parentModel(){let t=this.__parentModel;if(!t){let e;t=this;do{t=t.__dataHost.__dataHost}while((e=t.__templatizeOptions)&&!e.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}tt.prototype.__dataHost,tt.prototype.__templatizeOptions,tt.prototype._methodHost,tt.prototype.__templatizeOwner,tt.prototype.__hostProps;const et=f(tt);function st(t){let e=t.__dataHost;return e&&e._methodHost||e}function rt(t,e,s){let r=s.mutableData?et:tt;at.mixin&&(r=at.mixin(r));let n=class extends r{};return n.prototype.__templatizeOptions=s,n.prototype._bindTemplate(t),function(t,e,s,r){let n=s.hostProps||{};for(let e in r.instanceProps){delete n[e];let s=r.notifyInstanceProp;s&&t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:it(e,s)})}if(r.forwardHostProp&&e.__dataHost)for(let e in n)s.hasHostProps||(s.hasHostProps=!0),t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(t,e,s){t.__dataHost._setPendingPropertyOrPath("_host_"+e,s[e],!0,!0)}})}(n,t,e,s),n}function nt(t,e,s,r){let n=s.forwardHostProp;if(n&&e.hasHostProps){const a="template"==t.localName;let l=e.templatizeTemplateClass;if(!l){if(a){let t=s.mutableData?Q:K;class r extends t{}l=e.templatizeTemplateClass=r}else{const s=t.constructor;class r extends s{}l=e.templatizeTemplateClass=r}let o=e.hostProps;for(let t in o)l.prototype._addPropertyEffect("_host_"+t,l.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:ot(t,n)}),l.prototype._createNotifyingProperty("_host_"+t);p&&r&&function(t,e,s){const r=s.constructor._properties,{propertyEffects:n}=t,{instanceProps:o}=e;for(let t in n)if(!(r[t]||o&&o[t])){const e=n[t];for(let s=0;s<e.length;s++){const{part:r}=e[s].info;if(!r.signature||!r.signature.static){console.warn(`Property '${t}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}(e,s,r)}if(t.__dataProto&&Object.assign(t.__data,t.__dataProto),a)i=l,X=o=t,Object.setPrototypeOf(o,i.prototype),new i,X=null,t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties();else{Object.setPrototypeOf(t,l.prototype);const s=e.hostProps;for(let e in s)if(e="_host_"+e,e in t){const s=t[e];delete t[e],t.__data[e]=s}}}var o,i}function ot(t,e){return function(t,s,r){e.call(t.__templatizeOwner,s.substring("_host_".length),r[s])}}function it(t,e){return function(t,s,r){e.call(t.__templatizeOwner,t,s,r[s])}}function at(t,e,r){if(s&&!st(t))throw new Error("strictTemplatePolicy: template owner not trusted");if(r=r||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=e;let n=(e?e.constructor:tt)._parseTemplate(t),o=n.templatizeInstanceClass;o||(o=rt(t,n,r),n.templatizeInstanceClass=o);const i=st(t);nt(t,n,r,i);let a=class extends o{};return a.prototype._methodHost=i,a.prototype.__dataHost=t,a.prototype.__templatizeOwner=e,a.prototype.__hostProps=n.hostProps,a=a,a}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const lt=y(U);class _t extends lt{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!P,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),C()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=_(_(this).parentNode);for(let e=0;e<this.__instances.length;e++)this.__attachInstance(e,t)}}__ensureTemplatized(){if(!this.__ctor){const t=this;let e=this.template=t._templateInfo?t:this.querySelector("template");if(!e){let t=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");t.disconnect(),this.__render()});return t.observe(this,{childList:!0}),!1}let s={};s[this.as]=!0,s[this.indexAs]=!0,s[this.itemsIndexAs]=!0,this.__ctor=at(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:s,forwardHostProp:function(t,e){let s=this.__instances;for(let r,n=0;n<s.length&&(r=s[n]);n++)r.forwardHostProp(t,e)},notifyInstanceProp:function(t,e,s){if(b(this.as,e)){let r=t[this.itemsIndexAs];e==this.as&&(this.items[r]=s);let n=w(this.as,`${JSCompiler_renameProperty("items",this)}.${r}`,e);this.notifyPath(n,s)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if("string"==typeof t){let e=t,s=this.__getMethodHost();return function(){return s[e].apply(s,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let e=this.__observePaths;for(let s=0;s<e.length;s++)0===t.indexOf(e[s])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||("items"===t.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(t,e=0){this.__renderDebouncer=g.debounce(this.__renderDebouncer,e>0?S.after(e):T,t.bind(this)),O(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),V()}__render(){if(!this.__ensureTemplatized())return;let t=this.items||[];const e=this.__sortAndFilterItems(t),s=this.__calculateLimit(e.length);this.__updateInstances(t,s,e),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),P&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(t){let e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=s;return this.__filterFn&&(e=e.filter((e,s,r)=>this.__filterFn(t[e],s,r))),this.__sortFn&&e.sort((e,s)=>this.__sortFn(t[e],t[s])),e}__calculateLimit(t){let e=t;const s=this.__instances.length;if(this.initialCount){let r;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(e=Math.min(t,this.initialCount),r=Math.max(e-s,0),this.__chunkCount=r||1):(r=Math.min(Math.max(t-s,0),this.__chunkCount),e=Math.min(s+r,t)),this.__shouldMeasureChunk=r===this.__chunkCount,this.__shouldContinueChunking=e<t,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,e}__continueChunking(){if(this.__shouldMeasureChunk){const t=performance.now()-this.__renderStartTime,e=this._targetFrameTime/t;this.__chunkCount=Math.round(this.__chunkCount*e)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(t,e,s){const r=this.__itemsIdxToInstIdx={};let n;for(n=0;n<e;n++){let e=this.__instances[n],o=s[n],i=t[o];r[o]=n,e?(e._setPendingProperty(this.as,i),e._setPendingProperty(this.indexAs,n),e._setPendingProperty(this.itemsIndexAs,o),e._flushProperties()):this.__insertInstance(i,n,o)}for(let t=this.__instances.length-1;t>=n;t--)this.__detachAndRemoveInstance(t)}__detachInstance(t){let e=this.__instances[t];const s=_(e.root);for(let t=0;t<e.children.length;t++){let r=e.children[t];s.appendChild(r)}return e}__attachInstance(t,e){let s=this.__instances[t];e.insertBefore(s.root,this)}__detachAndRemoveInstance(t){this.__detachInstance(t),this.__instances.splice(t,1)}__stampInstance(t,e,s){let r={};return r[this.as]=t,r[this.indexAs]=e,r[this.itemsIndexAs]=s,new this.__ctor(r)}__insertInstance(t,e,s){const r=this.__stampInstance(t,e,s);let n=this.__instances[e+1],o=n?n.children[0]:this;return _(_(this).parentNode).insertBefore(r.root,o),this.__instances[e]=r,r}_showHideChildren(t){for(let e=0;e<this.__instances.length;e++)this.__instances[e]._showHideChildren(t)}__handleItemPath(t,e){let s=t.slice(6),r=s.indexOf("."),n=r<0?s:s.substring(0,r);if(n==parseInt(n,10)){let t=r<0?"":s.substring(r+1);this.__handleObservedPaths(t);let o=this.__itemsIdxToInstIdx[n],i=this.__instances[o];if(i){let s=this.as+(t?"."+t:"");i._setPendingPropertyOrPath(s,e,!1,!0),i._flushProperties()}return!0}}itemForElement(t){let e=this.modelForElement(t);return e&&e[this.as]}indexForElement(t){let e=this.modelForElement(t);return e&&e[this.indexAs]}modelForElement(t){return function(t,e){let s;for(;e;)if(s=e.__dataHost?e:e.__templatizeInstance){if(s.__dataHost==t)return s;e=s.__dataHost}else e=_(e).parentNode;return null}(this.template,t)}}customElements.define(_t.is,_t);export{_t as D,$ as E,U as P,J as b,R as c,V as f,Y as h,L as r,Z as s,at as t};
