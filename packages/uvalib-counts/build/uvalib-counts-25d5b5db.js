/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.JSCompiler_renameProperty=function(t,e){return t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let t,e,n=/(url\()([^)]*)(\))/g,i=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function r(n,r){if(n&&i.test(n))return n;if("//"===n)return n;if(void 0===t){t=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",t="http://a/c%20d"===e.href}catch(t){}}if(r||(r=document.baseURI||window.location.href),t)try{return new URL(n,r).href}catch(t){return n}return e||(e=document.implementation.createHTMLDocument("temp"),e.base=e.createElement("base"),e.head.appendChild(e.base),e.anchor=e.createElement("a"),e.body.appendChild(e.anchor)),e.base.href=r,e.anchor.href=n,e.anchor.href||n}function o(t,e){return t.replace(n,(function(t,n,i,o){return n+"'"+r(i.replace(/["']/g,""),e)+"'"+o}))}function a(t){return t.substring(0,t.lastIndexOf("/")+1)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const s=!window.ShadyDOM||!window.ShadyDOM.inUse,u=(Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),s&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const t=new CSSStyleSheet;t.replaceSync("");const e=document.createElement("div");return e.attachShadow({mode:"open"}),e.shadowRoot.adoptedStyleSheets=[t],e.shadowRoot.adoptedStyleSheets[0]===t}catch(t){return!1}})());let h=window.Polymer&&window.Polymer.rootPath||a(document.baseURI||window.location.href),l=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,c=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,d=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,p=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,f=window.Polymer&&window.Polymer.legacyOptimizations||!1,_=window.Polymer&&window.Polymer.legacyWarnings||!1,m=window.Polymer&&window.Polymer.syncInitialRender||!1,y=window.Polymer&&window.Polymer.legacyUndefined||!1,v=window.Polymer&&window.Polymer.orderedComputed||!1,g=window.Polymer&&window.Polymer.removeNestedTemplates||!1,b=window.Polymer&&window.Polymer.fastDomIf||!1,w=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,E=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,C=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,T=0;const S=function(t){let e=t.__mixinApplications;e||(e=new WeakMap,t.__mixinApplications=e);let n=T++;return function(i){let r=i.__mixinSet;if(r&&r[n])return i;let o=e,a=o.get(i);if(!a){a=t(i),o.set(i,a);let e=Object.create(a.__mixinSet||r||null);e[n]=!0,a.__mixinSet=e}return a}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let I={},P={};function N(t,e){I[t]=P[t.toLowerCase()]=e}function k(t){return I[t]||P[t.toLowerCase()]}class O extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,e){if(t){let n=k(t);return n&&e?n.querySelector(e):n}return null}attributeChangedCallback(t,e,n,i){e!==n&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,e=r(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=a(e)}return this.__assetpath}register(t){if(t=t||this.id){if(d&&void 0!==k(t))throw N(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,N(t,this),(e=this).querySelector("style")&&console.warn("dom-module %s has style outside template",e.id)}var e}}O.prototype.modules=I,customElements.define("dom-module",O);function A(t){return O.import(t)}function D(t){const e=o((t.body?t.body:t).textContent,t.baseURI),n=document.createElement("style");return n.textContent=e,n}function R(t){const e=t.trim().split(/\s+/),n=[];for(let t=0;t<e.length;t++)n.push(...x(e[t]));return n}function x(t){const e=A(t);if(!e)return console.warn("Could not find style data in module named",t),[];if(void 0===e._styles){const t=[];t.push(...L(e));const n=e.querySelector("template");n&&t.push(...M(n,e.assetpath)),e._styles=t}return e._styles}function M(t,e){if(!t._styles){const n=[],i=t.content.querySelectorAll("style");for(let t=0;t<i.length;t++){let r=i[t],a=r.getAttribute("include");a&&n.push(...R(a).filter((function(t,e,n){return n.indexOf(t)===e}))),e&&(r.textContent=o(r.textContent,e)),n.push(r)}t._styles=n}return t._styles}function L(t){const e=[],n=t.querySelectorAll("link[rel=import][type~=css]");for(let t=0;t<n.length;t++){let i=n[t];if(i.import){const t=i.import,n=i.hasAttribute("shady-unscoped");if(n&&!t._unscopedStyle){const e=D(t);e.setAttribute("shady-unscoped",""),t._unscopedStyle=e}else t._style||(t._style=D(t));e.push(n?t._unscopedStyle:t._style)}}return e}function F(t){let e=t.trim().split(/\s+/),n="";for(let t=0;t<e.length;t++)n+=U(e[t]);return n}function U(t){let e=A(t);if(e&&void 0===e._cssText){let t=function(t){let e="",n=L(t);for(let t=0;t<n.length;t++)e+=n[t].textContent;return e}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e),n=e.querySelector("template");n&&(t+=function(t,e){let n="";const i=M(t,e);for(let t=0;t<i.length;t++){let e=i[t];e.parentNode&&e.parentNode.removeChild(e),n+=e.textContent}return n}(n,e.assetpath)),e._cssText=t||null}return e||console.warn("Could not find style data in module named",t),e&&e._cssText||""}const j=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?t=>ShadyDOM.patch(t):t=>t;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function H(t){return t.indexOf(".")>=0}function V(t){let e=t.indexOf(".");return-1===e?t:t.slice(0,e)}function W(t,e){return 0===t.indexOf(e+".")}function Y(t,e){return 0===e.indexOf(t+".")}function q(t,e,n){return e+n.slice(t.length)}function B(t){if(Array.isArray(t)){let e=[];for(let n=0;n<t.length;n++){let i=t[n].toString().split(".");for(let t=0;t<i.length;t++)e.push(i[t])}return e.join(".")}return t}function z(t){return Array.isArray(t)?B(t).split("."):t.toString().split(".")}function Q(t,e,n){let i=t,r=z(e);for(let t=0;t<r.length;t++){if(!i)return;i=i[r[t]]}return n&&(n.path=r.join(".")),i}function G(t,e,n){let i=t,r=z(e),o=r[r.length-1];if(r.length>1){for(let t=0;t<r.length-1;t++){if(i=i[r[t]],!i)return}i[o]=n}else i[e]=n;return r.join(".")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const K={},$=/-[a-z]/g,X=/([A-Z])/g;function J(t){return K[t]||(K[t]=t.indexOf("-")<0?t:t.replace($,t=>t[1].toUpperCase()))}function Z(t){return K[t]||(K[t]=t.replace(X,"-$1").toLowerCase())}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let tt=0,et=0,nt=[],it=0,rt=!1,ot=document.createTextNode("");new window.MutationObserver((function(){rt=!1;const t=nt.length;for(let e=0;e<t;e++){let t=nt[e];if(t)try{t()}catch(t){setTimeout(()=>{throw t})}}nt.splice(0,t),et+=t})).observe(ot,{characterData:!0});const at={after:t=>({run:e=>window.setTimeout(e,t),cancel(t){window.clearTimeout(t)}}),run:(t,e)=>window.setTimeout(t,e),cancel(t){window.clearTimeout(t)}},st={run:t=>window.requestAnimationFrame(t),cancel(t){window.cancelAnimationFrame(t)}},ut={run:t=>window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,16),cancel(t){window.cancelIdleCallback?window.cancelIdleCallback(t):window.clearTimeout(t)}},ht={run:t=>(rt||(rt=!0,ot.textContent=it++),nt.push(t),tt++),cancel(t){const e=t-et;if(e>=0){if(!nt[e])throw new Error("invalid async handle: "+t);nt[e]=null}}},lt=ht,ct=S(t=>class extends t{static createProperties(t){const e=this.prototype;for(let n in t)n in e||e._createPropertyAccessor(n)}static attributeNameForProperty(t){return t.toLowerCase()}static typeForProperty(t){}_createPropertyAccessor(t,e){this._addPropertyToAttributeMap(t),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[t]||(this.__dataHasAccessor[t]=!0,this._definePropertyAccessor(t,e))}_addPropertyToAttributeMap(t){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let e=this.__dataAttributes[t];return e||(e=this.constructor.attributeNameForProperty(t),this.__dataAttributes[e]=t),e}_definePropertyAccessor(t,e){Object.defineProperty(this,t,{get(){return this.__data[t]},set:e?function(){}:function(e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let t in this.__dataHasAccessor)this.hasOwnProperty(t)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[t]=this[t],delete this[t])}_initializeInstanceProperties(t){Object.assign(this,t)}_setProperty(t,e){this._setPendingProperty(t,e)&&this._invalidateProperties()}_getProperty(t){return this.__data[t]}_setPendingProperty(t,e,n){let i=this.__data[t],r=this._shouldPropertyChange(t,e,i);return r&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(t in this.__dataOld)&&(this.__dataOld[t]=i),this.__data[t]=e,this.__dataPending[t]=e),r}_isPropertyPending(t){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(t))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,lt.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const t=this.__data,e=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(t,e,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(t,e,n)),this.__dataCounter--}_shouldPropertiesChange(t,e,n){return Boolean(e)}_propertiesChanged(t,e,n){}_shouldPropertyChange(t,e,n){return n!==e&&(n==n||e==e)}attributeChangedCallback(t,e,n,i){e!==n&&this._attributeToProperty(t,n),super.attributeChangedCallback&&super.attributeChangedCallback(t,e,n,i)}_attributeToProperty(t,e,n){if(!this.__serializing){const i=this.__dataAttributes,r=i&&i[t]||t;this[r]=this._deserializeValue(e,n||this.constructor.typeForProperty(r))}}_propertyToAttribute(t,e,n){this.__serializing=!0,n=arguments.length<3?this[t]:n,this._valueToNodeAttribute(this,n,e||this.constructor.attributeNameForProperty(t)),this.__serializing=!1}_valueToNodeAttribute(t,e,n){const i=this._serializeValue(e);"class"!==n&&"name"!==n&&"slot"!==n||(t=j(t)),void 0===i?t.removeAttribute(n):t.setAttribute(n,i)}_serializeValue(t){switch(typeof t){case"boolean":return t?"":void 0;default:return null!=t?t.toString():void 0}}_deserializeValue(t,e){switch(e){case Boolean:return null!==t;case Number:return Number(t);default:return t}}}),dt={};let pt=HTMLElement.prototype;for(;pt;){let t=Object.getOwnPropertyNames(pt);for(let e=0;e<t.length;e++)dt[t[e]]=!0;pt=Object.getPrototypeOf(pt)}const ft=S(t=>{const e=ct(t);return class extends e{static createPropertiesForAttributes(){let t=this.observedAttributes;for(let e=0;e<t.length;e++)this.prototype._createPropertyAccessor(J(t[e]))}static attributeNameForProperty(t){return Z(t)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(t){for(let e in t)this._setProperty(e,t[e])}_ensureAttribute(t,e){const n=this;n.hasAttribute(t)||this._valueToNodeAttribute(n,e,t)}_serializeValue(t){switch(typeof t){case"object":if(t instanceof Date)return t.toString();if(t)try{return JSON.stringify(t)}catch(t){return""}default:return super._serializeValue(t)}}_deserializeValue(t,e){let n;switch(e){case Object:try{n=JSON.parse(t)}catch(e){n=t}break;case Array:try{n=JSON.parse(t)}catch(e){n=null,console.warn("Polymer::Attributes: couldn't decode Array as JSON: "+t)}break;case Date:n=isNaN(t)?String(t):Number(t),n=new Date(n);break;default:n=super._deserializeValue(t,e)}return n}_definePropertyAccessor(t,e){!function(t,e){if(!dt[e]){let n=t[e];void 0!==n&&(t.__data?t._setPendingProperty(e,n):(t.__dataProto?t.hasOwnProperty(JSCompiler_renameProperty("__dataProto",t))||(t.__dataProto=Object.create(t.__dataProto)):t.__dataProto={},t.__dataProto[e]=n))}}(this,t),super._definePropertyAccessor(t,e)}_hasAccessor(t){return this.__dataHasAccessor&&this.__dataHasAccessor[t]}_isPropertyPending(t){return Boolean(this.__dataPending&&t in this.__dataPending)}}}),_t={"dom-if":!0,"dom-repeat":!0};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let mt=!1,yt=!1;function vt(t){(function(){if(!mt){mt=!0;const t=document.createElement("textarea");t.placeholder="a",yt=t.placeholder===t.textContent}return yt})()&&"textarea"===t.localName&&t.placeholder&&t.placeholder===t.textContent&&(t.textContent=null)}function gt(t){let e=t.getAttribute("is");if(e&&_t[e]){let n=t;for(n.removeAttribute("is"),t=n.ownerDocument.createElement(e),n.parentNode.replaceChild(t,n),t.appendChild(n);n.attributes.length;)t.setAttribute(n.attributes[0].name,n.attributes[0].value),n.removeAttribute(n.attributes[0].name)}return t}function bt(t,e){let n=e.parentInfo&&bt(t,e.parentInfo);if(!n)return t;for(let t=n.firstChild,i=0;t;t=t.nextSibling)if(e.parentIndex===i++)return t}function wt(t,e,n,i){i.id&&(e[i.id]=n)}function Et(t,e,n){if(n.events&&n.events.length)for(let i,r=0,o=n.events;r<o.length&&(i=o[r]);r++)t._addMethodEventListenerToNode(e,i.name,i.value,t)}function Ct(t,e,n,i){n.templateInfo&&(e._templateInfo=n.templateInfo,e._parentTemplateInfo=i)}const Tt=S(t=>class extends t{static _parseTemplate(t,e){if(!t._templateInfo){let n=t._templateInfo={};n.nodeInfoList=[],n.nestedTemplate=Boolean(e),n.stripWhiteSpace=e&&e.stripWhiteSpace||t.hasAttribute("strip-whitespace"),this._parseTemplateContent(t,n,{parent:null})}return t._templateInfo}static _parseTemplateContent(t,e,n){return this._parseTemplateNode(t.content,e,n)}static _parseTemplateNode(t,e,n){let i=!1,r=t;return"template"!=r.localName||r.hasAttribute("preserve-content")?"slot"===r.localName&&(e.hasInsertionPoint=!0):i=this._parseTemplateNestedTemplate(r,e,n)||i,vt(r),r.firstChild&&this._parseTemplateChildNodes(r,e,n),r.hasAttributes&&r.hasAttributes()&&(i=this._parseTemplateNodeAttributes(r,e,n)||i),i||n.noted}static _parseTemplateChildNodes(t,e,n){if("script"!==t.localName&&"style"!==t.localName)for(let i,r=t.firstChild,o=0;r;r=i){if("template"==r.localName&&(r=gt(r)),i=r.nextSibling,r.nodeType===Node.TEXT_NODE){let n=i;for(;n&&n.nodeType===Node.TEXT_NODE;)r.textContent+=n.textContent,i=n.nextSibling,t.removeChild(n),n=i;if(e.stripWhiteSpace&&!r.textContent.trim()){t.removeChild(r);continue}}let a={parentIndex:o,parentInfo:n};this._parseTemplateNode(r,e,a)&&(a.infoIndex=e.nodeInfoList.push(a)-1),r.parentNode&&o++}}static _parseTemplateNestedTemplate(t,e,n){let i=t,r=this._parseTemplate(i,e);return(r.content=i.content.ownerDocument.createDocumentFragment()).appendChild(i.content),n.templateInfo=r,!0}static _parseTemplateNodeAttributes(t,e,n){let i=!1,r=Array.from(t.attributes);for(let o,a=r.length-1;o=r[a];a--)i=this._parseTemplateNodeAttribute(t,e,n,o.name,o.value)||i;return i}static _parseTemplateNodeAttribute(t,e,n,i,r){return"on-"===i.slice(0,3)?(t.removeAttribute(i),n.events=n.events||[],n.events.push({name:i.slice(3),value:r}),!0):"id"===i&&(n.id=r,!0)}static _contentForTemplate(t){let e=t._templateInfo;return e&&e.content||t.content}_stampTemplate(t,e){t&&!t.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t);let n=(e=e||this.constructor._parseTemplate(t)).nodeInfoList,i=e.content||t.content,r=document.importNode(i,!0);r.__noInsertionPoint=!e.hasInsertionPoint;let o=r.nodeList=new Array(n.length);r.$={};for(let t,i=0,a=n.length;i<a&&(t=n[i]);i++){let n=o[i]=bt(r,t);wt(0,r.$,n,t),Ct(0,n,t,e),Et(this,n,t)}return r=r,r}_addMethodEventListenerToNode(t,e,n,i){let r=function(t,e,n){return t=t._methodHost||t,function(e){t[n]?t[n](e,e.detail):console.warn("listener method `"+n+"` not defined")}}(i=i||t,0,n);return this._addEventListenerToNode(t,e,r),r}_addEventListenerToNode(t,e,n){t.addEventListener(e,n)}_removeEventListenerFromNode(t,e,n){t.removeEventListener(e,n)}});
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let St=0;const It=[],Pt={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Nt=/[A-Z]/;function kt(t,e,n){let i=t[e];if(i){if(!t.hasOwnProperty(e)&&(i=t[e]=Object.create(t[e]),n))for(let t in i){let e=i[t],n=i[t]=Array(e.length);for(let t=0;t<e.length;t++)n[t]=e[t]}}else i=t[e]={};return i}function Ot(t,e,n,i,r,o){if(e){let a=!1;const s=St++;for(let u in n){let h=e[r?V(u):u];if(h)for(let e,l=0,c=h.length;l<c&&(e=h[l]);l++)e.info&&e.info.lastRun===s||r&&!Dt(u,e.trigger)||(e.info&&(e.info.lastRun=s),e.fn(t,u,n,i,e.info,r,o),a=!0)}return a}return!1}function At(t,e,n,i,r,o,a,s){let u=!1,h=e[a?V(i):i];if(h)for(let e,l=0,c=h.length;l<c&&(e=h[l]);l++)e.info&&e.info.lastRun===n||a&&!Dt(i,e.trigger)||(e.info&&(e.info.lastRun=n),e.fn(t,i,r,o,e.info,a,s),u=!0);return u}function Dt(t,e){if(e){let n=e.name;return n==t||!(!e.structured||!W(n,t))||!(!e.wildcard||!Y(n,t))}return!0}function Rt(t,e,n,i,r){let o="string"==typeof r.method?t[r.method]:r.method,a=r.property;o?o.call(t,t.__data[a],i[a]):r.dynamicFn||console.warn("observer method `"+r.method+"` not defined")}function xt(t,e,n){let i=V(e);if(i!==e){return Mt(t,Z(i)+"-changed",n[e],e),!0}return!1}function Mt(t,e,n,i){let r={value:n,queueProperty:!0};i&&(r.path=i),j(t).dispatchEvent(new CustomEvent(e,{detail:r}))}function Lt(t,e,n,i,r,o){let a=(o?V(e):e)!=e?e:null,s=a?Q(t,a):t.__data[e];a&&void 0===s&&(s=n[e]),Mt(t,r.eventName,s,a)}function Ft(t,e,n,i,r){let o=t.__data[e];l&&(o=l(o,r.attrName,"attribute",t)),t._propertyToAttribute(e,r.attrName,o)}function Ut(t,e,n,i){let r=t[Pt.COMPUTE];if(r)if(v){St++;const o=function(t){let e=t.constructor.__orderedComputedDeps;if(!e){e=new Map;const n=t[Pt.COMPUTE];let i,{counts:r,ready:o,total:a}=function(t){const e=t.__computeInfo,n={},i=t[Pt.COMPUTE],r=[];let o=0;for(let t in e){const i=e[t];o+=n[t]=i.args.filter(t=>!t.literal).length+(i.dynamicFn?1:0)}for(let t in i)e[t]||r.push(t);return{counts:n,ready:r,total:o}}(t);for(;i=o.shift();){e.set(i,e.size);const t=n[i];t&&t.forEach(t=>{const e=t.info.methodInfo;--a,0==--r[e]&&o.push(e)})}if(0!==a){const e=t;console.warn(`Computed graph for ${e.localName} incomplete; circular?`)}t.constructor.__orderedComputedDeps=e}return e}(t),a=[];for(let t in e)Ht(t,r,a,o,i);let s;for(;s=a.shift();)Vt(t,"",e,n,s)&&Ht(s.methodInfo,r,a,o,i);Object.assign(n,t.__dataOld),Object.assign(e,t.__dataPending),t.__dataPending=null}else{let o=e;for(;Ot(t,r,o,n,i);)Object.assign(n,t.__dataOld),Object.assign(e,t.__dataPending),o=t.__dataPending,t.__dataPending=null}}const jt=(t,e,n)=>{let i=0,r=e.length-1,o=-1;for(;i<=r;){const a=i+r>>1,s=n.get(e[a].methodInfo)-n.get(t.methodInfo);if(s<0)i=a+1;else{if(!(s>0)){o=a;break}r=a-1}}o<0&&(o=r+1),e.splice(o,0,t)},Ht=(t,e,n,i,r)=>{const o=e[r?V(t):t];if(o)for(let e=0;e<o.length;e++){const a=o[e];a.info.lastRun===St||r&&!Dt(t,a.trigger)||(a.info.lastRun=St,jt(a.info,n,i))}};function Vt(t,e,n,i,r){let o=Gt(t,e,n,i,r);if(o===It)return!1;let a=r.methodInfo;return t.__dataHasAccessor&&t.__dataHasAccessor[a]?t._setPendingProperty(a,o,!0):(t[a]=o,!1)}function Wt(t,e,n,i,r,o,a){n.bindings=n.bindings||[];let s={kind:i,target:r,parts:o,literal:a,isCompound:1!==o.length};if(n.bindings.push(s),function(t){return Boolean(t.target)&&"attribute"!=t.kind&&"text"!=t.kind&&!t.isCompound&&"{"===t.parts[0].mode}(s)){let{event:t,negate:e}=s.parts[0];s.listenerEvent=t||Z(r)+"-changed",s.listenerNegate=e}let u=e.nodeInfoList.length;for(let n=0;n<s.parts.length;n++){let i=s.parts[n];i.compoundIndex=n,Yt(t,e,s,i,u)}}function Yt(t,e,n,i,r){if(!i.literal)if("attribute"===n.kind&&"-"===n.target[0])console.warn("Cannot set attribute "+n.target+' because "-" is not a valid attribute starting character');else{let o=i.dependencies,a={index:r,binding:n,part:i,evaluator:t};for(let n=0;n<o.length;n++){let i=o[n];"string"==typeof i&&(i=Zt(i),i.wildcard=!0),t._addTemplatePropertyEffect(e,i.rootProperty,{fn:qt,info:a,trigger:i})}}}function qt(t,e,n,i,r,o,a){let s=a[r.index],u=r.binding,h=r.part;if(o&&h.source&&e.length>h.source.length&&"property"==u.kind&&!u.isCompound&&s.__isPropertyEffectsClient&&s.__dataHasAccessor&&s.__dataHasAccessor[u.target]){let i=n[e];e=q(h.source,u.target,e),s._setPendingPropertyOrPath(e,i,!1,!0)&&t._enqueueClient(s)}else{let a=r.evaluator._evaluateBinding(t,h,e,n,i,o);a!==It&&function(t,e,n,i,r){r=function(t,e,n,i){if(n.isCompound){let r=t.__dataCompoundStorage[n.target];r[i.compoundIndex]=e,e=r.join("")}"attribute"!==n.kind&&("textContent"!==n.target&&("value"!==n.target||"input"!==t.localName&&"textarea"!==t.localName)||(e=null==e?"":e));return e}(e,r,n,i),l&&(r=l(r,n.target,n.kind,e));if("attribute"==n.kind)t._valueToNodeAttribute(e,r,n.target);else{let i=n.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[i]?e[Pt.READ_ONLY]&&e[Pt.READ_ONLY][i]||e._setPendingProperty(i,r)&&t._enqueueClient(e):t._setUnmanagedPropertyToNode(e,i,r)}}(t,s,u,h,a)}}function Bt(t,e){if(e.isCompound){let n=t.__dataCompoundStorage||(t.__dataCompoundStorage={}),i=e.parts,r=new Array(i.length);for(let t=0;t<i.length;t++)r[t]=i[t].literal;let o=e.target;n[o]=r,e.literal&&"property"==e.kind&&("className"===o&&(t=j(t)),t[o]=e.literal)}}function zt(t,e,n){if(n.listenerEvent){let i=n.parts[0];t.addEventListener(n.listenerEvent,(function(t){!function(t,e,n,i,r){let o,a=t.detail,s=a&&a.path;s?(i=q(n,i,s),o=a&&a.value):o=t.currentTarget[n],o=r?!o:o,e[Pt.READ_ONLY]&&e[Pt.READ_ONLY][i]||!e._setPendingPropertyOrPath(i,o,!0,Boolean(s))||a&&a.queueProperty||e._invalidateProperties()}(t,e,n.target,i.source,i.negate)}))}}function Qt(t,e,n,i,r,o){o=e.static||o&&("object"!=typeof o||o[e.methodName]);let a={methodName:e.methodName,args:e.args,methodInfo:r,dynamicFn:o};for(let r,o=0;o<e.args.length&&(r=e.args[o]);o++)r.literal||t._addPropertyEffect(r.rootProperty,n,{fn:i,info:a,trigger:r});return o&&t._addPropertyEffect(e.methodName,n,{fn:i,info:a}),a}function Gt(t,e,n,i,r){let o=t._methodHost||t,a=o[r.methodName];if(a){let i=t._marshalArgs(r.args,e,n);return i===It?It:a.apply(o,i)}r.dynamicFn||console.warn("method `"+r.methodName+"` not defined")}const Kt=[],$t=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function Xt(t){let e="";for(let n=0;n<t.length;n++){e+=t[n].literal||""}return e}function Jt(t){let e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let t={methodName:e[1],static:!0,args:Kt};if(e[2].trim()){return function(t,e){return e.args=t.map((function(t){let n=Zt(t);return n.literal||(e.static=!1),n}),this),e}(e[2].replace(/\\,/g,"&comma;").split(","),t)}return t}return null}function Zt(t){let e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:e,value:"",literal:!1},i=e[0];switch("-"===i&&(i=e[1]),i>="0"&&i<="9"&&(i="#"),i){case"'":case'"':n.value=e.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(e),n.literal=!0}return n.literal||(n.rootProperty=V(e),n.structured=H(e),n.structured&&(n.wildcard=".*"==e.slice(-2),n.wildcard&&(n.name=e.slice(0,-2)))),n}function te(t,e,n){let i=Q(t,n);return void 0===i&&(i=e[n]),i}function ee(t,e,n,i){const r={indexSplices:i};y&&!t._overrideLegacyUndefined&&(e.splices=r),t.notifyPath(n+".splices",r),t.notifyPath(n+".length",e.length),y&&!t._overrideLegacyUndefined&&(r.indexSplices=[])}function ne(t,e,n,i,r,o){ee(t,e,n,[{index:i,addedCount:r,removed:o,object:e,type:"splice"}])}const ie=S(t=>{const e=Tt(ft(t));return class extends e{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return Pt}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(re.length){let t=re[re.length-1];t._enqueueClient(this),this.__dataHost=t}}_initializeProtoProperties(t){this.__data=Object.create(t),this.__dataPending=Object.create(t),this.__dataOld={}}_initializeInstanceProperties(t){let e=this[Pt.READ_ONLY];for(let n in t)e&&e[n]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[n]=this.__dataPending[n]=t[n])}_addPropertyEffect(t,e,n){this._createPropertyAccessor(t,e==Pt.READ_ONLY);let i=kt(this,e,!0)[t];i||(i=this[e][t]=[]),i.push(n)}_removePropertyEffect(t,e,n){let i=kt(this,e,!0)[t],r=i.indexOf(n);r>=0&&i.splice(r,1)}_hasPropertyEffect(t,e){let n=this[e];return Boolean(n&&n[t])}_hasReadOnlyEffect(t){return this._hasPropertyEffect(t,Pt.READ_ONLY)}_hasNotifyEffect(t){return this._hasPropertyEffect(t,Pt.NOTIFY)}_hasReflectEffect(t){return this._hasPropertyEffect(t,Pt.REFLECT)}_hasComputedEffect(t){return this._hasPropertyEffect(t,Pt.COMPUTE)}_setPendingPropertyOrPath(t,e,n,i){if(i||V(Array.isArray(t)?t[0]:t)!==t){if(!i){let n=Q(this,t);if(!(t=G(this,t,e))||!super._shouldPropertyChange(t,e,n))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(t,e,n))return function(t,e,n){let i=t.__dataLinkedPaths;if(i){let r;for(let o in i){let a=i[o];Y(o,e)?(r=q(o,a,e),t._setPendingPropertyOrPath(r,n,!0,!0)):Y(a,e)&&(r=q(a,o,e),t._setPendingPropertyOrPath(r,n,!0,!0))}}}(this,t,e),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[t])return this._setPendingProperty(t,e,n);this[t]=e}return!1}_setUnmanagedPropertyToNode(t,e,n){n===t[e]&&"object"!=typeof n||("className"===e&&(t=j(t)),t[e]=n)}_setPendingProperty(t,e,n){let i=this.__dataHasPaths&&H(t),r=i?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(t,e,r[t])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),t in this.__dataOld||(this.__dataOld[t]=this.__data[t]),i?this.__dataTemp[t]=e:this.__data[t]=e,this.__dataPending[t]=e,(i||this[Pt.NOTIFY]&&this[Pt.NOTIFY][t])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[t]=n),!0)}_setProperty(t,e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(t){this.__dataPendingClients=this.__dataPendingClients||[],t!==this&&this.__dataPendingClients.push(t)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let t=this.__dataPendingClients;if(t){this.__dataPendingClients=null;for(let e=0;e<t.length;e++){let n=t[e];n.__dataEnabled?n.__dataPending&&n._flushProperties():n._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(t,e){for(let n in t)!e&&this[Pt.READ_ONLY]&&this[Pt.READ_ONLY][n]||this._setPendingPropertyOrPath(n,t[n],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(t,e,n){let i,r=this.__dataHasPaths;this.__dataHasPaths=!1,Ut(this,e,n,r),i=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(e,n,r),this._flushClients(),Ot(this,this[Pt.REFLECT],e,n,r),Ot(this,this[Pt.OBSERVE],e,n,r),i&&function(t,e,n,i,r){let o,a,s=t[Pt.NOTIFY],u=St++;for(let a in e)e[a]&&(s&&At(t,s,u,a,n,i,r)||r&&xt(t,a,n))&&(o=!0);o&&(a=t.__dataHost)&&a._invalidateProperties&&a._invalidateProperties()}(this,i,e,n,r),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(t,e,n){this[Pt.PROPAGATE]&&Ot(this,this[Pt.PROPAGATE],t,e,n),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,t,e,n)}_runEffectsForTemplate(t,e,n,i){const r=(e,i)=>{Ot(this,t.propertyEffects,e,n,i,t.nodeList);for(let r=t.firstChild;r;r=r.nextSibling)this._runEffectsForTemplate(r,e,n,i)};t.runEffects?t.runEffects(r,e,i):r(e,i)}linkPaths(t,e){t=B(t),e=B(e),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[t]=e}unlinkPaths(t){t=B(t),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[t]}notifySplices(t,e){let n={path:""};ee(this,Q(this,t,n),n.path,e)}get(t,e){return Q(e||this,t)}set(t,e,n){n?G(n,t,e):this[Pt.READ_ONLY]&&this[Pt.READ_ONLY][t]||this._setPendingPropertyOrPath(t,e,!0)&&this._invalidateProperties()}push(t,...e){let n={path:""},i=Q(this,t,n),r=i.length,o=i.push(...e);return e.length&&ne(this,i,n.path,r,e.length,[]),o}pop(t){let e={path:""},n=Q(this,t,e),i=Boolean(n.length),r=n.pop();return i&&ne(this,n,e.path,n.length,0,[r]),r}splice(t,e,n,...i){let r,o={path:""},a=Q(this,t,o);return e<0?e=a.length-Math.floor(-e):e&&(e=Math.floor(e)),r=2===arguments.length?a.splice(e):a.splice(e,n,...i),(i.length||r.length)&&ne(this,a,o.path,e,i.length,r),r}shift(t){let e={path:""},n=Q(this,t,e),i=Boolean(n.length),r=n.shift();return i&&ne(this,n,e.path,0,0,[r]),r}unshift(t,...e){let n={path:""},i=Q(this,t,n),r=i.unshift(...e);return e.length&&ne(this,i,n.path,0,e.length,[]),r}notifyPath(t,e){let n;if(1==arguments.length){let i={path:""};e=Q(this,t,i),n=i.path}else n=Array.isArray(t)?B(t):t;this._setPendingPropertyOrPath(n,e,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(t,e){this._addPropertyEffect(t,Pt.READ_ONLY),e&&(this["_set"+function(t){return t[0].toUpperCase()+t.substring(1)}(t)]=function(e){this._setProperty(t,e)})}_createPropertyObserver(t,e,n){let i={property:t,method:e,dynamicFn:Boolean(n)};this._addPropertyEffect(t,Pt.OBSERVE,{fn:Rt,info:i,trigger:{name:t}}),n&&this._addPropertyEffect(e,Pt.OBSERVE,{fn:Rt,info:i,trigger:{name:e}})}_createMethodObserver(t,e){let n=Jt(t);if(!n)throw new Error("Malformed observer expression '"+t+"'");Qt(this,n,Pt.OBSERVE,Gt,null,e)}_createNotifyingProperty(t){this._addPropertyEffect(t,Pt.NOTIFY,{fn:Lt,info:{eventName:Z(t)+"-changed",property:t}})}_createReflectedProperty(t){let e=this.constructor.attributeNameForProperty(t);"-"===e[0]?console.warn("Property "+t+" cannot be reflected to attribute "+e+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(t,Pt.REFLECT,{fn:Ft,info:{attrName:e}})}_createComputedProperty(t,e,n){let i=Jt(e);if(!i)throw new Error("Malformed computed expression '"+e+"'");const r=Qt(this,i,Pt.COMPUTE,Vt,t,n);kt(this,"__computeInfo")[t]=r}_marshalArgs(t,e,n){const i=this.__data,r=[];for(let o=0,a=t.length;o<a;o++){let{name:a,structured:s,wildcard:u,value:h,literal:l}=t[o];if(!l)if(u){const t=Y(a,e),r=te(i,n,t?e:a);h={path:t?e:a,value:r,base:t?Q(i,a):r}}else h=s?te(i,n,a):i[a];if(y&&!this._overrideLegacyUndefined&&void 0===h&&t.length>1)return It;r[o]=h}return r}static addPropertyEffect(t,e,n){this.prototype._addPropertyEffect(t,e,n)}static createPropertyObserver(t,e,n){this.prototype._createPropertyObserver(t,e,n)}static createMethodObserver(t,e){this.prototype._createMethodObserver(t,e)}static createNotifyingProperty(t){this.prototype._createNotifyingProperty(t)}static createReadOnlyProperty(t,e){this.prototype._createReadOnlyProperty(t,e)}static createReflectedProperty(t){this.prototype._createReflectedProperty(t)}static createComputedProperty(t,e,n){this.prototype._createComputedProperty(t,e,n)}static bindTemplate(t){return this.prototype._bindTemplate(t)}_bindTemplate(t,e){let n=this.constructor._parseTemplate(t),i=this.__preBoundTemplateInfo==n;if(!i)for(let t in n.propertyEffects)this._createPropertyAccessor(t);if(e)if(n=Object.create(n),n.wasPreBound=i,this.__templateInfo){const e=t._parentTemplateInfo||this.__templateInfo,i=e.lastChild;n.parent=e,e.lastChild=n,n.previousSibling=i,i?i.nextSibling=n:e.firstChild=n}else this.__templateInfo=n;else this.__preBoundTemplateInfo=n;return n}static _addTemplatePropertyEffect(t,e,n){(t.hostProps=t.hostProps||{})[e]=!0;let i=t.propertyEffects=t.propertyEffects||{};(i[e]=i[e]||[]).push(n)}_stampTemplate(t,e){e=e||this._bindTemplate(t,!0),re.push(this);let n=super._stampTemplate(t,e);if(re.pop(),e.nodeList=n.nodeList,!e.wasPreBound){let t=e.childNodes=[];for(let e=n.firstChild;e;e=e.nextSibling)t.push(e)}return n.templateInfo=e,function(t,e){let{nodeList:n,nodeInfoList:i}=e;if(i.length)for(let e=0;e<i.length;e++){let r=i[e],o=n[e],a=r.bindings;if(a)for(let e=0;e<a.length;e++){let n=a[e];Bt(o,n),zt(o,t,n)}o.__dataHost=t}}(this,e),this.__dataClientsReady&&(this._runEffectsForTemplate(e,this.__data,null,!1),this._flushClients()),n}_removeBoundDom(t){const e=t.templateInfo,{previousSibling:n,nextSibling:i,parent:r}=e;n?n.nextSibling=i:r&&(r.firstChild=i),i?i.previousSibling=n:r&&(r.lastChild=n),e.nextSibling=e.previousSibling=null;let o=e.childNodes;for(let t=0;t<o.length;t++){let e=o[t];j(j(e).parentNode).removeChild(e)}}static _parseTemplateNode(t,n,i){let r=e._parseTemplateNode.call(this,t,n,i);if(t.nodeType===Node.TEXT_NODE){let e=this._parseBindings(t.textContent,n);e&&(t.textContent=Xt(e)||" ",Wt(this,n,i,"text","textContent",e),r=!0)}return r}static _parseTemplateNodeAttribute(t,n,i,r,o){let a=this._parseBindings(o,n);if(a){let e=r,o="property";Nt.test(r)?o="attribute":"$"==r[r.length-1]&&(r=r.slice(0,-1),o="attribute");let s=Xt(a);return s&&"attribute"==o&&("class"==r&&t.hasAttribute("class")&&(s+=" "+t.getAttribute(r)),t.setAttribute(r,s)),"attribute"==o&&"disable-upgrade$"==e&&t.setAttribute(r,""),"input"===t.localName&&"value"===e&&t.setAttribute(e,""),t.removeAttribute(e),"property"===o&&(r=J(r)),Wt(this,n,i,o,r,a,s),!0}return e._parseTemplateNodeAttribute.call(this,t,n,i,r,o)}static _parseTemplateNestedTemplate(t,n,i){let r=e._parseTemplateNestedTemplate.call(this,t,n,i);const o=t.parentNode,a=i.templateInfo,s="dom-if"===o.localName,u="dom-repeat"===o.localName;g&&(s||u)&&(o.removeChild(t),(i=i.parentInfo).templateInfo=a,i.noted=!0,r=!1);let h=a.hostProps;if(b&&s)h&&(n.hostProps=Object.assign(n.hostProps||{},h),g||(i.parentInfo.noted=!0));else{let t="{";for(let e in h){Wt(this,n,i,"property","_host_"+e,[{mode:t,source:e,dependencies:[e],hostProp:!0}])}}return r}static _parseBindings(t,e){let n,i=[],r=0;for(;null!==(n=$t.exec(t));){n.index>r&&i.push({literal:t.slice(r,n.index)});let o=n[1][0],a=Boolean(n[2]),s=n[3].trim(),u=!1,h="",l=-1;"{"==o&&(l=s.indexOf("::"))>0&&(h=s.substring(l+2),s=s.substring(0,l),u=!0);let c=Jt(s),d=[];if(c){let{args:t,methodName:n}=c;for(let e=0;e<t.length;e++){let n=t[e];n.literal||d.push(n)}let i=e.dynamicFns;(i&&i[n]||c.static)&&(d.push(n),c.dynamicFn=!0)}else d.push(s);i.push({source:s,mode:o,negate:a,customEvent:u,signature:c,dependencies:d,event:h}),r=$t.lastIndex}if(r&&r<t.length){let e=t.substring(r);e&&i.push({literal:e})}return i.length?i:null}static _evaluateBinding(t,e,n,i,r,o){let a;return a=e.signature?Gt(t,n,i,0,e.signature):n!=e.source?Q(t,e.source):o&&H(n)?Q(t,n):t.__data[n],e.negate&&(a=!a),a}}}),re=[];
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function oe(t){}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const ae=S(t=>{const e=ct(t);function n(t){const e=Object.getPrototypeOf(t);return e.prototype instanceof r?e:null}function i(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",t))){let e=null;if(t.hasOwnProperty(JSCompiler_renameProperty("properties",t))){const n=t.properties;n&&(e=function(t){const e={};for(let n in t){const i=t[n];e[n]="function"==typeof i?{type:i}:i}return e}(n))}t.__ownProperties=e}return t.__ownProperties}class r extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const t=this._properties;this.__observedAttributes=t?Object.keys(t).map(t=>this.prototype._addPropertyToAttributeMap(t)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const t=n(this);t&&t.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const t=i(this);t&&this.createProperties(t)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const t=n(this);this.__properties=Object.assign({},t&&t._properties,i(this))}return this.__properties}static typeForProperty(t){const e=this._properties[t];return e&&e.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return r}),se=window.ShadyCSS&&window.ShadyCSS.cssBuild,ue=S(t=>{const e=ae(ie(t));function n(t,e,n,i){n.computed&&(n.readOnly=!0),n.computed&&(t._hasReadOnlyEffect(e)?console.warn(`Cannot redefine computed property '${e}'.`):t._createComputedProperty(e,n.computed,i)),n.readOnly&&!t._hasReadOnlyEffect(e)?t._createReadOnlyProperty(e,!n.computed):!1===n.readOnly&&t._hasReadOnlyEffect(e)&&console.warn(`Cannot make readOnly property '${e}' non-readOnly.`),n.reflectToAttribute&&!t._hasReflectEffect(e)?t._createReflectedProperty(e):!1===n.reflectToAttribute&&t._hasReflectEffect(e)&&console.warn(`Cannot make reflected property '${e}' non-reflected.`),n.notify&&!t._hasNotifyEffect(e)?t._createNotifyingProperty(e):!1===n.notify&&t._hasNotifyEffect(e)&&console.warn(`Cannot make notify property '${e}' non-notify.`),n.observer&&t._createPropertyObserver(e,n.observer,i[n.observer]),t._addPropertyToAttributeMap(e)}function i(t,e,n,i){if(!se){const r=e.content.querySelectorAll("style"),o=M(e),a=function(t){let e=A(t);return e?L(e):[]}(n),s=e.content.firstElementChild;for(let n=0;n<a.length;n++){let r=a[n];r.textContent=t._processStyleText(r.textContent,i),e.content.insertBefore(r,s)}let u=0;for(let e=0;e<o.length;e++){let n=o[e],a=r[u];a!==n?(n=n.cloneNode(!0),a.parentNode.insertBefore(n,a)):u++,n.textContent=t._processStyleText(n.textContent,i)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,n),C&&se&&u){const n=e.content.querySelectorAll("style");if(n){let e="";Array.from(n).forEach(t=>{e+=t.textContent,t.parentNode.removeChild(t)}),t._styleSheet=new CSSStyleSheet,t._styleSheet.replaceSync(e)}}}return class extends e{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){e._finalizeClass.call(this);const t=((n=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",n))||(n.__ownObservers=n.hasOwnProperty(JSCompiler_renameProperty("observers",n))?n.observers:null),n.__ownObservers);var n;t&&this.createObservers(t,this._properties),this._prepareTemplate()}static _prepareTemplate(){let t=this.template;t&&("string"==typeof t?(console.error("template getter must return HTMLTemplateElement"),t=null):f||(t=t.cloneNode(!0))),this.prototype._template=t}static createProperties(t){for(let e in t)n(this.prototype,e,t[e],t)}static createObservers(t,e){const n=this.prototype;for(let i=0;i<t.length;i++)n._createMethodObserver(t[i],e)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const t=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==t?t:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(t){let e=null;if(t&&(!d||p)&&(e=O.import(t,"template"),d&&!e))throw new Error("strictTemplatePolicy: expecting dom-module or null template for "+t);return e}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(t){this._template=t}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const t=this.importMeta;if(t)this._importPath=a(t.url);else{const t=O.import(this.is);this._importPath=t&&t.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=h,this.importPath=this.constructor.importPath;let t=function(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",t))){t.__propertyDefaults=null;let e=t._properties;for(let n in e){let i=e[n];"value"in i&&(t.__propertyDefaults=t.__propertyDefaults||{},t.__propertyDefaults[n]=i)}}return t.__propertyDefaults}(this.constructor);if(t)for(let e in t){let n=t[e];if(this._canApplyPropertyDefault(e)){let t="function"==typeof n.value?n.value.call(this):n.value;this._hasAccessor(e)?this._setPendingProperty(e,t,!0):this[e]=t}}}_canApplyPropertyDefault(t){return!this.hasOwnProperty(t)}static _processStyleText(t,e){return o(t,e)}static _finalizeTemplate(t){const e=this.prototype._template;if(e&&!e.__polymerFinalized){e.__polymerFinalized=!0;const n=this.importPath;i(this,e,t,n?r(n):""),this.prototype._bindTemplate(e)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(t){const e=j(this);if(e.attachShadow)return t?(e.shadowRoot||(e.attachShadow({mode:"open",shadyUpgradeFragment:t}),e.shadowRoot.appendChild(t),this.constructor._styleSheet&&(e.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),m&&window.ShadyDOM&&window.ShadyDOM.flushInitial(e.shadowRoot),e.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(t){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,t)}resolveUrl(t,e){return!e&&this.importPath&&(e=r(this.importPath)),r(t,e)}static _parseTemplateContent(t,n,i){return n.dynamicFns=n.dynamicFns||this._properties,e._parseTemplateContent.call(this,t,n,i)}static _addTemplatePropertyEffect(t,n,i){return!_||n in this._properties||i.info.part.signature&&i.info.part.signature.static||i.info.part.hostProp||t.nestedTemplate||console.warn(`Property '${n}' used in template but not declared in 'properties'; attribute will not be observed.`),e._addTemplatePropertyEffect.call(this,t,n,i)}}});
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class he{constructor(t){this.value=t.toString()}toString(){return this.value}}function le(t){if(t instanceof HTMLTemplateElement)return t.innerHTML;if(t instanceof he)return function(t){if(t instanceof he)return t.value;throw new Error("non-literal value passed to Polymer's htmlLiteral function: "+t)}(t);throw new Error("non-template value passed to Polymer's html function: "+t)}const ce=function(t,...e){const n=document.createElement("template");return n.innerHTML=e.reduce((e,n,i)=>e+le(n)+t[i+1],t[0]),n},de=ue(HTMLElement);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function pe(t,e,n,i,r){let o;r&&(o="object"==typeof n&&null!==n,o&&(i=t.__dataTemp[e]));let a=i!==n&&(i==i||n==n);return o&&a&&(t.__dataTemp[e]=n),a}const fe=S(t=>class extends t{_shouldPropertyChange(t,e,n){return pe(this,t,e,n,!0)}}),_e=S(t=>class extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(t,e,n){return pe(this,t,e,n,this.mutableData)}});fe._mutablePropertyChange=pe;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let me=null;function ye(){return me}ye.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:ye,writable:!0}});const ve=ie(ye),ge=fe(ve);const be=ie(class{});function we(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(Boolean(t)!=Boolean(i.__hideTemplateChildren__))if(i.nodeType===Node.TEXT_NODE)t?(i.__polymerTextContent__=i.textContent,i.textContent=""):i.textContent=i.__polymerTextContent__;else if("slot"===i.localName)if(t)i.__polymerReplaced__=document.createComment("hidden-slot"),j(j(i).parentNode).replaceChild(i.__polymerReplaced__,i);else{const t=i.__polymerReplaced__;t&&j(j(t).parentNode).replaceChild(i,t)}else i.style&&(t?(i.__polymerDisplay__=i.style.display,i.style.display="none"):i.style.display=i.__polymerDisplay__);i.__hideTemplateChildren__=t,i._showHideChildren&&i._showHideChildren(t)}}class Ee extends be{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let e=[];this.children=e;for(let t=this.root.firstChild;t;t=t.nextSibling)e.push(t),t.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let n=this.__templatizeOptions;(t&&n.instanceProps||!n.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(let e in t)this._setPendingProperty(e,t[e])}forwardHostProp(t,e){this._setPendingPropertyOrPath(t,e,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,e,n){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,e,t=>{t.model=this,n(t)});else{let i=this.__dataHost.__dataHost;i&&i._addEventListenerToNode(t,e,n)}}_showHideChildren(t){we(t,this.children)}_setUnmanagedPropertyToNode(t,e,n){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&"textContent"==e?t.__polymerTextContent__=n:super._setUnmanagedPropertyToNode(t,e,n)}get parentModel(){let t=this.__parentModel;if(!t){let e;t=this;do{t=t.__dataHost.__dataHost}while((e=t.__templatizeOptions)&&!e.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}Ee.prototype.__dataHost,Ee.prototype.__templatizeOptions,Ee.prototype._methodHost,Ee.prototype.__templatizeOwner,Ee.prototype.__hostProps;const Ce=fe(Ee);function Te(t){let e=t.__dataHost;return e&&e._methodHost||e}function Se(t,e,n){let i=n.mutableData?Ce:Ee;ke.mixin&&(i=ke.mixin(i));let r=class extends i{};return r.prototype.__templatizeOptions=n,r.prototype._bindTemplate(t),function(t,e,n,i){let r=n.hostProps||{};for(let e in i.instanceProps){delete r[e];let n=i.notifyInstanceProp;n&&t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Ne(e,n)})}if(i.forwardHostProp&&e.__dataHost)for(let e in r)n.hasHostProps||(n.hasHostProps=!0),t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(t,e,n){t.__dataHost._setPendingPropertyOrPath("_host_"+e,n[e],!0,!0)}})}(r,t,e,n),r}function Ie(t,e,n,i){let r=n.forwardHostProp;if(r&&e.hasHostProps){const s="template"==t.localName;let u=e.templatizeTemplateClass;if(!u){if(s){let t=n.mutableData?ge:ve;class i extends t{}u=e.templatizeTemplateClass=i}else{const n=t.constructor;class i extends n{}u=e.templatizeTemplateClass=i}let o=e.hostProps;for(let t in o)u.prototype._addPropertyEffect("_host_"+t,u.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:Pe(t,r)}),u.prototype._createNotifyingProperty("_host_"+t);_&&i&&function(t,e,n){const i=n.constructor._properties,{propertyEffects:r}=t,{instanceProps:o}=e;for(let t in r)if(!(i[t]||o&&o[t])){const e=r[t];for(let n=0;n<e.length;n++){const{part:i}=e[n].info;if(!i.signature||!i.signature.static){console.warn(`Property '${t}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}(e,n,i)}if(t.__dataProto&&Object.assign(t.__data,t.__dataProto),s)a=u,me=o=t,Object.setPrototypeOf(o,a.prototype),new a,me=null,t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties();else{Object.setPrototypeOf(t,u.prototype);const n=e.hostProps;for(let e in n)if(e="_host_"+e,e in t){const n=t[e];delete t[e],t.__data[e]=n}}}var o,a}function Pe(t,e){return function(t,n,i){e.call(t.__templatizeOwner,n.substring("_host_".length),i[n])}}function Ne(t,e){return function(t,n,i){e.call(t.__templatizeOwner,t,n,i[n])}}function ke(t,e,n){if(d&&!Te(t))throw new Error("strictTemplatePolicy: template owner not trusted");if(n=n||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=e;let i=(e?e.constructor:Ee)._parseTemplate(t),r=i.templatizeInstanceClass;r||(r=Se(t,i,n),i.templatizeInstanceClass=r);const o=Te(t);Ie(t,i,n,o);let a=class extends r{};return a.prototype._methodHost=o,a.prototype.__dataHost=t,a.prototype.__templatizeOwner=e,a.prototype.__hostProps=i.hostProps,a=a,a}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class Oe{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,e){this._asyncModule=t,this._callback=e,this._timer=this._asyncModule.run(()=>{this._timer=null,Ae.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),Ae.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(t,e,n){return t instanceof Oe?t._cancelAsync():t=new Oe,t.setConfig(e,n),t}}let Ae=new Set;const De=function(t){Ae.add(t)},Re=function(){const t=Boolean(Ae.size);return Ae.forEach(t=>{try{t.flush()}catch(t){setTimeout(()=>{throw t})}}),t},xe=function(){let t,e;do{t=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),e=Re()}while(t||e)};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Me=!1;function Le(){if(f&&!s){if(!Me){Me=!0;const t=document.createElement("style");t.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(t)}return!0}return!1}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Fe=_e(de);class Ue extends Fe{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!w,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),Le()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=j(j(this).parentNode);for(let e=0;e<this.__instances.length;e++)this.__attachInstance(e,t)}}__ensureTemplatized(){if(!this.__ctor){const t=this;let e=this.template=t._templateInfo?t:this.querySelector("template");if(!e){let t=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");t.disconnect(),this.__render()});return t.observe(this,{childList:!0}),!1}let n={};n[this.as]=!0,n[this.indexAs]=!0,n[this.itemsIndexAs]=!0,this.__ctor=ke(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:n,forwardHostProp:function(t,e){let n=this.__instances;for(let i,r=0;r<n.length&&(i=n[r]);r++)i.forwardHostProp(t,e)},notifyInstanceProp:function(t,e,n){if((i=this.as)===(r=e)||W(i,r)||Y(i,r)){let i=t[this.itemsIndexAs];e==this.as&&(this.items[i]=n);let r=q(this.as,`${JSCompiler_renameProperty("items",this)}.${i}`,e);this.notifyPath(r,n)}var i,r}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if("string"==typeof t){let e=t,n=this.__getMethodHost();return function(){return n[e].apply(n,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let e=this.__observePaths;for(let n=0;n<e.length;n++)0===t.indexOf(e[n])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||("items"===t.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(t,e=0){this.__renderDebouncer=Oe.debounce(this.__renderDebouncer,e>0?at.after(e):ht,t.bind(this)),De(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),xe()}__render(){if(!this.__ensureTemplatized())return;let t=this.items||[];const e=this.__sortAndFilterItems(t),n=this.__calculateLimit(e.length);this.__updateInstances(t,n,e),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),w&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(t){let e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=n;return this.__filterFn&&(e=e.filter((e,n,i)=>this.__filterFn(t[e],n,i))),this.__sortFn&&e.sort((e,n)=>this.__sortFn(t[e],t[n])),e}__calculateLimit(t){let e=t;const n=this.__instances.length;if(this.initialCount){let i;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(e=Math.min(t,this.initialCount),i=Math.max(e-n,0),this.__chunkCount=i||1):(i=Math.min(Math.max(t-n,0),this.__chunkCount),e=Math.min(n+i,t)),this.__shouldMeasureChunk=i===this.__chunkCount,this.__shouldContinueChunking=e<t,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,e}__continueChunking(){if(this.__shouldMeasureChunk){const t=performance.now()-this.__renderStartTime,e=this._targetFrameTime/t;this.__chunkCount=Math.round(this.__chunkCount*e)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(t,e,n){const i=this.__itemsIdxToInstIdx={};let r;for(r=0;r<e;r++){let e=this.__instances[r],o=n[r],a=t[o];i[o]=r,e?(e._setPendingProperty(this.as,a),e._setPendingProperty(this.indexAs,r),e._setPendingProperty(this.itemsIndexAs,o),e._flushProperties()):this.__insertInstance(a,r,o)}for(let t=this.__instances.length-1;t>=r;t--)this.__detachAndRemoveInstance(t)}__detachInstance(t){let e=this.__instances[t];const n=j(e.root);for(let t=0;t<e.children.length;t++){let i=e.children[t];n.appendChild(i)}return e}__attachInstance(t,e){let n=this.__instances[t];e.insertBefore(n.root,this)}__detachAndRemoveInstance(t){this.__detachInstance(t),this.__instances.splice(t,1)}__stampInstance(t,e,n){let i={};return i[this.as]=t,i[this.indexAs]=e,i[this.itemsIndexAs]=n,new this.__ctor(i)}__insertInstance(t,e,n){const i=this.__stampInstance(t,e,n);let r=this.__instances[e+1],o=r?r.children[0]:this;return j(j(this).parentNode).insertBefore(i.root,o),this.__instances[e]=i,i}_showHideChildren(t){for(let e=0;e<this.__instances.length;e++)this.__instances[e]._showHideChildren(t)}__handleItemPath(t,e){let n=t.slice(6),i=n.indexOf("."),r=i<0?n:n.substring(0,i);if(r==parseInt(r,10)){let t=i<0?"":n.substring(i+1);this.__handleObservedPaths(t);let o=this.__itemsIdxToInstIdx[r],a=this.__instances[o];if(a){let n=this.as+(t?"."+t:"");a._setPendingPropertyOrPath(n,e,!1,!0),a._flushProperties()}return!0}}itemForElement(t){let e=this.modelForElement(t);return e&&e[this.as]}indexForElement(t){let e=this.modelForElement(t);return e&&e[this.indexAs]}modelForElement(t){return function(t,e){let n;for(;e;)if(n=e.__dataHost?e:e.__templatizeInstance){if(n.__dataHost==t)return n;e=n.__dataHost}else e=j(e).parentNode;return null}(this.template,t)}}customElements.define(Ue.is,Ue);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class je extends de{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=Oe.debounce(this.__renderDebouncer,ht,()=>this.__render()),De(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const t=j(this).parentNode;t&&(t.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||j(t).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),Le()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const t=this;let e=t._templateInfo?t:j(t).querySelector("template");if(!e){let t=new MutationObserver(()=>{if(!j(this).querySelector("template"))throw new Error("dom-if requires a <template> child");t.disconnect(),this.__render()});return t.observe(this,{childList:!0}),!1}this.__template=e}return!0}__ensureInstance(){let t=j(this).parentNode;if(this.__hasInstance()){let e=this.__getInstanceNodes();if(e&&e.length){if(j(this).previousSibling!==e[e.length-1])for(let n,i=0;i<e.length&&(n=e[i]);i++)j(t).insertBefore(n,this)}}else{if(!t)return!1;if(!this.__ensureTemplate())return!1;this.__createAndInsertInstance(t)}return!0}render(){xe()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),w&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(t){}__teardownInstance(){}_showHideChildren(){}}const He=b?class extends je{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(t){const e=this.__dataHost||this;if(d&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const n=e._bindTemplate(this.__template,!0);n.runEffects=(t,e,n)=>{let i=this.__syncInfo;if(this.if)i&&(this.__syncInfo=null,this._showHideChildren(),e=Object.assign(i.changedProps,e)),t(e,n);else if(this.__instance)if(i||(i=this.__syncInfo={runEffects:t,changedProps:{}}),n)for(const t in e){const e=V(t);i.changedProps[e]=this.__dataHost[e]}else Object.assign(i.changedProps,e)},this.__instance=e._stampTemplate(this.__template,n),j(t).insertBefore(this.__instance,this)}__syncHostProperties(){const t=this.__syncInfo;t&&(this.__syncInfo=null,t.runEffects(t.changedProps,!1))}__teardownInstance(){const t=this.__dataHost||this;this.__instance&&(t._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,we(t,this.__instance.templateInfo.childNodes)),t||this.__syncHostProperties()}}:class extends je{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(t){this.__ctor||(this.__ctor=ke(this.__template,this,{mutableData:!0,forwardHostProp:function(t,e){this.__instance&&(this.if?this.__instance.forwardHostProp(t,e):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[V(t)]=!0))}})),this.__instance=new this.__ctor,j(t).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let t=this.__instance.children;if(t&&t.length){let e=j(t[0]).parentNode;if(e){e=j(e);for(let n,i=0;i<t.length&&(n=t[i]);i++)e.removeChild(n)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let t=this.__invalidProps;if(t){this.__invalidProps=null;for(let e in t)this.__instance._setPendingProperty(e,this.__dataHost[e]);this.__instance._flushProperties()}}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,this.__instance._showHideChildren(t)),t||this.__syncHostProperties()}};customElements.define(He.is,He);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ve=function(t,e){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function We(t,e){function n(){this.constructor=t}Ve(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ye=function(){return(Ye=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function qe(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))}function Be(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function ze(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qe(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function Ge(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qe(arguments[e]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke=!1,$e="${JSCORE_VERSION}",Xe=function(t,e){if(!t)throw Je(e)},Je=function(t){return new Error("Firebase Database ("+$e+") INTERNAL ASSERT FAILED: "+t)},Ze=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},tn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],a=r+1<t.length,s=a?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,l=o>>2,c=(3&o)<<4|s>>4,d=(15&s)<<2|h>>6,p=63&h;u||(p=64,a||(d=64)),i.push(n[l],n[c],n[d],n[p])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ze(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){var a=((7&r)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0,s=++r<t.length?n[t.charAt(r)]:64,u=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==a||null==s||null==u)throw Error();var h=o<<2|a>>4;if(i.push(h),64!==s){var l=a<<4&240|s>>2;if(i.push(l),64!==u){var c=s<<6&192|u;i.push(c)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},en=function(t){try{return tn.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nn(t){return rn(void 0,t)}function rn(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=rn(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function sn(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function un(){return!0===Ke}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn=function(t){function e(n,i){var r=t.call(this,i)||this;return r.code=n,r.name="FirebaseError",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,ln.prototype.create),r}return We(e,t),e}(Error),ln=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=e[0]||{},r=this.service+"/"+t,o=this.errors[t],a=o?cn(o,i):"Error",s=this.serviceName+": "+a+" ("+r+").",u=new hn(r,s),h=0,l=Object.keys(i);h<l.length;h++){var c=l[h];"_"!==c.slice(-1)&&(c in u&&console.warn('Overwriting FirebaseError base field "'+c+'" can cause unexpected behavior.'),u[c]=i[c])}return u},t}();function cn(t,e){return t.replace(dn,(function(t,n){var i=e[n];return null!=i?String(i):"<"+n+"?>"}))}var dn=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t){return JSON.parse(t)}function fn(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n=function(t){var e={},n={},i={},r="";try{var o=t.split(".");e=pn(en(o[0])||""),n=pn(en(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:i,signature:r}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yn(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function vn(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gn(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bn=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],h=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=l^u&(h^l),a=1518500249):(o=u^h^l,a=1859775393):i<60?(o=u&h|l&(u|h),a=2400959708):(o=u^h^l,a=3395469782);r=(s<<5|s>>>27)+o+c+a+n[i]&4294967295;c=l,l=h,h=4294967295&(u<<30|u>>>2),u=s,s=r}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<e;){if(0===o)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},t}();function wn(t,e){var n=new En(t,e);return n.subscribe.bind(n)}var En=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(i.next=Cn),void 0===i.error&&(i.error=Cn),void 0===i.complete&&(i.complete=Cn);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}})),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Cn(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn=function(t,e,n,i){var r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")};function Sn(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var r=t+" failed: ";return r+=i+" argument "}function In(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(Sn(t,e,i)+"must be a valid function.")}function Pn(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(Sn(t,e,i)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},kn=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),On=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new on;this.instancesDeferred.set(e,n);try{var i=this.getOrInitializeService(e);i&&n.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Ye({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,r=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(r);if(!o){if(i)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var i=ze(this.instancesDeferred.entries()),r=i.next();!r.done;r=i.next()){var o=Qe(r.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService(u);s.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return qe(this,void 0,void 0,(function(){var t;return Be(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ge(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var An,Dn=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new On(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Rn(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,Mn=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(xn||(xn={}));var Ln,Fn={debug:xn.DEBUG,verbose:xn.VERBOSE,info:xn.INFO,warn:xn.WARN,error:xn.ERROR,silent:xn.SILENT},Un=xn.INFO,jn=((An={})[xn.DEBUG]="log",An[xn.VERBOSE]="log",An[xn.INFO]="info",An[xn.WARN]="warn",An[xn.ERROR]="error",An),Hn=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var r=(new Date).toISOString(),o=jn[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Rn(["["+r+"]  "+t.name+":"],n))}},Vn=function(){function t(t){this.name=t,this._logLevel=Un,this._logHandler=Hn,this._userLogHandler=null,Mn.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in xn))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Fn[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Rn([this,xn.DEBUG],t)),this._logHandler.apply(this,Rn([this,xn.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Rn([this,xn.VERBOSE],t)),this._logHandler.apply(this,Rn([this,xn.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Rn([this,xn.INFO],t)),this._logHandler.apply(this,Rn([this,xn.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Rn([this,xn.WARN],t)),this._logHandler.apply(this,Rn([this,xn.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Rn([this,xn.ERROR],t)),this._logHandler.apply(this,Rn([this,xn.ERROR],t))},t}();function Wn(t){Mn.forEach((function(e){e.setLogLevel(t)}))}var Yn,qn=((Ln={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ln["bad-app-name"]="Illegal App name: '{$appName}",Ln["duplicate-app"]="Firebase App named '{$appName}' already exists",Ln["app-deleted"]="Firebase App named '{$appName}' already deleted",Ln["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ln["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ln),Bn=new ln("app","Firebase",qn),zn=((Yn={})["@firebase/app"]="fire-core",Yn["@firebase/analytics"]="fire-analytics",Yn["@firebase/auth"]="fire-auth",Yn["@firebase/database"]="fire-rtdb",Yn["@firebase/functions"]="fire-fn",Yn["@firebase/installations"]="fire-iid",Yn["@firebase/messaging"]="fire-fcm",Yn["@firebase/performance"]="fire-perf",Yn["@firebase/remote-config"]="fire-rc",Yn["@firebase/storage"]="fire-gcs",Yn["@firebase/firestore"]="fire-fst",Yn["fire-js"]="fire-js",Yn["firebase-wrapper"]="fire-js-all",Yn),Qn=new Vn("@firebase/app"),Gn=function(){function t(t,e,n){var i,r,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=nn(t),this.container=new Dn(e.name),this._addComponent(new kn("app",(function(){return o}),"PUBLIC"));try{for(var a=ze(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Qn.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Bn.create("app-deleted",{appName:this.name_})},t}();Gn.prototype.name&&Gn.prototype.options||Gn.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Kn(t){var e={},n=new Map,i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={});if("object"!=typeof r||null===r){r={name:r}}var o=r;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw Bn.create("bad-app-name",{appName:String(a)});if(mn(e,a))throw Bn.create("duplicate-app",{appName:a});var s=new t(n,o,i);return e[a]=s,s},app:r,registerVersion:function(t,e,n){var i,r=null!==(i=zn[t])&&void 0!==i?i:t;n&&(r+="-"+n);var a=r.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+r+'" with version "'+e+'":'];return a&&u.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Qn.warn(u.join(" "))}o(new kn(r+"-version",(function(){return{library:r,version:e}}),"VERSION"))},setLogLevel:Wn,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Bn.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var i=null;e&&e.level&&(i=Fn[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=r.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:xn[n].toLowerCase(),message:a,args:r,type:e.name})}},i=0,r=Mn;i<r.length;i++){n(r[i])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function r(t){if(!mn(e,t=t||"[DEFAULT]"))throw Bn.create("no-app",{appName:t});return e[t]}function o(o){var a,s,u=o.name;if(n.has(u))return Qn.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?i[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var h=function(t){if(void 0===t&&(t=r()),"function"!=typeof t[u])throw Bn.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&rn(h,o.serviceProps),i[u]=h,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var l=ze(Object.keys(e)),c=l.next();!c.done;c=l.next()){var d=c.value;e[d]._addComponent(o)}}catch(t){a={error:t}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return"PUBLIC"===o.type?i[u]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),r.App=t,i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n=function t(){var e=Kn(Gn);return e.INTERNAL=Ye(Ye({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){rn(e,t)},createSubscribe:wn,ErrorFactory:ln,deepExtend:rn}),e}(),Xn=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Qn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Jn=self.firebase.SDK_VERSION;Jn&&Jn.indexOf("LITE")>=0&&Qn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Zn=$n.initializeApp;$n.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return sn()&&Qn.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Zn.apply(void 0,t)};var ti=$n;!function(t,e){t.INTERNAL.registerComponent(new kn("platform-logger",(function(t){return new Xn(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.11",e),t.registerVersion("fire-js","")}(ti);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ti.registerVersion("firebase","7.21.1","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function r(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,i){if(i){var r=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(i=i(o=r[t=t[t.length-1]]))!=o&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function i(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;i.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;i.prototype.c=function(t){a(t,0)},i.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},i.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new i;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(t){o(t)}}:e}var r,o,a=new e((function(t,e){r=t,o=e}));return this.Oa(i(t,r),i(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(i.b){case 1:t(i.c);break;case 2:e(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=r(t),a=i.next();!a.done;a=i.next())o(a.value).Oa(e,n)}))},e.all=function(t){var n=r(t),i=n.next();return i.done?o([]):new e((function(t,e){function r(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(i.value).Oa(r(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function h(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function c(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==l(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),_=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function g(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t,e,n){this.code=S+t,this.message=e||I[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new E(e.substring(S.length),t.message,t.serverResponse):null}w(E,Error),E.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.v()};var T,S="auth/",I={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function k(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function A(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");O.call(this,n+t[i])}function D(t,e){throw new A("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function R(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}T=N("__EID__")?"__EID__":void 0,w(O,Error),O.prototype.name="CustomError",w(A,O),A.prototype.name="AssertionError",R.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var L=new R((function(){return new U}),(function(t){t.reset()}));function F(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};var V=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=[],r=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(i[r++]=s)}return i},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},Y=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function q(t,e){return 0<=j(t,e)}function B(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function z(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(t,(function(n,i){e.call(void 0,n,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}var K,$=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,J=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,it=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:t>e?1:0}t:{var at=a.navigator;if(at){var st=at.userAgent;if(st){K=st;break t}}K=""}function ut(t){return rt(K,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pt(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,i=n&&(n.defaultView||n.parentWindow);if((i=i||a).Element&&i.Location){var r=i;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===vt&&e||"",this.b=yt}function mt(t){return t instanceof _t&&t.constructor===_t&&t.b===yt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ra=!0,_t.prototype.qa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var yt={},vt={},gt=new _t(vt,"");function bt(t,e){this.a=t===It&&e||"",this.b=St}function wt(t){return t instanceof bt&&t.constructor===bt&&t.b===St?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=mt(t);if(!Tt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Ct,(function(t,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[i])instanceof _t?mt(t):encodeURIComponent(String(t))})),new bt(It,t)}bt.prototype.ra=!0,bt.prototype.qa=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={},It={};function Pt(t,e){this.a=t===Dt&&e||"",this.b=At}function Nt(t){return t instanceof Pt&&t.constructor===Pt&&t.b===At?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Pt.prototype.ra=!0,Pt.prototype.qa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ot(t){return t instanceof Pt?t:(t="object"==typeof t&&t.ra?t.qa():String(t),kt.test(t)||(t="about:invalid#zClosurez"),new Pt(Dt,t))}var At={},Dt={};function Rt(){this.a="",this.b=Mt}function xt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Mt?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Lt(t){var e=new Rt;return e.a=t,e}Lt("<!DOCTYPE html>");var Ft=Lt("");function Ut(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function jt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(J,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Z,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(et,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Lt("<br>"),Ht[" "]=h;var Vt,Wt,Yt=ut("Opera"),qt=ut("Trident")||ut("MSIE"),Bt=ut("Edge"),zt=Bt||qt,Qt=ut("Gecko")&&!(rt(K.toLowerCase(),"webkit")&&!ut("Edge"))&&!(ut("Trident")||ut("MSIE"))&&!ut("Edge"),Gt=rt(K.toLowerCase(),"webkit")&&!ut("Edge");function Kt(){var t=a.document;return t?t.documentMode:void 0}t:{var $t="",Xt=(Wt=K,Qt?/rv:([^\);]+)(\)|;)/.exec(Wt):Bt?/Edge\/([\d\.]+)/.exec(Wt):qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Gt?/WebKit\/(\S+)/.exec(Wt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(Xt&&($t=Xt?Xt[1]:""),qt){var Jt=Kt();if(null!=Jt&&Jt>parseFloat($t)){Vt=String(Jt);break t}}Vt=$t}var Zt,te={};function ee(t){return function(t,e){var n=te;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=$(String(Vt)).split("."),i=$(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var a=n[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ot(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==a[2].length,0==s[2].length)||ot(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}Zt=a.document&&qt?Kt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var ne=!qt||9<=Number(Zt);function ie(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function re(t,e){ht(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:se.hasOwnProperty(n)?t.setAttribute(se[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var oe,ae,se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ue(t,e,n){function i(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var r=2;r<n.length;r++){var o=n[r];!c(o)||p(o)&&0<o.nodeType?i(o):H(le(o)?G(o):o,i)}}function he(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function le(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function ce(t){a.setTimeout((function(){throw t}),0)}function de(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ut("Presto")&&(t=function(){var t=he(document,"IFRAME");t.style.display="none",function(t){var e=new bt(It,mt(gt));ft(t,"HTMLIFrameElement"),t.src=wt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(xt(Ft)),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=v((function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!ut("Trident")&&!ut("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){i.next={Db:t},i=i.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}function pe(t,e){ae||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);ae=function(){t.then(me)}}else ae=function(){var t=me;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ut("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(oe||(oe=de()),oe(t)):a.setImmediate(t)}}(),fe||(ae(),fe=!0),_e.add(t,e)}var fe=!1,_e=new M;function me(){for(var t;t=F();){try{t.a.call(t.b)}catch(t){ce(t)}x(L,t)}fe=!1}function ye(t,e){if(this.a=ve,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Oe(n,ge,t)}),(function(t){if(!(t instanceof Fe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Oe(n,be,t)}))}catch(t){Oe(this,be,t)}}var ve=0,ge=2,be=3;function we(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}we.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new R((function(){return new we}),(function(t){t.reset()}));function Ce(t,e,n){var i=Ee.get();return i.g=t,i.b=e,i.f=n,i}function Te(t){if(t instanceof ye)return t;var e=new ye(h);return Oe(e,ge,t),e}function Se(t){return new ye((function(e,n){n(t)}))}function Ie(t,e,n){Ae(t,e,n,null)||pe(g(e,t))}function Pe(t){return new ye((function(e){var n=t.length,i=[];if(n)for(var r=function(t,r,o){n--,i[t]=r?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(i)},o=0;o<t.length;o++)Ie(t[o],g(r,o,!0),g(r,o,!1));else e(i)}))}function Ne(t,e){t.b||t.a!=ge&&t.a!=be||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function ke(t,e,n,i){var r=Ce(null,null,null);return r.a=new ye((function(t,o){r.g=e?function(n){try{var r=e.call(i,n);t(r)}catch(t){o(t)}}:t,r.b=n?function(e){try{var r=n.call(i,e);void 0===r&&e instanceof Fe?o(e):t(r)}catch(t){o(t)}}:o})),r.a.c=t,Ne(t,r),r.a}function Oe(t,e,n){t.a==ve&&(t===n&&(e=be,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ae(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=be||n instanceof Fe||function(t,e){t.g=!0,pe((function(){t.g&&Le.call(null,e)}))}(t,n)))}function Ae(t,e,n,i){if(t instanceof ye)return Ne(t,Ce(e||h,n||null,i)),!0;if(k(t))return t.then(e,n,i),!0;if(p(t))try{var r=t.then;if(d(r))return function(t,e,n,i,r){function o(t){a||(a=!0,i.call(r,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(r,t))}),o)}catch(t){o(t)}}(t,r,e,n,i),!0}catch(t){return n.call(i,t),!0}return!1}function De(t){t.h||(t.h=!0,pe(t.ec,t))}function Re(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function xe(t,e,n,i){if(n==be&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Me(e,n,i);else try{e.c?e.g.call(e.f):Me(e,n,i)}catch(t){Le.call(null,t)}x(Ee,e)}function Me(t,e,n){e==ge?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ye.prototype.then=function(t,e,n){return ke(this,d(t)?t:null,d(e)?e:null,n)},ye.prototype.$goog_Thenable=!0,(t=ye.prototype).ma=function(t,e){return(t=Ce(t,t,e)).c=!0,Ne(this,t),this},t.o=function(t,e){return ke(this,null,t,e)},t.cancel=function(t){if(this.a==ve){var e=new Fe(t);pe((function(){!function t(e,n){if(e.a==ve)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,s.a==e&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==ve&&1==r?t(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):Re(i),xe(i,o,be,n)))}e.c=null}else Oe(e,be,n)}(this,e)}),this)}},t.Yc=function(t){this.a=ve,Oe(this,ge,t)},t.Zc=function(t){this.a=ve,Oe(this,be,t)},t.ec=function(){for(var t;t=Re(this);)xe(this,t,this.a,this.i);this.h=!1};var Le=ce;function Fe(t){O.call(this,t)}function Ue(){this.wa=this.wa,this.na=this.na}w(Fe,O),Fe.prototype.name="cancel";function je(t){if(!t.wa&&(t.wa=!0,t.Ba(),0))(function(t){Object.prototype.hasOwnProperty.call(t,f)&&t[f]||(t[f]=++_)})(t)}Ue.prototype.wa=!1,Ue.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var He=Object.freeze||function(t){return t},Ve=!qt||9<=Number(Zt),We=qt&&!ee("9"),Ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{Ht(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ze[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Be,qe);var ze=He({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,We)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Be.prototype.f=function(){return this.a};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Ke(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Ta=r,this.key=++Ge,this.ua=this.Na=!1}function $e(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Xe(t){this.src=t,this.a={},this.b=0}function Je(t,e){var n=e.type;n in t.a&&B(t.a[n],e)&&($e(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ze(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==i)return r}return-1}Xe.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Ze(t,e,i,r);return-1<a?(e=t[a],n||(e.Na=!1)):((e=new Ke(e,this.src,o,!!i,r)).Na=n,t.push(e)),e};var tn="closure_lm_"+(1e6*Math.random()|0),en={};function nn(t,e,n,i,r){if(i&&i.once)on(t,e,n,i,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,i,r);else n=fn(n),t&&t[Qe]?mn(t,e,n,p(i)?!!i.capture:!!i,r):rn(t,e,n,!1,i,r)}function rn(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=p(r)?!!r.capture:!!r,s=dn(t);if(s||(t[tn]=s=new Xe(t)),!(n=s.add(e,n,i,a,o)).proxy)if(i=function(){var t=cn,e=Ve?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Ye||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(un(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}}function on(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,i,r);else n=fn(n),t&&t[Qe]?yn(t,e,n,p(i)?!!i.capture:!!i,r):rn(t,e,n,!0,i,r)}function an(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,i,r);else i=p(i)?!!i.capture:!!i,n=fn(n),t&&t[Qe]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=Ze(o=t.a[e],n,i,r))&&($e(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=dn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ze(e,n,i,r)),(n=-1<t?e[t]:null)&&sn(n))}function sn(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Qe])Je(e.u,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(un(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=dn(e))?(Je(n,t),0==n.b&&(n.src=null,e[tn]=null)):$e(t)}}}function un(t){return t in en?en[t]:en[t]="on"+t}function hn(t,e,n,i){var r=!0;if((t=dn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=ln(o,i),r=r&&!1!==o)}return r}function ln(t,e){var n=t.listener,i=t.Ta||t.src;return t.Na&&sn(t),n.call(i,e)}function cn(t,e){if(t.ua)return!0;if(!Ve){if(!e)t:{e=["window","event"];for(var n=a,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new Be(i=e,this),n=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=hn(i[r],t,!0,e);n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=hn(i[r],t,!1,e),n=n&&o}return n}return ln(t,new Be(e,this))}function dn(t){return(t=t[tn])instanceof Xe?t:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(t){return d(t)?t:(t[pn]||(t[pn]=function(e){return t.handleEvent(e)}),t[pn])}function _n(){Ue.call(this),this.u=new Xe(this),this.Yb=this,this.eb=null}function mn(t,e,n,i,r){t.u.add(String(e),n,!1,i,r)}function yn(t,e,n,i,r){t.u.add(String(e),n,!0,i,r)}function vn(t,e,n,i){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ua&&a.capture==n){var s=a.listener,u=a.Ta||a.src;a.Na&&Je(t.u,a),r=!1!==s.call(u,i)&&r}}return r&&!i.defaultPrevented}function gn(t,e,n){if(d(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function bn(t){var e=null;return new ye((function(n,i){-1==(e=gn((function(){n(void 0)}),t))&&i(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function wn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(c(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function En(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(c(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function Cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Cn)for(n=t.X(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Sn(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)Sn(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function Sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(_n,Ue),_n.prototype[Qe]=!0,_n.prototype.addEventListener=function(t,e,n,i){nn(this,t,e,n,i)},_n.prototype.removeEventListener=function(t,e,n,i){an(this,t,e,n,i)},_n.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var i=t.type||t;if("string"==typeof t)t=new qe(t,n);else if(t instanceof qe)t.target=t.target||n;else{var r=t;pt(t=new qe(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];r=vn(a,i,!0,t)&&r}if(r=vn(a=t.b=n,i,!0,t)&&r,r=vn(a,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=vn(a=t.b=e[o],i,!1,t)&&r;return r},_n.prototype.Ba=function(){if(_n.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)$e(n[i]);delete e.a[t],e.b--}}this.eb=null},(t=Cn.prototype).V=function(){Tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Tn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Sn(this.b,t)?this.b[t]:e},t.set=function(t,e){Sn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Pn?(this.h=void 0!==e?e:t.h,Nn(this,t.f),this.i=t.i,this.b=t.b,kn(this,t.l),this.c=t.c,On(this,Kn(t.a)),this.g=t.g):t&&(n=String(t).match(In))?(this.h=!!e,Nn(this,n[1]||"",!0),this.i=Mn(n[2]||""),this.b=Mn(n[3]||"",!0),kn(this,n[4]),this.c=Mn(n[5]||"",!0),On(this,n[6]||"",!0),this.g=Mn(n[7]||"")):(this.h=!!e,this.a=new Yn(null,this.h))}function Nn(t,e,n){t.f=n?Mn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function kn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function On(t,e,n){e instanceof Yn?(t.a=e,function(t,e){e&&!t.f&&(qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(zn(this,e),Gn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Ln(e,Vn)),t.a=new Yn(e,t.h))}function An(t,e,n){t.a.set(e,n)}function Dn(t,e){return t.a.get(e)}function Rn(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function xn(t,e){var n=new Pn(null,void 0);return Nn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Mn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Fn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Fn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ln(e,Un,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(Ln(e,Un,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ln(n,"/"==n.charAt(0)?Hn:jn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ln(n,Wn)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.f;n?Nn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var i=t.c;if(n)kn(e,t.l);else if(n=!!t.c){if("/"!=i.charAt(0))if(this.b&&!this.c)i="/"+i;else{var r=e.c.lastIndexOf("/");-1!=r&&(i=e.c.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(rt(r,"./")||rt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.a.toString(),n?On(e,Kn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Un=/[#\/\?@]/g,jn=/[#\?:]/g,Hn=/[#\?]/g,Vn=/[#\?@]/g,Wn=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(t){t.a||(t.a=new Cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Bn(t){var e=En(t);if(void 0===e)throw Error("Keys are undefined");var n=new Yn(null,void 0);t=wn(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];Array.isArray(o)?Gn(n,r,o):n.add(r,o)}return n}function zn(t,e){qn(t),e=$n(t,e),Sn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Sn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Tn(t)))}function Qn(t,e){return qn(t),e=$n(t,e),Sn(t.a.b,e)}function Gn(t,e,n){zn(t,e),0<n.length&&(t.c=null,t.a.set($n(t,e),G(n)),t.b+=n.length)}function Kn(t){var e=new Yn;return e.c=t.c,t.a&&(e.a=new Cn(t.a),e.b=t.b),e}function $n(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Xn(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),t(e,r[a],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&("function"!=typeof(a=n[r])&&(i.push(o),ni(r,i),i.push(":"),t(e,a,i),o=","));return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":ni(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Jn,t,e),e.join("")}function Jn(){}(t=Yn.prototype).add=function(t,e){qn(this),this.c=null,t=$n(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){qn(this),this.a.forEach((function(n,i){H(n,(function(n){t.call(e,n,i,this)}),this)}),this)},t.X=function(){qn(this);for(var t=this.a.V(),e=this.a.X(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.V=function(t){qn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=Q(e,this.a.get($n(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Qn(this,t=$n(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.V(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}}return this.c=t.join("&")};var Zn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ei=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ni(t,e){e.push('"',t.replace(ei,(function(t){var e=Zn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Zn[t]=e),e})),'"')}function ii(){var t=Ei();return qt&&!!Zt&&11==Zt||/Edge\/\d+/.test(t)}function ri(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function oi(t,e){e=e||a.window;var n="about:blank";t&&(n=Nt(Ot(t))),e.location.href=n}function ai(t){return!!((t=(t||Ei()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function si(t){t=t||a.window;try{t.close()}catch(t){}}function ui(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ei().toLowerCase(),i&&(e.target=i,rt(n,"crios/")&&(e.target="_blank")),gi(Ei())==yi&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof Pt?n:Ot(void 0!==n.href?n.href:String(n)),n=t.target||n.target,r=[],t)switch(a){case"width":case"height":case"top":case"left":r.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(a+"="+(t[a]?1:0))}var a=r.join(",");if((ut("iPhone")&&!ut("iPod")&&!ut("iPad")||ut("iPad")||ut("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(ft(a=he(document,"A"),"HTMLAnchorElement"),e instanceof Pt||e instanceof Pt||(e="object"==typeof e&&e.ra?e.qa():String(e),kt.test(e)||(e="about:invalid#zClosurez"),e=new Pt(Dt,e)),a.href=Nt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=i.open("",n,a),t=Nt(e),a&&(zt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Lt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">'),i=a.document)&&(i.write(xt(t)),i.close())):(a=i.open(Nt(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var hi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,li=/^[^@]+@[^@]+$/;function ci(){var t=null;return new ye((function(e){"complete"==a.document.readyState?e():(t=function(){e()},on(window,"load",t))})).o((function(e){throw an(window,"load",t),e}))}function di(t){return t=t||Ei(),!("file:"!==Pi()&&"ionic:"!==Pi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function pi(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function fi(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _i(){return ti.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ti.INTERNAL.hasOwnProperty("node")?"Node":fi()?"Worker":"Browser"}function mi(){var t=_i();return"ReactNative"===t||"Node"===t}var yi="Firefox",vi="Chrome";function gi(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?yi:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":vi:"Safari"}var bi={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function wi(t,e){e=e||[];var n,i=[],r={};for(n in bi)r[bi[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=_i())?i=gi(r=Ei()):"Worker"===i&&(i=gi(r=Ei())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function Ei(){return a.navigator&&a.navigator.userAgent||""}function Ci(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ti(){try{var t=a.localStorage,e=Di();if(t)return t.setItem(e,"1"),t.removeItem(e),!ii()||!!a.indexedDB}catch(t){return fi()&&!!a.indexedDB}return!1}function Si(){return(Ii()||"chrome-extension:"===Pi()||di())&&!mi()&&Ti()&&!fi()}function Ii(){return"http:"===Pi()||"https:"===Pi()}function Pi(){return a.location&&a.location.protocol||null}function Ni(t){return!ai(t=t||Ei())&&gi(t)!=yi}function ki(t){return void 0===t?null:Xn(t)}function Oi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ai(t){if(null!==t)return JSON.parse(t)}function Di(t){return t||Math.floor(1e9*Math.random()).toString()}function Ri(t){return"Safari"!=gi(t=t||Ei())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function xi(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Mi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ei(),e=_i(),this.b=ai(t)||"ReactNative"===e}function Li(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Fi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Ui(){return!(!Ci("fireauth.oauthhelper",a)&&!Ci("fireauth.iframe",a))}Mi.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Ii()&&"chrome-extension:"!==Pi()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var ji,Hi={};function Vi(t){Hi[t]||(Hi[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wi={};Object.defineProperty(Wi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wi,"abcd",{configurable:!0,enumerable:!0,value:2}),ji=2==Wi.abcd}catch(Wt){ji=!1}function Yi(t,e,n){ji?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qi(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yi(t,n,e[n])}function Bi(t){var e={};return qi(e,t),e}function zi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yi(e,n,zi(t[n]));return e}function Qi(t){var e=t&&(t[Ji]?"phone":null);if(!(e&&t&&t[Xi]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Yi(this,"uid",t[Xi]),Yi(this,"displayName",t[Ki]||null);var n=null;t[$i]&&(n=new Date(t[$i]).toUTCString()),Yi(this,"enrollmentTime",n),Yi(this,"factorId",e)}function Gi(t){try{var e=new Zi(t)}catch(t){e=null}return e}Qi.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Ki="displayName",$i="enrolledAt",Xi="mfaEnrollmentId",Ji="phoneInfo";function Zi(t){Qi.call(this,t),Yi(this,"phoneNumber",t[Ji])}function tr(t){var e={},n=t[rr],i=t[ar],r=t[sr];if(t=Gi(t[or]),!r||r!=nr&&r!=ir&&!n||r==ir&&!i||r==er&&!t)throw Error("Invalid checkActionCode response!");r==ir?(e[hr]=n||null,e[cr]=n||null,e[ur]=i):(e[hr]=i||null,e[cr]=i||null,e[ur]=n||null),e[lr]=t||null,Yi(this,pr,r),Yi(this,dr,zi(e))}w(Zi,Qi),Zi.prototype.v=function(){var t=Zi.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var er="REVERT_SECOND_FACTOR_ADDITION",nr="EMAIL_SIGNIN",ir="VERIFY_AND_CHANGE_EMAIL",rr="email",or="mfaInfo",ar="newEmail",sr="requestType",ur="email",hr="fromEmail",lr="multiFactorInfo",cr="previousEmail",dr="data",pr="operation";function fr(t){var e=Dn(t=Rn(t),_r)||null,n=Dn(t,mr)||null,i=Dn(t,gr)||null;if(i=i&&wr[i]||null,!e||!n||!i)throw new E("argument-error",_r+", "+mr+"and "+gr+" are required in a valid action code URL.");qi(this,{apiKey:e,operation:i,code:n,continueUrl:Dn(t,yr)||null,languageCode:Dn(t,vr)||null,tenantId:Dn(t,br)||null})}var _r="apiKey",mr="oobCode",yr="continueUrl",vr="languageCode",gr="mode",br="tenantId",wr={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:er,signIn:nr,verifyAndChangeEmail:ir,verifyEmail:"VERIFY_EMAIL"};function Er(t){try{return new fr(t)}catch(t){return null}}function Cr(t){var e=t[Nr];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Tr];if(n&&"object"==typeof n){e=n[Ar];var i=n[kr];if(n=n[Or],"string"==typeof e&&e.length){if(this.a=e,void 0!==i&&"boolean"!=typeof i)throw new E("argument-error",kr+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Or+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",Ar+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Tr+" property must be a non null object when specified.");if(this.f=null,(e=t[Pr])&&"object"==typeof e){if("string"==typeof(e=e[Dr])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Dr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Pr+" property must be a non null object when specified.");if(void 0!==(e=t[Ir])&&"boolean"!=typeof e)throw new E("argument-error",Ir+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Sr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Sr+" property must be a non empty string when specified.");this.i=t||null}var Tr="android",Sr="dynamicLinkDomain",Ir="handleCodeInApp",Pr="iOS",Nr="url",kr="installApp",Or="minimumVersion",Ar="packageName",Dr="bundleId";function Rr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var xr=null;function Mr(t){var e="";return function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),r=xr[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!xr){xr={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var i=t.concat(e[n].split("")),r=0;r<i.length;r++){var o=i[r];void 0===xr[o]&&(xr[o]=r)}}}();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;e(r<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Lr(t){var e=Ur(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Fr(t){try{return new Lr(t)}catch(t){return null}}function Ur(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Mr(t))}catch(t){}return null}Lr.prototype.S=function(){return this.f},Lr.prototype.i=function(){return this.b},Lr.prototype.toString=function(){return this.g};var jr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hr=["client_id","response_type","scope","redirect_uri","state"],Vr={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Hr},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Hr},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Hr},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:jr},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Wr(t){for(var e in Vr)if(Vr[e].ea==t)return Vr[e];return null}function Yr(t){var e={};e["facebook.com"]=Gr,e["google.com"]=$r,e["github.com"]=Kr,e["twitter.com"]=Xr;var n=t&&t[Br];try{if(n)return e[n]?new e[n](t):new Qr(t);if(void 0!==t[qr])return new zr(t)}catch(t){}return null}var qr="idToken",Br="providerId";function zr(t){var e=t[Br];if(!e&&t[qr]){var n=Fr(t[qr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yi(this,"providerId",e),Yi(this,"isNewUser",n)}function Qr(t){zr.call(this,t),Yi(this,"profile",zi((t=Ai(t.rawUserInfo||"{}"))||{}))}function Gr(t){if(Qr.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Kr(t){if(Qr.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yi(this,"username",this.profile&&this.profile.login||null)}function $r(t){if(Qr.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Xr(t){if(Qr.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yi(this,"username",t.screenName||null)}function Jr(t){var e=Rn(t),n=Dn(e,"link"),i=Dn(Rn(n),"link");return e=Dn(e,"deep_link_id"),Dn(Rn(e),"link")||e||i||n||t}function Zr(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?to:eo}w(Qr,zr),w(Gr,Qr),w(Kr,Qr),w($r,Qr),w(Xr,Qr);var to="enroll",eo="signin";function no(){}function io(t,e){return t.then((function(t){if(t[Ba]){var n=Fr(t[Ba]);if(!n||e!=n.h)throw new E("user-mismatch");return t}throw new E("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==S+"user-not-found"?new E("user-mismatch"):t}))}function ro(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Yi(this,"providerId",t),Yi(this,"signInMethod",t)}function oo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ao(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ro(t.providerId,t.pendingToken)}catch(t){}return null}function so(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yi(this,"idToken",e.idToken),e.accessToken&&Yi(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yi(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Yi(this,"accessToken",e.oauthToken),Yi(this,"secret",e.oauthTokenSecret)}Yi(this,"providerId",t),Yi(this,"signInMethod",n)}function uo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function ho(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new so(t.providerId,e,t.signInMethod)}catch(t){}}return null}function lo(t,e){this.Oc=e||[],qi(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Wr(t)||{}).Ha||null,this.kb=null}function co(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');lo.call(this,t,[])}function po(t){lo.call(this,t,Hr),this.a=[]}function fo(){po.call(this,"facebook.com")}function _o(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function mo(){po.call(this,"github.com")}function yo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new mo).credential({accessToken:e})}function vo(){po.call(this,"google.com"),this.Aa("profile")}function go(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new vo).credential({idToken:n,accessToken:e})}function bo(){lo.call(this,"twitter.com",jr)}function wo(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new so("twitter.com",n,"twitter.com")}function Eo(t,e,n){this.a=t,this.f=e,Yi(this,"providerId","password"),Yi(this,"signInMethod",n===To.EMAIL_LINK_SIGN_IN_METHOD?To.EMAIL_LINK_SIGN_IN_METHOD:To.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new Eo(t.email,t.password,t.signInMethod):null}function To(){qi(this,{providerId:"password",isOAuthProvider:!1})}function So(t,e){if(!(e=Io(e)))throw new E("argument-error","Invalid email link!");return new Eo(t,e.code,To.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=Er(t=Jr(t)))&&t.operation===nr?t:null}function Po(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new E("internal-error");this.a=t,Yi(this,"providerId","phone"),this.ea="phone",Yi(this,"signInMethod","phone")}function No(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Po(e)}return null}function ko(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Oo(t){try{this.a=t||ti.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qi(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new Po({bb:t,ab:e})}function Do(t){if(t.temporaryProof&&t.phoneNumber)return new Po({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return go(o,n);case"facebook.com":return _o(n);case"github.com":return yo(n);case"twitter.com":return wo(n,i);default:return n||i||o||a?a?0==e.indexOf("saml.")?new ro(e,a):new so(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new po(e).credential({idToken:o,accessToken:n,rawNonce:r}):null}}catch(t){return null}}function Ro(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function xo(t,e,n,i,r,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=i||null,this.i=o||null,this.h=a||null,this.a=r||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Mo(t){return(t=t||{}).type?new xo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function Lo(){this.b=null,this.a=[]}Zr.prototype.Fa=function(){return this.a?Te(this.a):Te(this.b)},Zr.prototype.v=function(){return this.type==to?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},no.prototype.ia=function(){},no.prototype.b=function(){},no.prototype.c=function(){},no.prototype.v=function(){},ro.prototype.ia=function(t){return cs(t,oo(this))},ro.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,ds(t,n)},ro.prototype.c=function(t,e){return io(ps(t,oo(this)),e)},ro.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},so.prototype.ia=function(t){return cs(t,uo(this))},so.prototype.b=function(t,e){var n=uo(this);return n.idToken=e,ds(t,n)},so.prototype.c=function(t,e){return io(ps(t,uo(this)),e)},so.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},lo.prototype.Ia=function(t){return this.Fb=ct(t),this},w(co,lo),w(po,lo),po.prototype.Aa=function(t){return q(this.a,t)||this.a.push(t),this},po.prototype.Nb=function(){return G(this.a)},po.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new so(this.providerId,n,this.providerId)},w(fo,po),Yi(fo,"PROVIDER_ID","facebook.com"),Yi(fo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(mo,po),Yi(mo,"PROVIDER_ID","github.com"),Yi(mo,"GITHUB_SIGN_IN_METHOD","github.com"),w(vo,po),Yi(vo,"PROVIDER_ID","google.com"),Yi(vo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(bo,lo),Yi(bo,"PROVIDER_ID","twitter.com"),Yi(bo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Eo.prototype.ia=function(t){return this.signInMethod==To.EMAIL_LINK_SIGN_IN_METHOD?Gs(t,ws,{email:this.a,oobCode:this.f}):Gs(t,Ys,{email:this.a,password:this.f})},Eo.prototype.b=function(t,e){return this.signInMethod==To.EMAIL_LINK_SIGN_IN_METHOD?Gs(t,Es,{idToken:e,email:this.a,oobCode:this.f}):Gs(t,Ms,{idToken:e,email:this.a,password:this.f})},Eo.prototype.c=function(t,e){return io(this.ia(t),e)},Eo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qi(To,{PROVIDER_ID:"password"}),qi(To,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qi(To,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ia=function(t){return t.cb(ko(this))},Po.prototype.b=function(t,e){var n=ko(this);return n.idToken=e,Gs(t,Bs,n)},Po.prototype.c=function(t,e){var n=ko(this);return n.operation="REAUTH",io(t=Gs(t,zs,n),e)},Po.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Oo.prototype.cb=function(t,e){var n=this.a.b;return Te(e.verify()).then((function(i){if("string"!=typeof i)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var r=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(r&&r.type==to?r.Fa().then((function(t){return function(t,e){return Gs(t,Fs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i}})})):r&&r.type==eo?r.Fa().then((function(e){return function(t,e){return Gs(t,Us,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:i}})})):function(t,e){return Gs(t,Rs,e)}(n,{phoneNumber:o,recaptchaToken:i})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},qi(Oo,{PROVIDER_ID:"phone"}),qi(Oo,{PHONE_SIGN_IN_METHOD:"phone"}),xo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},xo.prototype.S=function(){return this.h},xo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Fo,Uo=null;function jo(t){var e="unauthorized-domain",n=void 0,i=Rn(t);t=i.b,"chrome-extension"==(i=i.f)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function Ho(t,e,n){E.call(this,t,n),(t=e||{}).Gb&&Yi(this,"email",t.Gb),t.da&&Yi(this,"phoneNumber",t.da),t.credential&&Yi(this,"credential",t.credential),t.Wb&&Yi(this,"tenantId",t.Wb)}function Vo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:Do(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Wo(){}function Yo(t){return t.c||(t.c=t.b())}function qo(){}function Bo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function zo(){}function Qo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=v(this.oc,this),this.a.onerror=v(this.Pb,this),this.a.onprogress=v(this.pc,this),this.a.ontimeout=v(this.tc,this)}function Go(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ko(t,e,n){this.reset(t,e,n,void 0,void 0)}function $o(t){this.f=t,this.b=this.c=this.a=null}function Xo(t,e){this.name=t,this.value=e}w(jo,E),w(Ho,E),Ho.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&pt(t,e),t},Ho.prototype.toJSON=function(){return this.v()},Wo.prototype.c=null,w(qo,Wo),qo.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},Fo=new qo,w(zo,Wo),zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Qo;throw Error("Unsupported browser")},zo.prototype.b=function(){return{}},(t=Qo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Go(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Go(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Go(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ko.prototype.a=null,Ko.prototype.reset=function(t,e,n,i,r){delete this.a},Xo.prototype.toString=function(){return this.name};var Jo=new Xo("SEVERE",1e3),Zo=new Xo("WARNING",900),ta=new Xo("CONFIG",700),ea=new Xo("FINE",500);$o.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(D("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Ko(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var na={},ia=null;function ra(t){var e;if(ia||(ia=new $o(""),na[""]=ia,ia.c=ta),!(e=na[t])){e=new $o(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=ra(t.substr(0,n))).b||(n.b={}),n.b[i]=e,e.a=n,na[t]=e}return e}function oa(t,e){t&&t.log(ea,e,void 0)}function aa(t){this.f=t}function sa(t){_n.call(this),this.s=t,this.readyState=ua,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ra("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}w(aa,Wo),aa.prototype.a=function(){return new sa(this.f)},aa.prototype.b=function(t){return function(){return t}}({}),w(sa,_n);var ua=0;function ha(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function la(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ca(t)}function ca(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function da(t){_n.call(this),this.headers=new Cn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=pa,this.w=this.R=!1}(t=sa.prototype).open=function(t,e){if(this.readyState!=ua)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ca(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,la(this,!1)),this.readyState=ua},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ca(this)),this.a&&(this.readyState=3,ca(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ha(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?la(this,!0):ca(this),3==this.readyState&&ha(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,la(this,!0))},t.qc=function(t){this.a&&(this.response=t,la(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Zo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&la(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Zo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Zo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},w(da,_n);var pa="";da.prototype.b=ra("goog.net.XhrIo");var fa=/^https?$/i,_a=["POST","PUT"];function ma(t,e,n,i,r){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Fo.a(),t.B=t.D?Yo(t.D):Yo(Fo),t.a.onreadystatechange=v(t.Sb,t);try{oa(t.b,Sa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return oa(t.b,Sa(t,"Error opening Xhr: "+e.message)),void va(t,e)}e=i||"";var o=new Cn(t.headers);r&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(c(t)||"string"==typeof t)H(t,e,void 0);else for(var n=En(t),i=wn(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=ya,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.X()),i=a.FormData&&e instanceof a.FormData,!q(_a,n)||r||i||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Ea(t),0<t.g&&(t.w=function(t){return qt&&ee(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),oa(t.b,Sa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=v(t.Ka,t)):t.s=gn(t.Ka,t.g,t)),oa(t.b,Sa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){oa(t.b,Sa(t,"Send error: "+e.message)),va(t,e)}}function ya(t){return"content-type"==t.toLowerCase()}function va(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ga(t),wa(t)}function ga(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ba(t){if(t.c&&void 0!==o)if(t.B[1]&&4==Ca(t)&&2==Ta(t))oa(t.b,Sa(t,"Local request error detected and ignored"));else if(t.i&&4==Ca(t))gn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ca(t)){oa(t.b,Sa(t,"Request complete")),t.c=!1;try{var e,n=Ta(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var s=String(t.l).match(In)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}r=!fa.test(s?s.toLowerCase():"")}e=r}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var h=2<Ca(t)?t.a.statusText:""}catch(e){oa(t.b,"Can not get status: "+e.message),h=""}t.h=h+" ["+Ta(t)+"]",ga(t)}}finally{wa(t)}}}function wa(t,e){if(t.a){Ea(t);var n=t.a,i=t.B[0]?h:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(e){(t=t.b)&&t.log(Jo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ea(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Ca(t){return t.a?t.a.readyState:0}function Ta(t){try{return 2<Ca(t)?t.a.status:-1}catch(t){return-1}}function Sa(t,e){return e+" ["+t.P+" "+t.l+" "+Ta(t)+"]"}function Ia(t){var e=Fa;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Pa(t,e,n){t.a=!0,t.c=n,t.f=!e,Aa(t)}function Na(t){if(t.a){if(!t.u)throw new Da(t);t.u=!1}}function ka(t,e,n,i){t.g.push([e,n,i]),t.a&&Aa(t)}function Oa(t){return Y(t.g,(function(t){return d(t[1])}))}function Aa(t){if(t.h&&t.a&&Oa(t)){var e=t.h,n=Ma[e];n&&(a.clearTimeout(n.a),delete Ma[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var i=n=!1;t.g.length&&!t.i;){var r=t.g.shift(),o=r[0],s=r[1];if(r=r[2],o=t.f?s:o)try{var u=o.call(r||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(k(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(i=!0,t.i=!0)}catch(i){e=i,t.f=!0,Oa(t)||(n=!0)}}t.c=e,i&&(u=v(t.m,t,!0),i=v(t.m,t,!1),e instanceof Ia?(ka(e,u,i),e.B=!0):e.then(u,i)),n&&(e=new xa(e),Ma[e.a]=e,t.h=e.a)}function Da(){O.call(this)}function Ra(){O.call(this)}function xa(t){this.a=a.setTimeout(v(this.c,this),0),this.b=t}(t=da.prototype).Ka=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",oa(this.b,Sa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(oa(this.b,Sa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),wa(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),wa(this,!0)),da.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ba(this):this.Hc())},t.Hc=function(){ba(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case pa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Jo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return oa(this.b,"Can not get response: "+t.message),null}},Ia.prototype.cancel=function(t){if(this.a)this.c instanceof Ia&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ra(this),Na(this),Pa(this,!1,t))}},Ia.prototype.m=function(t,e){this.i=!1,Pa(this,t,e)},Ia.prototype.then=function(t,e,n){var i,r,o=new ye((function(t,e){i=t,r=e}));return ka(this,i,(function(t){t instanceof Ra?o.cancel():r(t)})),o.then(t,e,n)},Ia.prototype.$goog_Thenable=!0,w(Da,O),Da.prototype.message="Deferred has already fired",Da.prototype.name="AlreadyCalledError",w(Ra,O),Ra.prototype.message="Deferred was canceled",Ra.prototype.name="CanceledError",xa.prototype.c=function(){throw delete Ma[this.a],this.b};var Ma={};function La(t){var e,n=document,i=wt(t).toString(),r=he(document,"SCRIPT"),o={Tb:r,Ka:void 0},h=new Ia(o);return e=window.setTimeout((function(){Ua(r,!0);var t=new Va(Ha,"Timeout reached for loading script "+i);Na(h),Pa(h,!1,t)}),5e3),o.Ka=e,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ua(r,!1,e),Na(h),Pa(h,!0,null))},r.onerror=function(){Ua(r,!0,e);var t=new Va(ja,"Error while loading script "+i);Na(h),Pa(h,!1,t)},pt(o={},{type:"text/javascript",charset:"UTF-8"}),re(r,o),function(t,e){ft(t,"HTMLScriptElement"),t.src=wt(e),null===u&&(u=(e=(e=a.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&s.test(e)?e:""),(e=u)&&t.setAttribute("nonce",e)}(r,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(r),h}function Fa(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Ua(t,!0,this.Ka)}}function Ua(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var ja=0,Ha=1;function Va(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Wa(t){this.f=t}function Ya(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||za,this.g=ct(t.secureTokenHeaders||Qa),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ga,this.a=ct(t.firebaseHeaders||Ka),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_i(),!(n=a.XMLHttpRequest||n&&ti.INTERNAL.node&&ti.INTERNAL.node.XMLHttpRequest)&&!fi())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,fi()?this.f=new aa(self):mi()?this.f=new Wa(n):this.f=new zo,this.b=null}w(Va,O),w(Wa,Wo),Wa.prototype.a=function(){return new this.f},Wa.prototype.b=function(){return{}};var qa,Ba="idToken",za=new Mi(3e4,6e4),Qa={"Content-Type":"application/x-www-form-urlencoded"},Ga=new Mi(3e4,6e4),Ka={"Content-Type":"application/json"};function $a(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Xa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ja(t,e,n,i,r,o,s){(function(){var t=Ei();return!((t=gi(t)!=vi?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!qt||!Zt||9<Zt)})()||fi()?t=v(t.w,t):(qa||(qa=new ye((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[ts]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ka(t,null,e,void 0)}(La(Et(Za,{onload:ts})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=v(t.s,t)),t(e,n,i,r,o,s)}Ya.prototype.S=function(){return this.b},Ya.prototype.w=function(t,e,n,i,r,o){if(fi()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new da(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}mn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return oa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),yn(s,"ready",(function(){u&&clearTimeout(u),je(this)})),yn(s,"timeout",(function(){u&&clearTimeout(u),je(this),e&&e(null)})),ma(s,t,n,i,r)};var Za=new _t(vt,"https://apis.google.com/js/client.js?onload=%{onload}"),ts="__fcb"+Math.floor(1e6*Math.random()).toString();function es(t,e,n,i,r,o,a){var s=Rn(e+n);An(s,"key",t.c),a&&An(s,"cb",b().toString());var u="GET"==i;if(u)for(var h in r)r.hasOwnProperty(h)&&An(s,h,r[h]);return new ye((function(e,n){Ja(t,s.toString(),(function(t){t?t.error?n($s(t,o||{})):e(t):n(new E("network-request-failed"))}),i,u?void 0:Xn(Oi(r)),t.a,t.i.get())}))}function ns(t){if("string"!=typeof(t=t.email)||!li.test(t))throw new E("invalid-email")}function is(t){"email"in t&&ns(t)}function rs(t){if(!t[Ba]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ct(t));throw new E("internal-error")}}function os(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Ya.prototype.s=function(t,e,n,i,r){var o=this;qa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:i,headers:r,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.vb=function(){return Gs(this,Ls,{})},Ya.prototype.xb=function(t,e){return Gs(this,xs,{idToken:t,email:e})},Ya.prototype.yb=function(t,e){return Gs(this,Ms,{idToken:t,password:e})};var as={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ss(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function us(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function hs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Qn(t=new Yn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ls(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Vo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Vo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Vo(t)):t.errorMessage&&(e=Ks(t.errorMessage)),e)throw e;rs(t)}function cs(t,e){return e.returnIdpCredential=!0,Gs(t,js,e)}function ds(t,e){return e.returnIdpCredential=!0,Gs(t,Vs,e)}function ps(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Gs(t,Hs,e)}function fs(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Ya.prototype).zb=function(t,e){var n={idToken:t},i=[];return ht(as,(function(t,r){var o=e[r];null===o?i.push(t):r in e&&(n[r]=o)})),i.length&&(n.deleteAttribute=i),Gs(this,xs,n)},t.rb=function(t,e){return pt(t={requestType:"PASSWORD_RESET",email:t},e),Gs(this,ks,t)},t.sb=function(t,e){return pt(t={requestType:"EMAIL_SIGNIN",email:t},e),Gs(this,Is,t)},t.qb=function(t,e){return pt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Gs(this,Ps,t)},t.Ab=function(t,e,n){return pt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Gs(this,Ns,t)},t.cb=function(t){return Gs(this,qs,t)},t.jb=function(t,e){return Gs(this,Ds,{oobCode:t,newPassword:e})},t.Pa=function(t){return Gs(this,ms,{oobCode:t})},t.fb=function(t){return Gs(this,_s,{oobCode:t})};var _s={endpoint:"setAccountInfo",A:fs,Y:"email",C:!0},ms={endpoint:"resetPassword",A:fs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},C:!0},ys={endpoint:"signupNewUser",A:function(t){if(ns(t),!t.password)throw new E("weak-password")},G:rs,U:!0,C:!0},vs={endpoint:"createAuthUri",C:!0},gs={endpoint:"deleteAccount",M:["idToken"]},bs={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=l(t.deleteProvider))throw new E("internal-error")}},ws={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ns,G:rs,U:!0,C:!0},Es={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ns,G:rs,U:!0},Cs={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ss,G:rs,C:!0,La:!0},Ts={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ss,G:rs,C:!0,La:!0},Ss={endpoint:"getAccountInfo"},Is={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");ns(t)},Y:"email",C:!0},Ps={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},Ns={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},ks={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");ns(t)},Y:"email",C:!0},Os={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},As={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Ds={endpoint:"resetPassword",A:fs,Y:"email",C:!0},Rs={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},xs={endpoint:"setAccountInfo",M:["idToken"],A:is,U:!0},Ms={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(is(t),!t.password)throw new E("weak-password")},G:rs,U:!0},Ls={endpoint:"signupNewUser",G:rs,U:!0,C:!0},Fs={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},Us={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},js={endpoint:"verifyAssertion",A:us,Wa:hs,G:ls,U:!0,C:!0},Hs={endpoint:"verifyAssertion",A:us,Wa:hs,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw Ks(t.errorMessage);rs(t)},U:!0,C:!0},Vs={endpoint:"verifyAssertion",A:function(t){if(us(t),!t.idToken)throw new E("internal-error")},Wa:hs,G:ls,U:!0},Ws={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:rs,U:!0,C:!0},Ys={endpoint:"verifyPassword",A:function(t){if(ns(t),!t.password)throw new E("wrong-password")},G:rs,U:!0,C:!0},qs={endpoint:"verifyPhoneNumber",A:os,G:rs,C:!0},Bs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");os(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Vo(t);rs(t)}},zs={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:os,G:rs,C:!0},Qs={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ba]^!!t.refreshToken)throw new E("internal-error")},C:!0,La:!0};function Gs(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return!1}return!0}(n,e.M))return Se(new E("internal-error"));var i,r=!!e.La,o=e.Rb||"POST";return Te(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),es(t,r?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return i=t,e.Wa?e.Wa(n,i):i})).then(e.G).then((function(){if(!e.Y)return i;if(!(e.Y in i))throw new E("internal-error");return i[e.Y]}))}function Ks(t){return $s({error:{errors:[{message:t}],code:400,message:t}})}function $s(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new E(i[n]):null)return n;for(var r in n=t.error&&t.error.message||"",pt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new E(i[r],e);return!e&&t&&(e=ki(t)),new E("internal-error",e)}function Xs(t){this.b=t,this.a=null,this.nb=function(t){return(eu||(eu=new ye((function(t,e){function n(){xi(),Ci("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){xi(),e(Error("Network Error"))},timeout:Zs.get()})}if(Ci("gapi.iframes.Iframe"))t();else if(Ci("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[i]=function(){Ci("gapi.load")?n():e(Error("Network Error"))},Te(La(i=Et(Js,{onload:i}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw eu=null,t})))).then((function(){return new ye((function(e,n){Ci("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ci("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(i){function r(){clearTimeout(o),e()}t.a=i,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),tu.get());i.ping(r).then(r,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Js=new _t(vt,"https://apis.google.com/js/api.js?onload=%{onload}"),Zs=new Mi(3e4,6e4),tu=new Mi(5e3,15e3),eu=null;function nu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=xn(this.i,"/__/auth/iframe"),An(this.a,"apiKey",this.g),An(this.a,"appName",this.h),this.b=null,this.c=[]}function iu(t,e,n,i,r){this.s=t,this.m=e,this.c=n,this.u=i,this.i=this.g=this.l=null,this.a=r,this.h=this.f=null}function ru(t){try{return ti.app(t).auth().Ea()}catch(t){return[]}}function ou(t,e,n,i,r){this.u=t,this.f=e,this.b=n,this.c=i||null,this.h=r||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function au(t){var e=ri();return function(t){return Gs(t,Os,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Rn(e),i=n.f;n=n.b;for(var r=0;r<t.length;r++){var o=t[r],a=n,s=i;if(0==o.indexOf("chrome-extension://")?a=Rn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:hi.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new jo(ri())}))}function su(t){return t.l||(t.l=ci().then((function(){if(!t.s){var e=t.c,n=t.h,i=ru(t.b),r=new nu(t.u,t.f,t.b);r.f=e,r.b=n,r.c=G(i||[]),t.s=r.toString()}t.i=new Xs(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then((function(){t.a.register("authEvent",e,Ci("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var i=!1;for(e=Mo(e.authEvent),n=0;n<t.g.length;n++)i=t.g[n](e)||i;return(n={}).status=i?"ACK":"ERROR",Te(n)}return n.status="ERROR",Te(n)}))}(t)}))),t.l}function uu(t){return t.m||(t.w=t.c?wi(t.c,ru(t.b)):null,t.m=new Ya(t.f,N(t.h),t.w)),t.m}function hu(t,e,n,i,r,o,a,s,u,h,l){return(t=new iu(t,e,n,i,r)).l=o,t.g=a,t.i=s,t.b=ct(u||null),t.f=h,t.ub(l).toString()}function lu(t){if(this.a=t||ti.INTERNAL.reactNative&&ti.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function cu(t){this.b=t,this.a={},this.f=v(this.c,this)}nu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):zn(this.a.a,"v"),this.b?An(this.a,"eid",this.b):zn(this.a.a,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):zn(this.a.a,"fw"),this.a.toString()},iu.prototype.ub=function(t){return this.h=t,this},iu.prototype.toString=function(){var t=xn(this.s,"/__/auth/handler");if(An(t,"apiKey",this.m),An(t,"appName",this.c),An(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=ti.app(this.c).auth().ja()}catch(t){n=null}for(var i in e.kb=n,An(t,"providerId",this.a.providerId),n=Oi((e=this.a).Fb))n[i]=n[i].toString();i=e.Oc,n=ct(n);for(var r=0;r<i.length;r++){var o=i[r];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),lt(n)||An(t,"customParameters",ki(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&An(t,"scopes",e.join(","))),this.l?An(t,"redirectUrl",this.l):zn(t.a,"redirectUrl"),this.g?An(t,"eventId",this.g):zn(t.a,"eventId"),this.i?An(t,"v",this.i):zn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Dn(t,a)&&An(t,a,this.b[a]);return this.h?An(t,"tid",this.h):zn(t.a,"tid"),this.f?An(t,"eid",this.f):zn(t.a,"eid"),(a=ru(this.c)).length&&An(t,"fw",a.join(",")),t.toString()},(t=ou.prototype).Lb=function(t,e,n){var i=new E("popup-closed-by-user"),r=new E("web-storage-unsupported"),o=this,a=!1;return this.ka().then((function(){(function(t){var e={type:"webStorageSupport"};return su(t).then((function(){return function(t,e){return t.nb.then((function(){return new ye((function(n){t.a.send(e.type,e,n,Ci("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&si(t),e(r),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new ye((function(e){return function n(){bn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return bn(n).then((function(){e(i)}))}))},t.Ub=function(){var t=Ei();return!Ni(t)&&!Ri(t)},t.Qb=function(){return!1},t.Jb=function(t,e,n,i,r,o,a,s){if(!t)return Se(new E("popup-blocked"));if(a&&!Ni())return this.ka().o((function(e){si(t),r(e)})),i(),Te();this.a||(this.a=au(uu(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw si(t),r(e),e}));return i(),e})).then((function(){(Ro(n),a)||oi(hu(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Kb=function(t,e,n,i){this.a||(this.a=au(uu(this)));var r=this;return this.a.then((function(){Ro(e),oi(hu(r.u,r.f,r.b,t,e,ri(),n,r.c,void 0,r.h,i))})).o((function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t}))},t.ka=function(){var t=this;return su(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new E("network-request-failed")}))},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(t){z(this.g,(function(e){return e==t}))},(t=lu.prototype).get=function(t){return Te(this.a.getItem(t)).then((function(t){return t&&Ai(t)}))},t.set=function(t,e){return Te(this.a.setItem(t,ki(e)))},t.T=function(t){return Te(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var du,pu=[];function fu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function mu(t){this.c=t,this.b=!1,this.a=[]}function yu(t,e,n,i){var r,o,a,s,u=n||{},h=null;if(t.b)return Se(Error("connection_unavailable"));var l=i?800:50,c="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ye((function(n,i){c?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),c.port1.start(),a=setTimeout((function(){i(Error("unsupported_event"))}),l),h={messageChannel:c,onMessage:o=function(t){t.data.eventId===r&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){i(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):i(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),i(Error("invalid_response"))))}},t.a.push(h),c.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:r,data:u},[c.port2])):i(Error("connection_unavailable"))})).then((function(e){return vu(t,h),e})).o((function(e){throw vu(t,h),e}))}function vu(t,e){if(e){var n=e.messageChannel,i=e.onMessage;n&&(n.port1.removeEventListener("message",i),n.port1.close()),z(t.a,(function(t){return t==e}))}}function gu(){if(!Eu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=a.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;fi()&&self?(this.l=function(){var t=fi()?self:null;if(H(pu,(function(n){n.b==t&&(e=n)})),!e){var e=new cu(t);pu.push(e)}return e}(),fu(this.l,"keyChanged",(function(e,n){return Pu(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:q(e,n.key)}}))})),fu(this.l,"ping",(function(){return Te(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Te().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Te(null)}().then((function(e){(t.h=e)&&(t.g=new mu(new _u(e)),yu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function bu(t){return new ye((function(e,n){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(i):function(t){return new ye((function(e,n){var i=t.u.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){e()},i.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return bu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function wu(t){return t.m||(t.m=bu(t)),t.m}function Eu(){try{return!!a.indexedDB}catch(t){return!1}}function Cu(t){return t.objectStore("firebaseLocalStorage")}function Tu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Su(t){return new ye((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Iu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?yu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Te()}function Pu(t){return wu(t).then((function(t){var e=Cu(Tu(t,!1));return e.getAll?Su(e.getAll()):new ye((function(t,n){var i=[],r=e.openCursor();r.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e.continue()):t(i)},r.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},i=[];if(0==t.b){for(i=0;i<e.length;i++)n[e[i].fbase_key]=e[i].value;i=function t(e,n){var i,r=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?r.push(i):"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(t.c,n),t.c=n}return i}))}function Nu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ku(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Te().then((function(){if(Eu()){var t=Di(),i="__sak"+t;return du||(du=new gu),(n=du).set(i,t).then((function(){return n.get(i)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(i)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){H(e.a,(function(e){e(t)}))})),t}))}function Ou(){this.a={},this.type="inMemory"}function Au(){if(!function(){var t="Node"==_i();if(!(t=Du()||t&&ti.INTERNAL.node&&ti.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_i())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Du()||ti.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=a.localStorage,e=Di();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ru(){this.type="nullStorage"}function xu(){if(!function(){var t="Node"==_i();if(!(t=Mu()||t&&ti.INTERNAL.node&&ti.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_i())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Mu()||ti.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=a.sessionStorage,e=Di();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Lu(){var t={};t.Browser=ju,t.Node=Hu,t.ReactNative=Vu,t.Worker=Wu,this.a=t[_i()]}cu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,i=this.a[e];if(i&&0<i.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var r=[];H(i,(function(e){r.push(Te().then((function(){return e(t.origin,t.data.data)})))})),Pe(r).then((function(i){var r=[];H(i,(function(t){r.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(r,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:r})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},mu.prototype.close=function(){for(;0<this.a.length;)vu(this,this.a[0]);this.b=!0},(t=gu.prototype).set=function(t,e){var n,i=!1,r=this;return wu(this).then((function(e){return Su((e=Cu(Tu(n=e,!0))).get(t))})).then((function(o){var a=Cu(Tu(n,!0));return o?(o.value=e,Su(a.put(o))):(r.b++,i=!0,(o={}).fbase_key=t,o.value=e,Su(a.add(o)))})).then((function(){return r.c[t]=e,Iu(r,t)})).ma((function(){i&&r.b--}))},t.get=function(t){return wu(this).then((function(e){return Su(Cu(Tu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return wu(this).then((function(i){return e=!0,n.b++,Su(Cu(Tu(i,!0)).delete(t))})).then((function(){return delete n.c[t],Iu(n,t)})).ma((function(){e&&n.b--}))},t.ba=function(t){0==this.a.length&&function(t){Nu(t),function e(){t.f=setTimeout((function(){t.i=Pu(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ha=function(t){z(this.a,(function(e){return e==t})),0==this.a.length&&Nu(this)},(t=ku.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ba=function(t){this.a.push(t)},t.ha=function(t){z(this.a,(function(e){return e==t}))},(t=Ou.prototype).get=function(t){return Te(this.a[t])},t.set=function(t,e){return this.a[t]=e,Te()},t.T=function(t){return delete this.a[t],Te()},t.ba=function(){},t.ha=function(){},(t=Au.prototype).get=function(t){var e=this;return Te().then((function(){return Ai(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Te().then((function(){var i=ki(e);null===i?n.T(t):n.a.setItem(t,i)}))},t.T=function(t){var e=this;return Te().then((function(){e.a.removeItem(t)}))},t.ba=function(t){a.window&&nn(a.window,"storage",t)},t.ha=function(t){a.window&&an(a.window,"storage",t)},(t=Ru.prototype).get=function(){return Te(null)},t.set=function(){return Te()},t.T=function(){return Te()},t.ba=function(){},t.ha=function(){},(t=xu.prototype).get=function(t){var e=this;return Te().then((function(){return Ai(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Te().then((function(){var i=ki(e);null===i?n.T(t):n.a.setItem(t,i)}))},t.T=function(t){var e=this;return Te().then((function(){e.a.removeItem(t)}))},t.ba=function(){},t.ha=function(){};var Fu,Uu,ju={F:Au,$a:xu},Hu={F:Au,$a:xu},Vu={F:lu,$a:Ru},Wu={F:Au,$a:Ru},Yu={od:"local",NONE:"none",qd:"session"};function qu(){var t=!(Ri(Ei())||!pi()),e=Ni(),n=Ti();this.m=t,this.h=e,this.l=n,this.a={},Fu||(Fu=new Lu),t=Fu;try{this.g=!ii()&&Ui()||!a.indexedDB?new t.a.F:new ku(fi()?new Ou:new t.a.F)}catch(t){this.g=new Ou,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Ou}this.u=new Ou,this.f=v(this.Vb,this),this.b={}}function Bu(){return Uu||(Uu=new qu),Uu}function zu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Gu(t,e,n){return n=Qu(e,n),"local"==e.F&&(t.b[n]=null),zu(t,e.F).T(n)}function Ku(t){t.c&&(clearInterval(t.c),t.c=null)}function $u(t){this.a=t,this.b=Bu()}(t=qu.prototype).get=function(t,e){return zu(this,t.F).get(Qu(t,e))},t.set=function(t,e,n){var i=Qu(t,n),r=this,o=zu(this,t.F);return o.set(i,e).then((function(){return o.get(i)})).then((function(e){"local"==t.F&&(r.b[i]=e)}))},t.addListener=function(t,e,n){t=Qu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),lt(this.a)&&(zu(this,"local").ba(this.f),this.h||(ii()||!Ui())&&a.indexedDB||!this.l||function(t){Ku(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),i=t.b[e];n!=i&&(t.b[e]=n,n=new Be({type:"storage",key:e,target:window,oldValue:i,newValue:n,a:!0}),t.Vb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(z(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(zu(this,"local").ha(this.f),Ku(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=a.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?zu(this,"local").ha(this.f):Ku(this),this.m)if(n=a.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?a.localStorage.setItem(e,i):a.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.ib(e))},qt&&Zt&&10==Zt&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,v(this.ib,this))},t.ib=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var Xu,Ju={name:"authEvent",F:"local"};function Zu(){this.a=Bu()}function th(t,e){this.b=eh,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===Xu&&(Xu=a.Int32Array?new Int32Array(uh):uh),this.reset()}w(th,(function(){this.b=-1}));for(var eh=64,nh=eh-1,ih=[],rh=0;rh<nh;rh++)ih[rh]=0;var oh=Q(128,ih);function ah(t){for(var e=t.f,n=t.l,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;64>e;e++){r=0|n[e-15],i=0|n[e-2];var o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],h=0|t.a[4],l=0|t.a[5],c=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))|0)+((a=(a=h&l^~h&c)+(0|Xu[e])|0)+(0|n[e])|0)|0,o=c,c=l,l=h,h=u+a|0,u=s,s=r,r=i,i=a+d|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+h|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+c|0,t.a[7]=t.a[7]+o|0}function sh(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if("string"==typeof e)for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(ah(t),r=0);else{if(!c(e))throw Error("message must be string or array");for(;i<n;){var o=e[i++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[r++]=o,r==t.b&&(ah(t),r=0)}}t.c=r,t.g+=n}th.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):G(this.h)};var uh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hh(){th.call(this,8,lh)}w(hh,th);var lh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ch(t,e,n,i,r){this.u=t,this.i=e,this.l=n,this.m=i||null,this.s=r||null,this.h=e+":"+n,this.w=new Zu,this.g=new $u(this.h),this.f=null,this.b=[],this.a=this.c=null}function dh(t){return new E("invalid-cordova-configuration",t)}function ph(t){var e=new hh;sh(e,t),t=[];var n=8*e.g;56>e.c?sh(e,oh,56-e.c):sh(e,oh,e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(ah(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function fh(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function _h(t){return t.f||(t.f=t.ka().then((function(){return new ye((function(e){t.Ca((function n(i){return e(i),t.Qa(n),!1})),function(t){function e(e){i=!0,r&&r.cancel(),mh(t).then((function(i){var r=n;if(i&&e&&e.url){var o=null;-1!=(r=Jr(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ai(Dn(o=Rn(r),"firebaseError")||null))?C(o):null)?new xo(i.c,i.b,null,null,o,null,i.S()):new xo(i.c,i.b,r,i.f,null,null,i.S())),r=o||n}fh(t,r)}))}var n=new xo("unknown",null,null,null,new E("no-auth-event")),i=!1,r=bn(500).then((function(){return mh(t).then((function(){i||fh(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ci("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Uo||(Uo=new Lo),function(t){var e=Uo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ci("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function mh(t){var e=null;return function(t){return t.b.get(Ju,t.a).then((function(t){return Mo(t)}))}(t.g).then((function(n){return e=n,Gu((n=t.g).b,Ju,n.a)})).then((function(){return e}))}function yh(t){this.a=t,this.b=Bu()}(t=ch.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(di(void 0)?ci().then((function(){return new ye((function(t,e){var n=a.document,i=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(i),t()}),!1)}))})):Se(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ci("universalLinks.subscribe",a))throw dh("cordova-universal-links-plugin-fix is not installed");if(void 0===Ci("BuildInfo.packageName",a))throw dh("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ci("cordova.plugins.browsertab.openUrl",a))throw dh("cordova-plugin-browsertab is not installed");if("function"!=typeof Ci("cordova.InAppBrowser.open",a))throw dh("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")}))},t.Lb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Te()},t.Jb=function(){return Se(new E("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,i){if(this.c)return Se(new E("redirect-operation-pending"));var r=this,o=a.document,s=null,u=null,h=null,l=null;return this.c=Te().then((function(){return Ro(e),_h(r)})).then((function(){return function(t,e,n,i,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new xo(e,i,null,o,new E("no-auth-event"),null,r),u=Ci("BuildInfo.packageName",a);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var h=Ci("BuildInfo.displayName",a),l={};if(Ei().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Ei().toLowerCase().match(/android/))return Se(new E("operation-not-supported-in-this-environment"));l.apn=u}h&&(l.appDisplayName=h),o=ph(o),l.sessionId=o;var c=hu(t.u,t.i,t.l,e,n,null,i,t.m,l,t.s,r);return t.ka().then((function(){var e=t.h;return t.w.a.set(Ju,s.v(),e)})).then((function(){var e=Ci("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ci("cordova.plugins.browsertab.openUrl",a)))throw new E("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=Ci("cordova.InAppBrowser.open",a)))throw new E("invalid-cordova-configuration");e=Ei(),t.a=n(c,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(r,t,e,n,i)})).then((function(){return new ye((function(t,e){u=function(){var e=Ci("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.Ca(u),h=function(){s||(s=bn(2e3).then((function(){e(new E("redirect-cancelled-by-user"))})))},l=function(){Li()&&h()},o.addEventListener("resume",h,!1),Ei().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return mh(r).then((function(){throw t}))}))})).ma((function(){h&&o.removeEventListener("resume",h,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&r.Qa(u),r.c=null}))},t.Ca=function(t){this.b.push(t),_h(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new xo("unknown",null,null,null,new E("no-auth-event")),t(e))}))},t.Qa=function(t){z(this.b,(function(e){return e==t}))};var vh={name:"pendingRedirect",F:"session"};function gh(t){return Gu(t.b,vh,t.a)}function bh(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=v(this.s,this),this.b=new xh,this.B=new jh,this.g=new yh(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=wh(this.D,this.u,this.m,T)}function wh(t,e,n,i){var r=ti.SDK_VERSION||null;return di()?new ch(t,e,n,r,i):new ou(t,e,n,r,i)}function Eh(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function Ch(t){t.a.Ub()&&Eh(t).o((function(e){var n=new xo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));kh(e)&&t.s(n)})),t.a.Qb()||Mh(t.b)}function Th(t,e){q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(vh,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?gh(t.g).then((function(){Eh(t).o((function(e){var n=new xo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));kh(e)&&t.s(n)}))})):Ch(t)})).o((function(){Ch(t)}))}function Sh(t,e){z(t.h,(function(t){return t==e}))}bh.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=wh(this.D,this.u,this.m),this.i={}},bh.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=b()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,i),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=b())),e=!0;break}}return Mh(this.b),e};var Ih=new Mi(2e3,1e4),Ph=new Mi(3e4,6e4);function Nh(t,e,n,i,r,o,a){return t.a.Jb(e,n,i,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),r,o,a)}function kh(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Oh(t,e,n,i,r){var o;return function(t){return t.b.set(vh,"pending",t.a)}(t.g).then((function(){return t.a.Kb(e,n,i,r).o((function(e){if(kh(e))throw new E("operation-not-supported-in-this-environment");return o=e,gh(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new ye((function(){})):gh(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Ah(t,e,n,i,r){return t.a.Lb(i,(function(t){e.la(n,null,t,r)}),Ih.get())}bh.prototype.pa=function(){return this.b.pa()};var Dh={};function Rh(t,e,n){var i=e+":"+n;return Dh[i]||(Dh[i]=new bh(t,e,n)),Dh[i]}function xh(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Mh(t){t.g||(t.g=!0,Uh(t,!1,null,null))}function Lh(t){t.g&&!t.i&&Uh(t,!1,null,null)}function Fh(t,e){if(t.b=function(){return Te(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Uh(t,e,n,i){e?i?function(t,e){if(t.b=function(){return Se(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):Fh(t,n):Fh(t,{user:null}),t.f=[],t.c=[]}function jh(){}function Hh(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Vh(t,e){this.a=e,Yi(this,"verificationId",t)}function Wh(t,e,n,i){return new Oo(t).cb(e,n).then((function(t){return new Vh(t,i)}))}function Yh(t){var e=Ur(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qi(this,{token:t,expirationTime:Fi(1e3*e.exp),authTime:Fi(1e3*e.auth_time),issuedAtTime:Fi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function qh(t,e,n){var i=e&&e[zh];if(!i)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Zr(null,i),this.b=[];var r=this;H(e[Bh]||[],(function(t){(t=Gi(t))&&r.b.push(t)})),Yi(this,"auth",this.a),Yi(this,"session",this.c),Yi(this,"hints",this.b)}xh.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},xh.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,i=t.b,r=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!r&&!o),"unknown"!=n||r||o?t.a?(Uh(this,!0,null,t.a),Te()):e.Da(n,i)?function(t,e,n){n=n.Da(e.c,e.b);var i=e.g,r=e.f,o=e.i,a=e.S(),s=!!e.c.match(/Redirect$/);n(i,r,a,o).then((function(e){Uh(t,s,e,null)})).o((function(e){Uh(t,s,null,e)}))}(this,t,e):Se(new E("invalid-auth-event")):(Uh(this,!1,null,null),Te())}else Se(new E("invalid-auth-event"))},xh.prototype.pa=function(){var t=this;return new ye((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new E("timeout");t.a&&t.a.cancel(),t.a=bn(Ph.get()).then((function(){t.b||(t.g=!0,Uh(t,!0,null,e))}))}(t))}))},jh.prototype.h=function(t,e){if(t){var n=t.c,i=t.b;t.a?(e.la(t.c,null,t.a,t.b),Te()):e.Da(n,i)?function(t,e){var n=t.b,i=t.c;e.Da(i,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(i,t,null,n)})).o((function(t){e.la(i,null,t,n)}))}(t,e):Se(new E("invalid-auth-event"))}else Se(new E("invalid-auth-event"))},Vh.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var Bh="mfaInfo",zh="mfaPendingCredential";function Qh(t,e,n,i){E.call(this,"multi-factor-auth-required",i,e),this.b=new qh(t,e,n),Yi(this,"resolver",this.b)}function Gh(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qh(e,t.serverResponse,n,t.message)}catch(t){}return null}function Kh(){}function $h(t){Yi(this,"factorId",t.ea),this.a=t}function Xh(t){if($h.call(this,t),this.a.ea!=Oo.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Jh(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function Zh(t,e){this.a=t,this.b=[],this.c=v(this.wc,this),nn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,i={};if(t){t.uid&&(i[Xi]=t.uid),t.displayName&&(i[Ki]=t.displayName),t.enrollmentTime&&(i[$i]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(i[Ji]=t.phoneNumber);try{e=new Zi(i)}catch(t){}t=e}else t=null;t&&n.push(t)})),tl(this,n)}function tl(t,e){t.b=e,Yi(t,"enrolledFactors",e)}function el(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function nl(t){this.c=t,this.b=this.a=null}function il(t){return t.b&&1e3*t.b.c||0}function rl(t,e){var n=e.refreshToken;t.b=Fr(e[Ba]||""),t.a=n}function ol(t,e){return function(t,e){return new ye((function(n,i){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ja(t,t.u+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?i($s(t)):t.access_token&&t.refresh_token?n(t):i(new E("internal-error")):i(new E("network-request-failed"))}),"POST",Bn(e).toString(),t.g,t.m.get()):i(new E("internal-error"))}))}(t.c,e).then((function(e){return t.b=Fr(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function al(t,e){this.a=t||null,this.b=e||null,qi(this,{lastSignInTime:Fi(e||null),creationTime:Fi(t||null)})}function sl(t,e,n,i,r,o){qi(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function ul(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=ti.SDK_VERSION?wi(ti.SDK_VERSION):null,this.a=new Ya(this.l,N(T),t),this.b=new nl(this.a),_l(this,e[Ba]),rl(this.b,e),Yi(this,"refreshToken",this.b.a),vl(this,n||{}),_n.call(this),this.P=!1,this.s&&Si()&&(this.i=Rh(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(t){return new el((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=il(t.b)-b()-3e5;return 0<e?e:0}))}(this),this.Z=v(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){ll(i,t.c)},this.$=null,this.O=new Zh(this,n),Yi(this,"multiFactor",this.O)}function hl(t,e){t.aa&&an(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&nn(e,"languageCodeChanged",t.za)}function ll(t,e){t.W=e,Xa(t.a,ti.SDK_VERSION?wi(ti.SDK_VERSION,t.W):null)}function cl(t,e){t.$&&an(t.$,"frameworkChanged",t.ya),(t.$=e)&&nn(e,"frameworkChanged",t.ya)}function dl(t){try{return ti.app(t.m).auth()}catch(e){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function pl(t){t.D||t.B.b||(t.B.start(),an(t,"tokenChanged",t.Z),nn(t,"tokenChanged",t.Z))}function fl(t){an(t,"tokenChanged",t.Z),t.B.stop()}function _l(t,e){t.xa=e,Yi(t,"_lat",e)}function ml(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Pe(e).then((function(){return t}))}function yl(t){t.i&&!t.P&&(t.P=!0,Th(t.i,t))}function vl(t,e){qi(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new al(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function gl(){}function bl(t){return Te().then((function(){if(t.D)throw new E("app-deleted")}))}function wl(t){return W(t.providerData,(function(t){return t.providerId}))}function El(t,e){e&&(Cl(t,e.providerId),t.providerData.push(e))}function Cl(t,e){z(t.providerData,(function(t){return t.providerId==e}))}function Tl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yi(t,e,n)}function Sl(t,e){t!=e&&(qi(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Yi(t,"metadata",function(t){return new al(t.a,t.b)}(e.metadata)):Yi(t,"metadata",new al),H(e.providerData,(function(e){El(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Yi(t,"refreshToken",t.b.a),tl(t.O,e.O.b))}function Il(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Gs(t.a,Ss,{idToken:e}).then(v(t.Ic,t))}(t,e).then((function(){return n||Tl(t,"isAnonymous",!1),e}))}))}function Pl(t,e){e[Ba]&&t.xa!=e[Ba]&&(rl(t.b,e),t.dispatchEvent(new Jh("tokenChanged")),_l(t,e[Ba]),Tl(t,"refreshToken",t.b.a))}function Nl(t,e){return Il(t).then((function(){if(q(wl(t),e))return ml(t).then((function(){throw new E("provider-already-linked")}))}))}function kl(t,e,n){return Bi({user:t,credential:Do(e),additionalUserInfo:e=Yr(e),operationType:n})}function Ol(t,e){return Pl(t,e),t.reload().then((function(){return t}))}function Al(t,e,n,i,r){if(!Si())return Se(new E("operation-not-supported-in-this-environment"));if(t.h&&!r)return Se(t.h);var o=Wr(n.providerId),a=Di(t.uid+":::"),s=null;(!Ni()||pi())&&t.s&&n.isOAuthProvider&&(s=hu(t.s,t.l,t.m,e,n,null,a,ti.SDK_VERSION||null,null,null,t.tenantId));var u=ui(s,o&&o.ta,o&&o.sa);return i=i().then((function(){if(Rl(t),!r)return t.I().then((function(){}))})).then((function(){return Nh(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new ye((function(n,i){t.la(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.w=i,t.g=a,t.c=Ah(t.i,t,e,u,a)}))})).then((function(t){return u&&si(u),t?Bi(t):null})).o((function(t){throw u&&si(u),t})),xl(t,i,r)}function Dl(t,e,n,i,r){if(!Si())return Se(new E("operation-not-supported-in-this-environment"));if(t.h&&!r)return Se(t.h);var o=null,a=Di(t.uid+":::");return i=i().then((function(){if(Rl(t),!r)return t.I().then((function(){}))})).then((function(){return t.fa=a,ml(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(Fl,t.v(),e.a)),e})).then((function(){return Oh(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ga)return Ul(t.ga);throw o})).then((function(){if(o)throw o})),xl(t,i,r)}function Rl(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function xl(t,e,n){var i=function(t,e,n){return t.h&&!n?(e.cancel(),Se(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Jh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.N.push(i),i.ma((function(){B(t.N,i)})),i.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Gh(e.v(),dl(t),v(t.hc,t))),n||e}))}function Ml(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ba]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var i=new ul(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&El(i,Bi(t))})),t.redirectEventId&&(i.fa=t.redirectEventId),i}function Ll(t){this.a=t,this.b=Bu()}qh.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=ct(e.f);return delete n[Bh],delete n[zh],pt(n,t),e.g(n)}))},w(Qh,E),Kh.prototype.ob=function(t,e,n){return e.type==to?function(t,e,n,i){return n.Fa().then((function(n){return n={idToken:n},void 0!==i&&(n.displayName=i),pt(n,{phoneVerificationInfo:ko(t.a)}),Gs(e,Cs,n)}))}(this,t,e,n):function(t,e,n){return n.Fa().then((function(n){return pt(n={mfaPendingCredential:n},{phoneVerificationInfo:ko(t.a)}),Gs(e,Ts,n)}))}(this,t,e)},w($h,Kh),w(Xh,$h),w(Jh,qe),(t=Zh.prototype).wc=function(t){tl(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=Gi(t))&&e.push(t)})),e}(t.ed))},t.Ob=function(){return this.a.I().then((function(t){return new Zr(t,null)}))},t.dc=function(t,e){var n=this,i=this.a.a;return this.Ob().then((function(n){return t.ob(i,n,e)})).then((function(t){return Pl(n.a,t),n.a.reload()}))},t.$c=function(t){var e=this,n="string"==typeof t?t:t.uid,i=this.a.a;return this.a.I().then((function(t){return Gs(i,Qs,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var i=V(e.b,(function(t){return t.uid!=n}));return tl(e,i),Pl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.v=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.v()}))}}},el.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=bn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=a.document,e=null;return Li()||!t?Te():new ye((function(n){e=function(){Li()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},el.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nl.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:il(this)}},nl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Se(new E("user-token-expired")):t||!this.b||b()>il(this)-3e4?this.a?ol(this,{grant_type:"refresh_token",refresh_token:this.a}):Te(null):Te({accessToken:this.b.toString(),refreshToken:this.a})},al.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(ul,_n),ul.prototype.va=function(t){this.oa=t,$a(this.a,t)},ul.prototype.ja=function(){return this.oa},ul.prototype.Ea=function(){return G(this.W)},ul.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Yi(ul.prototype,"providerId","firebase"),(t=ul.prototype).reload=function(){var t=this;return xl(this,bl(this).then((function(){return Il(t).then((function(){return ml(t)})).then(gl)})))},t.mc=function(t){return this.I(t).then((function(t){return new Yh(t)}))},t.I=function(t){var e=this;return xl(this,bl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.xa&&(_l(e,t.accessToken),e.dispatchEvent(new Jh("tokenChanged"))),Tl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");vl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new sl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)El(this,e[n]);Tl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Jh("userReloaded",{ed:t}))},t.Jc=function(t){return Vi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return xl(this,t.c(this.a,this.uid).then((function(t){return Pl(e,t),n=kl(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Ac=function(t){return Vi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(t){var e=this,n=null;return xl(this,Nl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=kl(e,t,"link"),Ol(e,t)})).then((function(){return n})))},t.Bc=function(t,e){var n=this;return xl(this,Nl(this,"phone").then((function(){return Wh(dl(n),t,e,v(n.mb,n))})))},t.Kc=function(t,e){var n=this;return xl(this,Te().then((function(){return Wh(dl(n),t,e,v(n.pb,n))})),!0)},t.xb=function(t){var e=this;return xl(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return Pl(e,t),e.reload()})))},t.cd=function(t){var e=this;return xl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Pl(e,t),e.reload()})))},t.yb=function(t){var e=this;return xl(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return Pl(e,t),e.reload()})))},t.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return bl(this);var e=this;return xl(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Pl(e,t),Tl(e,"displayName",t.displayName||null),Tl(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Yi(t,"displayName",e.displayName),Yi(t,"photoURL",e.photoURL))})),ml(e)})).then(gl))},t.ad=function(t){var e=this;return xl(this,Il(this).then((function(n){return q(wl(e),t)?function(t,e,n){return Gs(t,bs,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(wl(e),(function(t){n[t]||Cl(e,t)})),n[Oo.PROVIDER_ID]||Yi(e,"phoneNumber",null),ml(e)})):ml(e).then((function(){throw new E("no-such-provider")}))})))},t.delete=function(){var t=this;return xl(this,this.I().then((function(e){return Gs(t.a,gs,{idToken:e})})).then((function(){t.dispatchEvent(new Jh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");hl(t,null),cl(t,null),t.N=[],t.D=!0,fl(t),Yi(t,"refreshToken",null),t.i&&Sh(t.i,t)}))},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?v(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?v(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?v(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?v(this.Ib,this):null},t.Cc=function(t){var e=this;return Al(this,"linkViaPopup",t,(function(){return Nl(e,t.providerId).then((function(){return ml(e)}))}),!1)},t.Lc=function(t){return Al(this,"reauthViaPopup",t,(function(){return Te()}),!0)},t.Dc=function(t){var e=this;return Dl(this,"linkViaRedirect",t,(function(){return Nl(e,t.providerId)}),!1)},t.Mc=function(t){return Dl(this,"reauthViaRedirect",t,(function(){return Te()}),!0)},t.Hb=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return xl(this,this.I().then((function(n){return ds(r.a,{requestUri:t,postBody:i,sessionId:e,idToken:n})})).then((function(t){return o=kl(r,t,"link"),Ol(r,t)})).then((function(){return o})))},t.Ib=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return xl(this,Te().then((function(){return io(ps(r.a,{requestUri:t,sessionId:e,postBody:i,tenantId:n}),r.uid)})).then((function(t){return o=kl(r,t,"reauthenticate"),Pl(r,t),r.h=null,r.reload()})).then((function(){return o})),!0)},t.qb=function(t){var e=this,n=null;return xl(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:Rr(new Cr(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Ab=function(t,e){var n=this,i=null;return xl(this,this.I().then((function(t){return i=t,void 0===e||lt(e)?{}:Rr(new Cr(e))})).then((function(e){return n.a.Ab(i,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.hc=function(t){var e=null,n=this;return xl(this,t=io(Te(t),n.uid).then((function(t){return e=kl(n,t,"reauthenticate"),Pl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.v()},t.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&pt(t,this.metadata.v()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),pt(t,this.O.v()),t};var Fl={name:"redirectUser",F:"session"};function Ul(t){return Gu(t.b,Fl,t.a)}function jl(t){this.a=t,this.b=Bu(),this.c=null,this.f=function(t){var e=Wl("local"),n=Wl("session"),i=Wl("none");return function(t,e,n){var i=Qu(e,n),r=zu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Ai(a.localStorage.getItem(i))}catch(t){}if(s&&!o)return a.localStorage.removeItem(i),t.set(e,s,n);s&&o&&"localStorage"!=r.type&&a.localStorage.removeItem(i)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(r){return r?n:t.b.get(i,t.a).then((function(n){return n?i:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Vl,t.a).then((function(t){return t?Wl(t):e}))}))}))})).then((function(e){return t.c=e,Hl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Wl("local"),this.a,v(this.g,this))}function Hl(t,e){var n,i=[];for(n in Yu)Yu[n]!==e&&i.push(Gu(t.b,Wl(Yu[n]),t.a));return i.push(Gu(t.b,Vl,t.a)),function(t){return new ye((function(e,n){var i=t.length,r=[];if(i)for(var o=function(t,n){i--,r[t]=n,0==i&&e(r)},a=function(t){n(t)},s=0;s<t.length;s++)Ie(t[s],g(o,s),a);else e(r)}))}(i)}jl.prototype.g=function(){var t=this,e=Wl("local");zl(this,(function(){return Te().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Hl(t,"local").then((function(){t.c=e}))}))}))};var Vl={name:"persistence",F:"session"};function Wl(t){return{name:"authUser",F:t}}function Yl(t,e){return zl(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function ql(t){return zl(t,(function(){return Gu(t.b,t.c,t.a)}))}function Bl(t,e){return zl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ml(t||{})}))}))}function zl(t,e){return t.f=t.f.then(e,e),t.f}function Ql(t){if(this.l=!1,Yi(this,"settings",new Hh),Yi(this,"app",t),!ec(this).options||!ec(this).options.apiKey)throw new E("invalid-api-key");t=ti.SDK_VERSION?wi(ti.SDK_VERSION):null,this.b=new Ya(ec(this).options&&ec(this).options.apiKey,N(T),t),this.P=[],this.m=[],this.O=[],this.$b=ti.INTERNAL.createSubscribe(v(this.xc,this)),this.W=void 0,this.ac=ti.INTERNAL.createSubscribe(v(this.yc,this)),Zl(this,null),this.i=new jl(ec(this).options.apiKey+":"+ec(this).name),this.B=new Ll(ec(this).options.apiKey+":"+ec(this).name),this.Z=oc(this,function(t){var e=ec(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Fl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ml(t||{})}))}(t.B,ec(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),Ul(t.B)}));return oc(t,e)}(t).then((function(){return Bl(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return Yl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ql(t.i)}))):null})).then((function(e){Zl(t,e||null)}));return oc(t,n)}(this)),this.h=oc(this,function(t){return t.Z.then((function(){return Xl(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener(Wl("local"),e.a,t.oa)}}))}(this)),this.aa=!1,this.oa=v(this.Xc,this),this.Ma=v(this.ca,this),this.xa=v(this.jc,this),this.ya=v(this.uc,this),this.za=v(this.vc,this),this.a=null,function(t){var e=ec(t).options.authDomain,n=ec(t).options.apiKey;e&&Si()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Rh(e,n,ec(t).name),Th(t.a,t),nc(t)&&yl(nc(t)),t.D){yl(t.D);var i=t.D;i.va(t.ja()),hl(i,t),ll(i=t.D,t.N),cl(i,t),t.D=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=v(this.delete,this),this.INTERNAL.logFramework=v(this.Ec,this),this.s=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function Gl(t){qe.call(this,"languageCodeChanged"),this.g=t}function Kl(t){qe.call(this,"frameworkChanged"),this.c=t}function $l(t){return t.Zb||Se(new E("auth-domain-config-required"))}function Xl(t){if(!Si())return Se(new E("operation-not-supported-in-this-environment"));var e=$l(t).then((function(){return t.a.pa()})).then((function(t){return t?Bi(t):null}));return oc(t,e)}function Jl(t,e){var n={};return n.apiKey=ec(t).options.apiKey,n.authDomain=ec(t).options.authDomain,n.appName=ec(t).name,t.Z.then((function(){return function(t,e,n,i){var r=new ul(t,e);return n&&(r.ga=n),i&&ll(r,i),r.reload().then((function(){return r}))}(n,e,t.B,t.Ea())})).then((function(e){return nc(t)&&e.uid==nc(t).uid?(Sl(nc(t),e),t.ca(e)):(Zl(t,e),yl(e),t.ca(e))})).then((function(){rc(t)}))}function Zl(t,e){nc(t)&&(function(t,e){z(t.R,(function(t){return t==e}))}(nc(t),t.Ma),an(nc(t),"tokenChanged",t.xa),an(nc(t),"userDeleted",t.ya),an(nc(t),"userInvalidated",t.za),fl(nc(t))),e&&(e.R.push(t.Ma),nn(e,"tokenChanged",t.xa),nn(e,"userDeleted",t.ya),nn(e,"userInvalidated",t.za),0<t.s&&pl(e)),Yi(t,"currentUser",e),e&&(e.va(t.ja()),hl(e,t),ll(e,t.N),cl(e,t))}function tc(t,e){var n=null,i=null;return oc(t,e.then((function(e){return n=Do(e),i=Yr(e),Jl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Gh(e.v(),t,v(t.ic,t))),n||e})).then((function(){return Bi({user:nc(t),credential:n,additionalUserInfo:i,operationType:"signIn"})})))}function ec(t){return t.app}function nc(t){return t.currentUser}function ic(t){return nc(t)&&nc(t)._lat||null}function rc(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](ic(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](ic(t))}}function oc(t,e){return t.P.push(e),e.ma((function(){B(t.P,e)})),e}function ac(){}function sc(){this.a={},this.b=1e12}jl.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(i in Yu)if(Yu[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch(_i()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Eu()&&"none"!==t)throw n;break;default:if(!Ti()&&"none"!==t)throw n}}(t),zl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(i){return e=i,Hl(n,t)})).then((function(){if(n.c=Wl(t),e)return n.b.set(n.c,e,n.a)})):Te()}))},w(Ql,_n),w(Gl,qe),w(Kl,qe),(t=Ql.prototype).tb=function(t){return oc(this,t=this.i.tb(t))},t.va=function(t){this.$===t||this.l||(this.$=t,$a(this.b,this.$),this.dispatchEvent(new Gl(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=a.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Xa(this.b,ti.SDK_VERSION?wi(ti.SDK_VERSION,this.N):null),this.dispatchEvent(new Kl(this.N))},t.Ea=function(){return G(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:ec(this).options.apiKey,authDomain:ec(this).options.authDomain,appName:ec(this).name,currentUser:nc(this)&&nc(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,i){"signInViaPopup"==t&&this.g==i&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?v(this.gc,this):null},t.gc=function(t,e,n,i){var r=this,o={requestUri:t,postBody:i,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),r.Z.then((function(){return tc(r,cs(r.b,o))}))},t.Vc=function(t){if(!Si())return Se(new E("operation-not-supported-in-this-environment"));var e=this,n=Wr(t.providerId),i=Di(),r=null;(!Ni()||pi())&&ec(this).options.authDomain&&t.isOAuthProvider&&(r=hu(ec(this).options.authDomain,ec(this).options.apiKey,ec(this).name,"signInViaPopup",t,null,i,ti.SDK_VERSION||null,null,null,this.S()));var o=ui(r,n&&n.ta,n&&n.sa);return oc(this,n=$l(this).then((function(n){return Nh(n,o,"signInViaPopup",t,i,!!r,e.S())})).then((function(){return new ye((function(t,n){e.la("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=i,e.c=Ah(e.a,e,"signInViaPopup",o,i)}))})).then((function(t){return o&&si(o),t?Bi(t):null})).o((function(t){throw o&&si(o),t})))},t.Wc=function(t){if(!Si())return Se(new E("operation-not-supported-in-this-environment"));var e=this;return oc(this,$l(this).then((function(){return function(t){return zl(t,(function(){return t.b.set(Vl,t.c.F,t.a)}))}(e.i)})).then((function(){return Oh(e.a,"signInViaRedirect",t,void 0,e.S())})))},t.pa=function(){var t=this;return Xl(this).then((function(e){return t.a&&Lh(t.a.b),e})).o((function(e){throw t.a&&Lh(t.a.b),e}))},t.bd=function(t){if(!t)return Se(new E("null-user"));if(this.R!=t.tenantId)return Se(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=ec(this).options.apiKey,n.authDomain=ec(this).options.authDomain,n.appName=ec(this).name;var i=function(t,e,n,i){var r=t.b,o={};return o[Ba]=r.b&&r.b.toString(),o.refreshToken=r.a,e=new ul(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),i&&ll(e,i),Sl(e,t),e}(t,n,e.B,e.Ea());return oc(this,this.h.then((function(){if(ec(e).options.apiKey!=t.l)return i.reload()})).then((function(){return nc(e)&&t.uid==nc(e).uid?(Sl(nc(e),t),e.ca(t)):(Zl(e,i),yl(i),e.ca(i))})).then((function(){rc(e)})))},t.wb=function(){var t=this;return oc(this,this.h.then((function(){return t.a&&Lh(t.a.b),nc(t)?(Zl(t,null),ql(t.i).then((function(){rc(t)}))):Te()})))},t.Xc=function(){var t=this;return Bl(this.i,ec(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=nc(t)&&e){n=nc(t).uid;var i=e.uid;n=null!=n&&""!==n&&null!=i&&""!==i&&n==i}if(n)return Sl(nc(t),e),nc(t).I();(nc(t)||e)&&(Zl(t,e),e&&(yl(e),e.ga=t.B),t.a&&Th(t.a,t),rc(t))}}))},t.ca=function(t){return Yl(this.i,t)},t.jc=function(){rc(this),this.ca(nc(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then((function(){return tc(e,Te(t))}))},t.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(nc(e))}))},t.yc=function(t){var e=this;!function(t,e){t.O.push(e),oc(t,t.h.then((function(){!t.l&&q(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(ic(t)))})))}(this,(function(){t.next(nc(e))}))},t.Gc=function(t,e,n){var i=this;return this.aa&&Promise.resolve().then((function(){"function"==typeof t?t(nc(i)):"function"==typeof t.next&&t.next(nc(i))})),this.$b(t,e,n)},t.Fc=function(t,e,n){var i=this;return this.aa&&Promise.resolve().then((function(){i.W=i.getUid(),"function"==typeof t?t(nc(i)):"function"==typeof t.next&&t.next(nc(i))})),this.ac(t,e,n)},t.kc=function(t){var e=this;return oc(this,this.h.then((function(){return nc(e)?nc(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Rc=function(t){var e=this;return this.h.then((function(){return tc(e,Gs(e.b,Ws,{token:t}))})).then((function(t){var n=t.user;return Tl(n,"isAnonymous",!1),e.ca(n),t}))},t.Sc=function(t,e){var n=this;return this.h.then((function(){return tc(n,Gs(n.b,Ys,{email:t,password:e}))}))},t.cc=function(t,e){var n=this;return this.h.then((function(){return tc(n,Gs(n.b,ys,{email:t,password:e}))}))},t.Ya=function(t){var e=this;return this.h.then((function(){return tc(e,t.ia(e.b))}))},t.Qc=function(t){return Vi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var t=this;return this.h.then((function(){var e=nc(t);if(e&&e.isAnonymous){var n=Bi({providerId:null,isNewUser:!1});return Bi({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return tc(t,t.b.vb()).then((function(e){var n=e.user;return Tl(n,"isAnonymous",!0),t.ca(n),e}))}))},t.getUid=function(){return nc(this)&&nc(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&nc(this)&&pl(nc(this))},t.Nc=function(t){var e=this;H(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&nc(this)&&fl(nc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),oc(this,this.h.then((function(){e.l||q(e.m,t)&&t(ic(e))})))},t.removeAuthTokenListener=function(t){z(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Wl("local"),t.a,this.oa),this.a&&(Sh(this.a,this),Lh(this.a.b)),Promise.resolve()},t.fc=function(t){return oc(this,function(t,e){return Gs(t,vs,{identifier:e,continueUri:Ii()?ri():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.zc=function(t){return!!Io(t)},t.sb=function(t,e){var n=this;return oc(this,Te().then((function(){var t=new Cr(e);if(!t.c)throw new E("argument-error",Ir+" must be true when sending sign in link to email");return Rr(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},t.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},t.jb=function(t,e){return oc(this,this.b.jb(t,e).then((function(){})))},t.Pa=function(t){return oc(this,this.b.Pa(t).then((function(t){return new tr(t)})))},t.fb=function(t){return oc(this,this.b.fb(t).then((function(){})))},t.rb=function(t,e){var n=this;return oc(this,Te().then((function(){return void 0===e||lt(e)?{}:Rr(new Cr(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},t.Uc=function(t,e){return oc(this,Wh(this,t,e,v(this.Ya,this)))},t.Tc=function(t,e){var n=this;return oc(this,Te().then((function(){var i=e||ri(),r=So(t,i);if(!(i=Io(i)))throw new E("argument-error","Invalid email link!");if(i.tenantId!==n.S())throw new E("tenant-id-mismatch");return n.Ya(r)})))},ac.prototype.render=function(){},ac.prototype.reset=function(){},ac.prototype.getResponse=function(){},ac.prototype.execute=function(){};var uc=null;function hc(t,e){return(e=lc(e))&&t.a[e]||null}function lc(t){return(t=void 0===t?1e12:t)?t.toString():null}function cc(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ie(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():nn(this.f,"click",this.i)}function dc(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function pc(){}function fc(){}sc.prototype.render=function(t,e){return this.a[this.b.toString()]=new cc(t,e),this.b++},sc.prototype.reset=function(t){var e=hc(this,t);t=lc(t),e&&t&&(e.delete(),delete this.a[t])},sc.prototype.getResponse=function(t){return(t=hc(this,t))?t.getResponse():null},sc.prototype.execute=function(t){(t=hc(this,t))&&t.execute()},cc.prototype.getResponse=function(){return dc(this),this.b},cc.prototype.execute=function(){dc(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},cc.prototype.delete=function(){dc(this),this.g=!0,clearTimeout(this.a),this.a=null,an(this.f,"click",this.i)},Yi(pc,"FACTOR_ID","phone"),fc.prototype.g=function(){return uc||(uc=new sc),Te(uc)},fc.prototype.c=function(){};var _c=null;function mc(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var yc=new _t(vt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),vc=new Mi(3e4,6e4);mc.prototype.g=function(t){var e=this;return new ye((function(n,i){var r=setTimeout((function(){i(new E("network-request-failed"))}),vc.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(r),n(a.grecaptcha)}else clearTimeout(r),i(new E("internal-error"));delete a[e.a]},Te(La(Et(yc,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(r),i(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(r),n(a.grecaptcha))}))},mc.prototype.c=function(){this.b--};var gc=null;function bc(t,e,n,i,r,o,s){if(Yi(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s?(_c||(_c=new fc),s=_c):(gc||(gc=new mc),s=gc),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Cc])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tc],!a.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ie(e)||!this.i&&ie(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(t,o||null,r||null),this.w=i||function(){return null};var u=this;this.l=[];var h=this.a[wc];this.a[wc]=function(t){if(Sc(u,t),"function"==typeof h)h(t);else if("string"==typeof h){var e=Ci(h,a);"function"==typeof e&&e(t)}};var l=this.a[Ec];this.a[Ec]=function(){if(Sc(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ci(l,a);"function"==typeof t&&t()}}}var wc="callback",Ec="expired-callback",Cc="sitekey",Tc="size";function Sc(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Ic(t,e){return t.h.push(e),e.ma((function(){B(t.h,e)})),e}function Pc(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Nc(t,e,n){var i=!1;try{this.b=n||ti.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=ti.SDK_VERSION?wi(ti.SDK_VERSION,o):null,bc.call(this,n,t,e,(function(){try{var t=r.b.auth().ja()}catch(e){t=null}return t}),o,N(T),i)}function kc(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].K(n[r])&&!o){if(e=e[r],0>r||r>=Oc.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Oc[r],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}i=null}}if(i)throw new E("argument-error",t+" failed: "+i)}(t=bc.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=Ic(this,Te().then((function(){if(Ii()&&!fi())return ci();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,Gs(t.s,As,{})})).then((function(e){t.a[Cc]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Pc(this);var t=this;return Ic(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=ie(e);e=function(t,e,n){var i=arguments,r=document,o=String(i[0]),a=i[1];if(!ne&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',jt(a.name),'"'),a.type){o.push(' type="',jt(a.type),'"');var s={};pt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=he(r,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):re(o,a)),2<i.length&&ue(r,o,i),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Pc(this);var t=this;return Ic(this,this.render().then((function(e){return new ye((function(n){var i=t.g.getResponse(e);if(i)n(i);else{var r=function(e){e&&(function(t,e){z(t.l,(function(t){return t==e}))}(t,r),n(e))};t.l.push(r),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Pc(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Pc(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ie(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},w(Nc,bc);var Oc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ac(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Dc(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Rc(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:p}}function xc(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Mc(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Lc(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ia||!n)}}}function Fc(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Fa}function Uc(t){return p(t)&&"string"==typeof t.uid}function jc(t,e,n,i){return{name:n||"",J:t.J+" or "+e.J,optional:!!i,K:function(n){return t.K(n)||e.K(n)}}}function Hc(t,e){for(var n in e){var i=e[n].name;t[i]=Yc(i,t[n],e[n].j)}}function Vc(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:g((function(t){return this[t]}),n),set:g((function(t,e,n,i){kc(t,[n],[i],!0),this[e]=i}),i,n,e[n].gb),enumerable:!0})}}function Wc(t,e,n,i){t[e]=Yc(e,n,i)}function Yc(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return kc(o,n,t),e.apply(this,t)}if(!n)return e;var r,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}Hc(Ql.prototype,{fb:{name:"applyActionCode",j:[Ac("code")]},Pa:{name:"checkActionCode",j:[Ac("code")]},jb:{name:"confirmPasswordReset",j:[Ac("code"),Ac("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Ac("email"),Ac("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Ac("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Ac("emailLink")]},Fc:{name:"onAuthStateChanged",j:[jc(Rc(),xc(),"nextOrObserver"),xc("opt_error",!0),xc("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[jc(Rc(),xc(),"nextOrObserver"),xc("opt_error",!0),xc("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Ac("email"),jc(Rc("opt_actionCodeSettings",!0),Mc(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Ac("email"),Rc("actionCodeSettings")]},tb:{name:"setPersistence",j:[Ac("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Lc()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Lc()]},Rc:{name:"signInWithCustomToken",j:[Ac("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Ac("email"),Ac("password")]},Tc:{name:"signInWithEmailLink",j:[Ac("email"),Ac("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Ac("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[jc({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ul)}},Mc(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ac(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Ac("code")]}}),Vc(Ql.prototype,{lc:{name:"languageCode",gb:jc(Ac(),Mc(),"languageCode")},ti:{name:"tenantId",gb:jc(Ac(),Mc(),"tenantId")}}),Ql.Persistence=Yu,Ql.Persistence.LOCAL="local",Ql.Persistence.SESSION="session",Ql.Persistence.NONE="none",Hc(ul.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Dc("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dc("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Lc()]},mb:{name:"linkWithCredential",j:[Lc()]},Bc:{name:"linkWithPhoneNumber",j:[Ac("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Lc()]},pb:{name:"reauthenticateWithCredential",j:[Lc()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Ac("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[jc(Rc("opt_actionCodeSettings",!0),Mc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ac(null,!0)]},ad:{name:"unlink",j:[Ac("provider")]},xb:{name:"updateEmail",j:[Ac("email")]},yb:{name:"updatePassword",j:[Ac("password")]},cd:{name:"updatePhoneNumber",j:[Lc("phone")]},zb:{name:"updateProfile",j:[Rc("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Ac("email"),jc(Rc("opt_actionCodeSettings",!0),Mc(null,!0),"opt_actionCodeSettings",!0)]}}),Hc(sc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hc(ac.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hc(ye.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Vc(Hh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Dc("appVerificationDisabledForTesting")}}),Hc(Vh.prototype,{confirm:{name:"confirm",j:[Ac("verificationCode")]}}),Wc(no,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[ho,Co,No,ao],i=0;i<n.length;i++)if(e=n[i](t))return e;return null}),[jc(Ac(),Rc(),"json")]),Wc(To,"credential",(function(t,e){return new Eo(t,e)}),[Ac("email"),Ac("password")]),Hc(Eo.prototype,{v:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(fo.prototype,{Aa:{name:"addScope",j:[Ac("scope")]},Ia:{name:"setCustomParameters",j:[Rc("customOAuthParameters")]}}),Wc(fo,"credential",_o,[jc(Ac(),Rc(),"token")]),Wc(To,"credentialWithLink",So,[Ac("email"),Ac("emailLink")]),Hc(mo.prototype,{Aa:{name:"addScope",j:[Ac("scope")]},Ia:{name:"setCustomParameters",j:[Rc("customOAuthParameters")]}}),Wc(mo,"credential",yo,[jc(Ac(),Rc(),"token")]),Hc(vo.prototype,{Aa:{name:"addScope",j:[Ac("scope")]},Ia:{name:"setCustomParameters",j:[Rc("customOAuthParameters")]}}),Wc(vo,"credential",go,[jc(Ac(),jc(Rc(),Mc()),"idToken"),jc(Ac(),Mc(),"accessToken",!0)]),Hc(bo.prototype,{Ia:{name:"setCustomParameters",j:[Rc("customOAuthParameters")]}}),Wc(bo,"credential",wo,[jc(Ac(),Rc(),"token"),Ac("secret",!0)]),Hc(po.prototype,{Aa:{name:"addScope",j:[Ac("scope")]},credential:{name:"credential",j:[jc(Ac(),jc(Rc(),Mc()),"optionsOrIdToken"),jc(Ac(),Mc(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Rc("customOAuthParameters")]}}),Hc(so.prototype,{v:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(ro.prototype,{v:{name:"toJSON",j:[Ac(null,!0)]}}),Wc(Oo,"credential",Ao,[Ac("verificationId"),Ac("verificationCode")]),Hc(Oo.prototype,{cb:{name:"verifyPhoneNumber",j:[jc(Ac(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Fc(t.session,to)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Fc(t.session,eo)&&Uc(t.multiFactorHint):t.session&&t.multiFactorUid?Fc(t.session,eo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Hc(Po.prototype,{v:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(E.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(Ho.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(jo.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(Qh.prototype,{toJSON:{name:"toJSON",j:[Ac(null,!0)]}}),Hc(qh.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),Hc(Zh.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},Ac("displayName",!0)]},$c:{name:"unenroll",j:[jc({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Uc},Ac(),"multiFactorInfoIdentifier")]}}),Hc(Nc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Wc(fr,"parseLink",Er,[Ac("link")]),Wc(pc,"assertion",(function(t){return new Xh(t)}),[Lc("phone")]),function(){if(void 0===ti||!ti.INTERNAL||!ti.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:nr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:er,VERIFY_AND_CHANGE_EMAIL:ir,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Ql,AuthCredential:no,Error:E};Wc(t,"EmailAuthProvider",To,[]),Wc(t,"FacebookAuthProvider",fo,[]),Wc(t,"GithubAuthProvider",mo,[]),Wc(t,"GoogleAuthProvider",vo,[]),Wc(t,"TwitterAuthProvider",bo,[]),Wc(t,"OAuthProvider",po,[Ac("providerId")]),Wc(t,"SAMLAuthProvider",co,[Ac("providerId")]),Wc(t,"PhoneAuthProvider",Oo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Ql)}}]),Wc(t,"RecaptchaVerifier",Nc,[jc(Ac(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Rc("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof ti.app.App)}}]),Wc(t,"ActionCodeURL",fr,[]),Wc(t,"PhoneMultiFactorGenerator",pc,[]),ti.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Ql(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),ti.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:v((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:v(t.kc,t),addAuthTokenListener:v(t.bc,t),removeAuthTokenListener:v(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ti.registerVersion("@firebase/auth","0.14.9"),ti.INTERNAL.extendNamespace({User:ul})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});ti.default.initializeApp({apiKey:"AIzaSyDsTrjUL9kRug7fw_sNU31cy7JYzJAUvmQ",databaseURL:"https://uvalib-api-occupancy.firebaseio.com",projectId:"uvalib-api",appId:"1:602799472461:web:d56a8ec950c9c85edc8104"});class ei extends HTMLElement{static get observedAttributes(){return["auto"]}constructor(){super()}connectedCallback(){var t=new URL(window.location.href);this._fbtoken=t.searchParams.get("token")?t.searchParams.get("token"):localStorage.getItem("fbtoken")?localStorage.getItem("fbtoken"):null,t.searchParams.delete("token"),window.history.replaceState({},document.title,t.pathname+t.search),this._fbtoken?ti.auth().signInWithCustomToken(this._fbtoken).then(function(){localStorage.setItem("fbtoken",this._fbtoken),this.dispatchEvent(new CustomEvent("uvalib-model-authenticated",{bubbles:!0,composed:!0}))}.bind(this)).catch((function(t){console.error(`Got an error code of ${t.code} trying to login to Firebase. Reason: ${t.message}`),window.location.href="http://api.library.virginia.edu/fireauth/helloOccupancy.js?dest="+window.location.href})):window.location.href="http://api.library.virginia.edu/fireauth/helloOccupancy.js?dest="+window.location.href}get auto(){return!!this._auto}set auto(t){this._auto=!!t}attributeChangedCallback(t,e,n){switch(t){case"auto":this.auto=""===n}}}window.customElements.define("uvalib-account-auth",ei);var ni="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ii(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function ri(t,e){return t(e={exports:{}},e.exports),e.exports}var oi,ai=ri((function(t,e){t.exports=function(){var e,n;function i(){return e.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(a(t,e))return!1;return!0}function u(t){return void 0===t}function h(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function c(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function d(t,e){for(var n in e)a(e,n)&&(t[n]=e[n]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,i){return Te(t,e,n,i,!0).utc()}function f(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function _(t){if(null==t._isValid){var e=f(t),i=n.call(e.parsedDateParts,(function(t){return null!=t})),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function m(t){var e=p(NaN);return null!=t?d(f(e),t):f(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),i=n.length>>>0;for(e=0;e<i;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var y=i.momentProperties=[],v=!1;function g(t,e){var n,i,r;if(u(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),u(e._i)||(t._i=e._i),u(e._f)||(t._f=e._f),u(e._l)||(t._l=e._l),u(e._strict)||(t._strict=e._strict),u(e._tzm)||(t._tzm=e._tzm),u(e._isUTC)||(t._isUTC=e._isUTC),u(e._offset)||(t._offset=e._offset),u(e._pf)||(t._pf=f(e)),u(e._locale)||(t._locale=e._locale),y.length>0)for(n=0;n<y.length;n++)u(r=e[i=y[n]])||(t[i]=r);return t}function b(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,i.updateOffset(this),v=!1)}function w(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function E(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function C(t,e){var n=!0;return d((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),n){var r,o,s,u=[];for(o=0;o<arguments.length;o++){if(r="","object"==typeof arguments[o]){for(s in r+="\n["+o+"] ",arguments[0])a(arguments[0],s)&&(r+=s+": "+arguments[0][s]+", ");r=r.slice(0,-2)}else r=arguments[o];u.push(r)}E(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var T,S={};function I(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),S[t]||(E(e),S[t]=!0)}function P(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function N(t,e){var n,i=d({},t);for(n in e)a(e,n)&&(o(t[n])&&o(e[n])?(i[n]={},d(i[n],t[n]),d(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)a(t,n)&&!a(e,n)&&o(t[n])&&(i[n]=d({},i[n]));return i}function k(t){null!=t&&this.set(t)}function O(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,T=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)a(t,e)&&n.push(e);return n};var A=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,D=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},x={};function M(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(x[t]=r),e&&(x[e[0]]=function(){return O(r.apply(this,arguments),e[1],e[2])}),n&&(x[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function L(t,e){return t.isValid()?(e=F(e,t.localeData()),R[e]=R[e]||function(t){var e,n,i,r=t.match(A);for(e=0,n=r.length;e<n;e++)x[r[e]]?r[e]=x[r[e]]:r[e]=(i=r[e]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(e){var i,o="";for(i=0;i<n;i++)o+=P(r[i])?r[i].call(e,t):r[i];return o}}(e),R[e](t)):t.localeData().invalidDate()}function F(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(D.lastIndex=0;n>=0&&D.test(t);)t=t.replace(D,i),D.lastIndex=0,n-=1;return t}var U={};function j(t,e){var n=t.toLowerCase();U[n]=U[n+"s"]=U[e]=t}function H(t){return"string"==typeof t?U[t]||U[t.toLowerCase()]:void 0}function V(t){var e,n,i={};for(n in t)a(t,n)&&(e=H(n))&&(i[e]=t[n]);return i}var W={};function Y(t,e){W[t]=e}function q(t){return t%4==0&&t%100!=0||t%400==0}function B(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function z(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=B(e)),n}function Q(t,e){return function(n){return null!=n?(K(this,t,n),i.updateOffset(this,e),this):G(this,t)}}function G(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function K(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&q(t.year())&&1===t.month()&&29===t.date()?(n=z(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),wt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var $,X=/\d/,J=/\d\d/,Z=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,nt=/\d\d?/,it=/\d\d\d\d?/,rt=/\d\d\d\d\d\d?/,ot=/\d{1,3}/,at=/\d{1,4}/,st=/[+-]?\d{1,6}/,ut=/\d+/,ht=/[+-]?\d+/,lt=/Z|[+-]\d\d:?\d\d/gi,ct=/Z|[+-]\d\d(?::?\d\d)?/gi,dt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pt(t,e,n){$[t]=P(e)?e:function(t,i){return t&&n?n:e}}function ft(t,e){return a($,t)?$[t](e._strict,e._locale):new RegExp(_t(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,r){return e||n||i||r}))))}function _t(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}$={};var mt,yt={};function vt(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),h(e)&&(i=function(t,n){n[e]=z(t)}),n=0;n<t.length;n++)yt[t[n]]=i}function gt(t,e){vt(t,(function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)}))}function bt(t,e,n){null!=e&&a(yt,t)&&yt[t](e,n._a,n,t)}function wt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,i=(e%(n=12)+n)%n;return t+=(e-i)/12,1===i?q(t)?29:28:31-i%7%2}mt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},M("M",["MM",2],"Mo",(function(){return this.month()+1})),M("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),M("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),j("month","M"),Y("month",8),pt("M",nt),pt("MM",nt,J),pt("MMM",(function(t,e){return e.monthsShortRegex(t)})),pt("MMMM",(function(t,e){return e.monthsRegex(t)})),vt(["M","MM"],(function(t,e){e[1]=z(t)-1})),vt(["MMM","MMMM"],(function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[1]=r:f(n).invalidMonth=t}));var Et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ct="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,St=dt,It=dt;function Pt(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=mt.call(this._shortMonthsParse,a))?r:null:-1!==(r=mt.call(this._longMonthsParse,a))?r:null:"MMM"===e?-1!==(r=mt.call(this._shortMonthsParse,a))||-1!==(r=mt.call(this._longMonthsParse,a))?r:null:-1!==(r=mt.call(this._longMonthsParse,a))||-1!==(r=mt.call(this._shortMonthsParse,a))?r:null}function Nt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=z(e);else if(!h(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),wt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function kt(t){return null!=t?(Nt(this,t),i.updateOffset(this,!0),this):G(this,"Month")}function Ot(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=p([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=_t(i[e]),r[e]=_t(r[e]);for(e=0;e<24;e++)o[e]=_t(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function At(t){return q(t)?366:365}M("Y",0,0,(function(){var t=this.year();return t<=9999?O(t,4):"+"+t})),M(0,["YY",2],0,(function(){return this.year()%100})),M(0,["YYYY",4],0,"year"),M(0,["YYYYY",5],0,"year"),M(0,["YYYYYY",6,!0],0,"year"),j("year","y"),Y("year",1),pt("Y",ht),pt("YY",nt,J),pt("YYYY",at,tt),pt("YYYYY",st,et),pt("YYYYYY",st,et),vt(["YYYYY","YYYYYY"],0),vt("YYYY",(function(t,e){e[0]=2===t.length?i.parseTwoDigitYear(t):z(t)})),vt("YY",(function(t,e){e[0]=i.parseTwoDigitYear(t)})),vt("Y",(function(t,e){e[0]=parseInt(t,10)})),i.parseTwoDigitYear=function(t){return z(t)+(z(t)>68?1900:2e3)};var Dt=Q("FullYear",!0);function Rt(t,e,n,i,r,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,r,o,a),s}function xt(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Mt(t,e,n){var i=7+e-n;return-(7+xt(t,0,i).getUTCDay()-e)%7+i-1}function Lt(t,e,n,i,r){var o,a,s=1+7*(e-1)+(7+n-i)%7+Mt(t,i,r);return s<=0?a=At(o=t-1)+s:s>At(t)?(o=t+1,a=s-At(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Ft(t,e,n){var i,r,o=Mt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?i=a+Ut(r=t.year()-1,e,n):a>Ut(t.year(),e,n)?(i=a-Ut(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Ut(t,e,n){var i=Mt(t,e,n),r=Mt(t+1,e,n);return(At(t)-i+r)/7}function jt(t,e){return t.slice(e,7).concat(t.slice(0,e))}M("w",["ww",2],"wo","week"),M("W",["WW",2],"Wo","isoWeek"),j("week","w"),j("isoWeek","W"),Y("week",5),Y("isoWeek",5),pt("w",nt),pt("ww",nt,J),pt("W",nt),pt("WW",nt,J),gt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=z(t)})),M("d",0,"do","day"),M("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),M("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),M("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),M("e",0,0,"weekday"),M("E",0,0,"isoWeekday"),j("day","d"),j("weekday","e"),j("isoWeekday","E"),Y("day",11),Y("weekday",11),Y("isoWeekday",11),pt("d",nt),pt("e",nt),pt("E",nt),pt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),pt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),pt("dddd",(function(t,e){return e.weekdaysRegex(t)})),gt(["dd","ddd","dddd"],(function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:f(n).invalidWeekday=t})),gt(["d","e","E"],(function(t,e,n,i){e[i]=z(t)}));var Ht="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Vt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Wt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Yt=dt,qt=dt,Bt=dt;function zt(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=mt.call(this._weekdaysParse,a))?r:null:"ddd"===e?-1!==(r=mt.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=mt.call(this._minWeekdaysParse,a))?r:null:"dddd"===e?-1!==(r=mt.call(this._weekdaysParse,a))||-1!==(r=mt.call(this._shortWeekdaysParse,a))||-1!==(r=mt.call(this._minWeekdaysParse,a))?r:null:"ddd"===e?-1!==(r=mt.call(this._shortWeekdaysParse,a))||-1!==(r=mt.call(this._weekdaysParse,a))||-1!==(r=mt.call(this._minWeekdaysParse,a))?r:null:-1!==(r=mt.call(this._minWeekdaysParse,a))||-1!==(r=mt.call(this._weekdaysParse,a))||-1!==(r=mt.call(this._shortWeekdaysParse,a))?r:null}function Qt(){function t(t,e){return e.length-t.length}var e,n,i,r,o,a=[],s=[],u=[],h=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),i=_t(this.weekdaysMin(n,"")),r=_t(this.weekdaysShort(n,"")),o=_t(this.weekdays(n,"")),a.push(i),s.push(r),u.push(o),h.push(i),h.push(r),h.push(o);a.sort(t),s.sort(t),u.sort(t),h.sort(t),this._weekdaysRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Gt(){return this.hours()%12||12}function Kt(t,e){M(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function $t(t,e){return e._meridiemParse}M("H",["HH",2],0,"hour"),M("h",["hh",2],0,Gt),M("k",["kk",2],0,(function(){return this.hours()||24})),M("hmm",0,0,(function(){return""+Gt.apply(this)+O(this.minutes(),2)})),M("hmmss",0,0,(function(){return""+Gt.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)})),M("Hmm",0,0,(function(){return""+this.hours()+O(this.minutes(),2)})),M("Hmmss",0,0,(function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)})),Kt("a",!0),Kt("A",!1),j("hour","h"),Y("hour",13),pt("a",$t),pt("A",$t),pt("H",nt),pt("h",nt),pt("k",nt),pt("HH",nt,J),pt("hh",nt,J),pt("kk",nt,J),pt("hmm",it),pt("hmmss",rt),pt("Hmm",it),pt("Hmmss",rt),vt(["H","HH"],3),vt(["k","kk"],(function(t,e,n){var i=z(t);e[3]=24===i?0:i})),vt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),vt(["h","hh"],(function(t,e,n){e[3]=z(t),f(n).bigHour=!0})),vt("hmm",(function(t,e,n){var i=t.length-2;e[3]=z(t.substr(0,i)),e[4]=z(t.substr(i)),f(n).bigHour=!0})),vt("hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=z(t.substr(0,i)),e[4]=z(t.substr(i,2)),e[5]=z(t.substr(r)),f(n).bigHour=!0})),vt("Hmm",(function(t,e,n){var i=t.length-2;e[3]=z(t.substr(0,i)),e[4]=z(t.substr(i))})),vt("Hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=z(t.substr(0,i)),e[4]=z(t.substr(i,2)),e[5]=z(t.substr(r))}));var Xt,Jt=Q("Hours",!0),Zt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Et,monthsShort:Ct,week:{dow:0,doy:6},weekdays:Ht,weekdaysMin:Wt,weekdaysShort:Vt,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function ne(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function ie(t){return t?t.toLowerCase().replace("_","-"):t}function re(e){var n=null;if(void 0===te[e]&&t&&t.exports)try{n=Xt._abbr,ii(),oe(n)}catch(t){te[e]=null}return te[e]}function oe(t,e){var n;return t&&((n=u(e)?se(t):ae(t,e))?Xt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Xt._abbr}function ae(t,e){if(null!==e){var n,i=Zt;if(e.abbr=t,null!=te[t])I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])i=te[e.parentLocale]._config;else{if(null==(n=re(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;i=n._config}return te[t]=new k(N(i,e)),ee[t]&&ee[t].forEach((function(t){ae(t.name,t.config)})),oe(t),te[t]}return delete te[t],null}function se(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Xt;if(!r(t)){if(e=re(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=ie(t[o]).split("-")).length,n=(n=ie(t[o+1]))?n.split("-"):null;e>0;){if(i=re(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&ne(r,n)>=e-1)break;e--}o++}return Xt}(t)}function ue(t){var e,n=t._a;return n&&-2===f(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>wt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,f(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),f(t)._overflowWeeks&&-1===e&&(e=7),f(t)._overflowWeekday&&-1===e&&(e=8),f(t).overflow=e),t}var he=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,le=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ce=/Z|[+-]\d\d(?::?\d\d)?/,de=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fe=/^\/?Date\((-?\d+)/i,_e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,me={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ye(t){var e,n,i,r,o,a,s=t._i,u=he.exec(s)||le.exec(s);if(u){for(f(t).iso=!0,e=0,n=de.length;e<n;e++)if(de[e][1].exec(u[1])){r=de[e][0],i=!1!==de[e][2];break}if(null==r)return void(t._isValid=!1);if(u[3]){for(e=0,n=pe.length;e<n;e++)if(pe[e][1].exec(u[3])){o=(u[2]||" ")+pe[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(u[4]){if(!ce.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=r+(o||"")+(a||""),Ee(t)}else t._isValid=!1}function ve(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ge(t){var e,n,i,r,o,a,s,u,h=_e.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(h){if(n=h[4],i=h[3],r=h[2],o=h[5],a=h[6],s=h[7],u=[ve(n),Ct.indexOf(i),parseInt(r,10),parseInt(o,10),parseInt(a,10)],s&&u.push(parseInt(s,10)),e=u,!function(t,e,n){return!t||Vt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}(h[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return me[t];if(e)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(h[8],h[9],h[10]),t._d=xt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function be(t,e,n){return null!=t?t:null!=e?e:n}function we(t){var e,n,r,o,a,s=[];if(!t._d){for(r=function(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,i,r,o,a,s,u,h;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=be(e.GG,t._a[0],Ft(Se(),1,4).year),i=be(e.W,1),((r=be(e.E,1))<1||r>7)&&(u=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,h=Ft(Se(),o,a),n=be(e.gg,t._a[0],h.year),i=be(e.w,h.week),null!=e.d?((r=e.d)<0||r>6)&&(u=!0):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(u=!0)):r=o),i<1||i>Ut(n,o,a)?f(t)._overflowWeeks=!0:null!=u?f(t)._overflowWeekday=!0:(s=Lt(n,i,r,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(a=be(t._a[0],r[0]),(t._dayOfYear>At(a)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),n=xt(a,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?xt:Rt).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(f(t).weekdayMismatch=!0)}}function Ee(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],f(t).empty=!0;var e,n,r,o,a,s,u=""+t._i,h=u.length,l=0;for(r=F(t._f,t._locale).match(A)||[],e=0;e<r.length;e++)o=r[e],(n=(u.match(ft(o,t))||[])[0])&&((a=u.substr(0,u.indexOf(n))).length>0&&f(t).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),l+=n.length),x[o]?(n?f(t).empty=!1:f(t).unusedTokens.push(o),bt(o,n,t)):t._strict&&!n&&f(t).unusedTokens.push(o);f(t).charsLeftOver=h-l,u.length>0&&f(t).unusedInput.push(u),t._a[3]<=12&&!0===f(t).bigHour&&t._a[3]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(s=f(t).era)&&(t._a[0]=t._locale.erasConvertYear(s,t._a[0])),we(t),ue(t)}else ge(t);else ye(t)}function Ce(t){var e=t._i,n=t._f;return t._locale=t._locale||se(t._l),null===e||void 0===n&&""===e?m({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),w(e)?new b(ue(e)):(l(e)?t._d=e:r(n)?function(t){var e,n,i,r,o,a,s=!1;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,a=!1,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Ee(e),_(e)&&(a=!0),o+=f(e).charsLeftOver,o+=10*f(e).unusedTokens.length,f(e).score=o,s?o<i&&(i=o,n=e):(null==i||o<i||a)&&(i=o,n=e,a&&(s=!0));d(t,n||e)}(t):n?Ee(t):function(t){var e=t._i;u(e)?t._d=new Date(i.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=fe.exec(t._i);null===e?(ye(t),!1===t._isValid&&(delete t._isValid,ge(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:i.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):r(e)?(t._a=c(e.slice(0),(function(t){return parseInt(t,10)})),we(t)):o(e)?function(t){if(!t._d){var e=V(t._i),n=void 0===e.day?e.date:e.day;t._a=c([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),we(t)}}(t):h(e)?t._d=new Date(e):i.createFromInputFallback(t)}(t),_(t)||(t._d=null),t))}function Te(t,e,n,i,a){var u,h={};return!0!==e&&!1!==e||(i=e,e=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(o(t)&&s(t)||r(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=a,h._l=n,h._i=t,h._f=e,h._strict=i,(u=new b(ue(Ce(h))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function Se(t,e,n,i){return Te(t,e,n,i,!1)}i.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Ie=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()})),Pe=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}));function Ne(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Se();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var ke=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Oe(t){var e=V(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,u=e.hour||0,h=e.minute||0,l=e.second||0,c=e.millisecond||0;this._isValid=function(t){var e,n,i=!1;for(e in t)if(a(t,e)&&(-1===mt.call(ke,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<ke.length;++n)if(t[ke[n]]){if(i)return!1;parseFloat(t[ke[n]])!==z(t[ke[n]])&&(i=!0)}return!0}(e),this._milliseconds=+c+1e3*l+6e4*h+1e3*u*60*60,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=se(),this._bubble()}function Ae(t){return t instanceof Oe}function De(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Re(t,e){M(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+O(~~(t/60),2)+e+O(~~t%60,2)}))}Re("Z",":"),Re("ZZ",""),pt("Z",ct),pt("ZZ",ct),vt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Me(ct,t)}));var xe=/([\+\-]|\d\d)/gi;function Me(t,e){var n,i,r=(e||"").match(t);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(xe)||["-",0,0])[1]+z(n[2]))?0:"+"===n[0]?i:-i}function Le(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(w(t)||l(t)?t.valueOf():Se(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Se(t).local()}function Fe(t){return-Math.round(t._d.getTimezoneOffset())}function Ue(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var je=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,He=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ve(t,e){var n,i,r,o,s,u,l=t,c=null;return Ae(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:h(t)||!isNaN(+t)?(l={},e?l[e]=+t:l.milliseconds=+t):(c=je.exec(t))?(n="-"===c[1]?-1:1,l={y:0,d:z(c[2])*n,h:z(c[3])*n,m:z(c[4])*n,s:z(c[5])*n,ms:z(De(1e3*c[6]))*n}):(c=He.exec(t))?(n="-"===c[1]?-1:1,l={y:We(c[2],n),M:We(c[3],n),w:We(c[4],n),d:We(c[5],n),h:We(c[6],n),m:We(c[7],n),s:We(c[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=Se(l.from),s=Se(l.to),r=o.isValid()&&s.isValid()?(s=Le(s,o),o.isBefore(s)?u=Ye(o,s):((u=Ye(s,o)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(l={}).ms=r.milliseconds,l.M=r.months),i=new Oe(l),Ae(t)&&a(t,"_locale")&&(i._locale=t._locale),Ae(t)&&a(t,"_isValid")&&(i._isValid=t._isValid),i}function We(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ye(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function qe(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(I(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Be(this,Ve(n,i),t),this}}function Be(t,e,n,r){var o=e._milliseconds,a=De(e._days),s=De(e._months);t.isValid()&&(r=null==r||r,s&&Nt(t,G(t,"Month")+s*n),a&&K(t,"Date",G(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&i.updateOffset(t,a||s))}Ve.fn=Oe.prototype,Ve.invalid=function(){return Ve(NaN)};var ze=qe(1,"add"),Qe=qe(-1,"subtract");function Ge(t){return"string"==typeof t||t instanceof String}function Ke(t){return w(t)||l(t)||Ge(t)||h(t)||function(t){var e=r(t),n=!1;return e&&(n=0===t.filter((function(e){return!h(e)&&Ge(t)})).length),e&&n}(t)||function(t){var e,n,i=o(t)&&!s(t),r=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<u.length;e+=1)n=u[e],r=r||a(t,n);return i&&r}(t)||null==t}function $e(t){var e,n=o(t)&&!s(t),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<r.length;e+=1)i=i||a(t,r[e]);return n&&i}function Xe(t,e){if(t.date()<e.date())return-Xe(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(n+1,"months")-i)))||0}function Je(t){var e;return void 0===t?this._locale._abbr:(null!=(e=se(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ze=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function tn(){return this._locale}function en(t,e){return(t%e+e)%e}function nn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function rn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function on(t,e){return e.erasAbbrRegex(t)}function an(){var t,e,n=[],i=[],r=[],o=[],a=this.eras();for(t=0,e=a.length;t<e;++t)i.push(_t(a[t].name)),n.push(_t(a[t].abbr)),r.push(_t(a[t].narrow)),o.push(_t(a[t].name)),o.push(_t(a[t].abbr)),o.push(_t(a[t].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function sn(t,e){M(0,[t,t.length],0,e)}function un(t,e,n,i,r){var o;return null==t?Ft(this,i,r).year:(e>(o=Ut(t,i,r))&&(e=o),hn.call(this,t,e,n,i,r))}function hn(t,e,n,i,r){var o=Lt(t,e,n,i,r),a=xt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}M("N",0,0,"eraAbbr"),M("NN",0,0,"eraAbbr"),M("NNN",0,0,"eraAbbr"),M("NNNN",0,0,"eraName"),M("NNNNN",0,0,"eraNarrow"),M("y",["y",1],"yo","eraYear"),M("y",["yy",2],0,"eraYear"),M("y",["yyy",3],0,"eraYear"),M("y",["yyyy",4],0,"eraYear"),pt("N",on),pt("NN",on),pt("NNN",on),pt("NNNN",(function(t,e){return e.erasNameRegex(t)})),pt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),vt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?f(n).era=r:f(n).invalidEra=t})),pt("y",ut),pt("yy",ut),pt("yyy",ut),pt("yyyy",ut),pt("yo",(function(t,e){return e._eraYearOrdinalRegex||ut})),vt(["y","yy","yyy","yyyy"],0),vt(["yo"],(function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[0]=n._locale.eraYearOrdinalParse(t,r):e[0]=parseInt(t,10)})),M(0,["gg",2],0,(function(){return this.weekYear()%100})),M(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),sn("gggg","weekYear"),sn("ggggg","weekYear"),sn("GGGG","isoWeekYear"),sn("GGGGG","isoWeekYear"),j("weekYear","gg"),j("isoWeekYear","GG"),Y("weekYear",1),Y("isoWeekYear",1),pt("G",ht),pt("g",ht),pt("GG",nt,J),pt("gg",nt,J),pt("GGGG",at,tt),pt("gggg",at,tt),pt("GGGGG",st,et),pt("ggggg",st,et),gt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=z(t)})),gt(["gg","GG"],(function(t,e,n,r){e[r]=i.parseTwoDigitYear(t)})),M("Q",0,"Qo","quarter"),j("quarter","Q"),Y("quarter",7),pt("Q",X),vt("Q",(function(t,e){e[1]=3*(z(t)-1)})),M("D",["DD",2],"Do","date"),j("date","D"),Y("date",9),pt("D",nt),pt("DD",nt,J),pt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),vt(["D","DD"],2),vt("Do",(function(t,e){e[2]=z(t.match(nt)[0])}));var ln=Q("Date",!0);M("DDD",["DDDD",3],"DDDo","dayOfYear"),j("dayOfYear","DDD"),Y("dayOfYear",4),pt("DDD",ot),pt("DDDD",Z),vt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=z(t)})),M("m",["mm",2],0,"minute"),j("minute","m"),Y("minute",14),pt("m",nt),pt("mm",nt,J),vt(["m","mm"],4);var cn=Q("Minutes",!1);M("s",["ss",2],0,"second"),j("second","s"),Y("second",15),pt("s",nt),pt("ss",nt,J),vt(["s","ss"],5);var dn,pn,fn=Q("Seconds",!1);for(M("S",0,0,(function(){return~~(this.millisecond()/100)})),M(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),M(0,["SSS",3],0,"millisecond"),M(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),M(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),M(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),M(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),M(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),M(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),j("millisecond","ms"),Y("millisecond",16),pt("S",ot,X),pt("SS",ot,J),pt("SSS",ot,Z),dn="SSSS";dn.length<=9;dn+="S")pt(dn,ut);function _n(t,e){e[6]=z(1e3*("0."+t))}for(dn="S";dn.length<=9;dn+="S")vt(dn,_n);pn=Q("Milliseconds",!1),M("z",0,0,"zoneAbbr"),M("zz",0,0,"zoneName");var mn=b.prototype;function yn(t){return t}mn.add=ze,mn.calendar=function(t,e){1===arguments.length&&(arguments[0]?Ke(arguments[0])?(t=arguments[0],e=void 0):$e(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Se(),r=Le(n,this).startOf("day"),o=i.calendarFormat(this,r)||"sameElse",a=e&&(P(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,Se(n)))},mn.clone=function(){return new b(this)},mn.diff=function(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=Le(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=H(e)){case"year":o=Xe(this,i)/12;break;case"month":o=Xe(this,i);break;case"quarter":o=Xe(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:B(o)},mn.endOf=function(t){var e,n;if(void 0===(t=H(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-en(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-en(e,1e3)-1}return this._d.setTime(e),i.updateOffset(this,!0),this},mn.format=function(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=L(this,t);return this.localeData().postformat(e)},mn.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Se(t).isValid())?Ve({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.fromNow=function(t){return this.from(Se(),t)},mn.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Se(t).isValid())?Ve({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.toNow=function(t){return this.to(Se(),t)},mn.get=function(t){return P(this[t=H(t)])?this[t]():this},mn.invalidAt=function(){return f(this).overflow},mn.isAfter=function(t,e){var n=w(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=H(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},mn.isBefore=function(t,e){var n=w(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=H(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},mn.isBetween=function(t,e,n,i){var r=w(t)?t:Se(t),o=w(e)?e:Se(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n)))},mn.isSame=function(t,e){var n,i=w(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=H(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},mn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},mn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},mn.isValid=function(){return _(this)},mn.lang=Ze,mn.locale=Je,mn.localeData=tn,mn.max=Pe,mn.min=Ie,mn.parsingFlags=function(){return d({},f(this))},mn.set=function(t,e){if("object"==typeof t){var n,i=function(t){var e,n=[];for(e in t)a(t,e)&&n.push({unit:e,priority:W[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=V(t));for(n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(P(this[t=H(t)]))return this[t](e);return this},mn.startOf=function(t){var e,n;if(void 0===(t=H(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=en(e,6e4);break;case"second":e=this._d.valueOf(),e-=en(e,1e3)}return this._d.setTime(e),i.updateOffset(this,!0),this},mn.subtract=Qe,mn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},mn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},mn.toDate=function(){return new Date(this.valueOf())},mn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?L(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):P(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",L(n,"Z")):L(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(mn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),mn.toJSON=function(){return this.isValid()?this.toISOString():null},mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mn.unix=function(){return Math.floor(this.valueOf()/1e3)},mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mn.eraName=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].name;if(i[t].until<=n&&n<=i[t].since)return i[t].name}return""},mn.eraNarrow=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].narrow;if(i[t].until<=n&&n<=i[t].since)return i[t].narrow}return""},mn.eraAbbr=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].abbr;if(i[t].until<=n&&n<=i[t].since)return i[t].abbr}return""},mn.eraYear=function(){var t,e,n,r,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(n=o[t].since<=o[t].until?1:-1,r=this.clone().startOf("day").valueOf(),o[t].since<=r&&r<=o[t].until||o[t].until<=r&&r<=o[t].since)return(this.year()-i(o[t].since).year())*n+o[t].offset;return this.year()},mn.year=Dt,mn.isLeapYear=function(){return q(this.year())},mn.weekYear=function(t){return un.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mn.isoWeekYear=function(t){return un.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},mn.quarter=mn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},mn.month=kt,mn.daysInMonth=function(){return wt(this.year(),this.month())},mn.week=mn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},mn.isoWeek=mn.isoWeeks=function(t){var e=Ft(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},mn.weeksInYear=function(){var t=this.localeData()._week;return Ut(this.year(),t.dow,t.doy)},mn.weeksInWeekYear=function(){var t=this.localeData()._week;return Ut(this.weekYear(),t.dow,t.doy)},mn.isoWeeksInYear=function(){return Ut(this.year(),1,4)},mn.isoWeeksInISOWeekYear=function(){return Ut(this.isoWeekYear(),1,4)},mn.date=ln,mn.day=mn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},mn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},mn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},mn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},mn.hour=mn.hours=Jt,mn.minute=mn.minutes=cn,mn.second=mn.seconds=fn,mn.millisecond=mn.milliseconds=pn,mn.utcOffset=function(t,e,n){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Me(ct,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(r=Fe(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!e||this._changeInProgress?Be(this,Ve(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Fe(this)},mn.utc=function(t){return this.utcOffset(0,t)},mn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this},mn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Me(lt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},mn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60==0)},mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mn.isUtc=Ue,mn.isUTC=Ue,mn.zoneAbbr=function(){return this._isUTC?"UTC":""},mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mn.dates=C("dates accessor is deprecated. Use date instead.",ln),mn.months=C("months accessor is deprecated. Use month instead",kt),mn.years=C("years accessor is deprecated. Use year instead",Dt),mn.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),mn.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var t,e={};return g(e,this),(e=Ce(e))._a?(t=e._isUTC?p(e._a):Se(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&z(t[i])!==z(e[i]))&&a++;return a+o}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var vn=k.prototype;function gn(t,e,n,i){var r=se(),o=p().set(i,e);return r[n](o,t)}function bn(t,e,n){if(h(t)&&(e=t,t=void 0),t=t||"",null!=e)return gn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=gn(t,i,n,"month");return r}function wn(t,e,n,i){"boolean"==typeof t?(h(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,h(e)&&(n=e,e=void 0),e=e||"");var r,o=se(),a=t?o._week.dow:0,s=[];if(null!=n)return gn(e,(n+a)%7,i,"day");for(r=0;r<7;r++)s[r]=gn(e,(r+a)%7,i,"day");return s}vn.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return P(i)?i.call(e,n):i},vn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(A).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},vn.invalidDate=function(){return this._invalidDate},vn.ordinal=function(t){return this._ordinal.replace("%d",t)},vn.preparse=yn,vn.postformat=yn,vn.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return P(r)?r(t,e,n,i):r.replace(/%d/i,t)},vn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return P(n)?n(e):n.replace(/%s/i,e)},vn.set=function(t){var e,n;for(n in t)a(t,n)&&(P(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},vn.eras=function(t,e){var n,r,o,a=this._eras||se("en")._eras;for(n=0,r=a.length;n<r;++n){switch(typeof a[n].since){case"string":o=i(a[n].since).startOf("day"),a[n].since=o.valueOf()}switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=i(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}}return a},vn.erasParse=function(t,e,n){var i,r,o,a,s,u=this.eras();for(t=t.toUpperCase(),i=0,r=u.length;i<r;++i)if(o=u[i].name.toUpperCase(),a=u[i].abbr.toUpperCase(),s=u[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return u[i];break;case"NNNN":if(o===t)return u[i];break;case"NNNNN":if(s===t)return u[i]}else if([o,a,s].indexOf(t)>=0)return u[i]},vn.erasConvertYear=function(t,e){var n=t.since<=t.until?1:-1;return void 0===e?i(t.since).year():i(t.since).year()+(e-t.offset)*n},vn.erasAbbrRegex=function(t){return a(this,"_erasAbbrRegex")||an.call(this),t?this._erasAbbrRegex:this._erasRegex},vn.erasNameRegex=function(t){return a(this,"_erasNameRegex")||an.call(this),t?this._erasNameRegex:this._erasRegex},vn.erasNarrowRegex=function(t){return a(this,"_erasNarrowRegex")||an.call(this),t?this._erasNarrowRegex:this._erasRegex},vn.months=function(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Tt).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone},vn.monthsShort=function(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Tt.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},vn.monthsParse=function(t,e,n){var i,r,o;if(this._monthsParseExact)return Pt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},vn.monthsRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||Ot.call(this),t?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=It),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},vn.monthsShortRegex=function(t){return this._monthsParseExact?(a(this,"_monthsRegex")||Ot.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=St),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},vn.week=function(t){return Ft(t,this._week.dow,this._week.doy).week},vn.firstDayOfYear=function(){return this._week.doy},vn.firstDayOfWeek=function(){return this._week.dow},vn.weekdays=function(t,e){var n=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?jt(n,this._week.dow):t?n[t.day()]:n},vn.weekdaysMin=function(t){return!0===t?jt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},vn.weekdaysShort=function(t){return!0===t?jt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},vn.weekdaysParse=function(t,e,n){var i,r,o;if(this._weekdaysParseExact)return zt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},vn.weekdaysRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Yt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},vn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},vn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},vn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},vn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},oe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===z(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=C("moment.lang is deprecated. Use moment.locale instead.",oe),i.langData=C("moment.langData is deprecated. Use moment.localeData instead.",se);var En=Math.abs;function Cn(t,e,n,i){var r=Ve(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function Tn(t){return t<0?Math.floor(t):Math.ceil(t)}function Sn(t){return 4800*t/146097}function In(t){return 146097*t/4800}function Pn(t){return function(){return this.as(t)}}var Nn=Pn("ms"),kn=Pn("s"),On=Pn("m"),An=Pn("h"),Dn=Pn("d"),Rn=Pn("w"),xn=Pn("M"),Mn=Pn("Q"),Ln=Pn("y");function Fn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Un=Fn("milliseconds"),jn=Fn("seconds"),Hn=Fn("minutes"),Vn=Fn("hours"),Wn=Fn("days"),Yn=Fn("months"),qn=Fn("years"),Bn=Math.round,zn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Qn(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}var Gn=Math.abs;function Kn(t){return(t>0)-(t<0)||+t}function $n(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i,r,o,a,s,u=Gn(this._milliseconds)/1e3,h=Gn(this._days),l=Gn(this._months),c=this.asSeconds();return c?(t=B(u/60),e=B(t/60),u%=60,t%=60,n=B(l/12),l%=12,i=u?u.toFixed(3).replace(/\.?0+$/,""):"",r=c<0?"-":"",o=Kn(this._months)!==Kn(c)?"-":"",a=Kn(this._days)!==Kn(c)?"-":"",s=Kn(this._milliseconds)!==Kn(c)?"-":"",r+"P"+(n?o+n+"Y":"")+(l?o+l+"M":"")+(h?a+h+"D":"")+(e||t||u?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(u?s+i+"S":"")):"P0D"}var Xn=Oe.prototype;return Xn.isValid=function(){return this._isValid},Xn.abs=function(){var t=this._data;return this._milliseconds=En(this._milliseconds),this._days=En(this._days),this._months=En(this._months),t.milliseconds=En(t.milliseconds),t.seconds=En(t.seconds),t.minutes=En(t.minutes),t.hours=En(t.hours),t.months=En(t.months),t.years=En(t.years),this},Xn.add=function(t,e){return Cn(this,t,e,1)},Xn.subtract=function(t,e){return Cn(this,t,e,-1)},Xn.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=H(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+Sn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(In(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},Xn.asMilliseconds=Nn,Xn.asSeconds=kn,Xn.asMinutes=On,Xn.asHours=An,Xn.asDays=Dn,Xn.asWeeks=Rn,Xn.asMonths=xn,Xn.asQuarters=Mn,Xn.asYears=Ln,Xn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*z(this._months/12):NaN},Xn._bubble=function(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Tn(In(s)+a),a=0,s=0),u.milliseconds=o%1e3,t=B(o/1e3),u.seconds=t%60,e=B(t/60),u.minutes=e%60,n=B(e/60),u.hours=n%24,a+=B(n/24),r=B(Sn(a)),s+=r,a-=Tn(In(r)),i=B(s/12),s%=12,u.days=a,u.months=s,u.years=i,this},Xn.clone=function(){return Ve(this)},Xn.get=function(t){return t=H(t),this.isValid()?this[t+"s"]():NaN},Xn.milliseconds=Un,Xn.seconds=jn,Xn.minutes=Hn,Xn.hours=Vn,Xn.days=Wn,Xn.weeks=function(){return B(this.days()/7)},Xn.months=Yn,Xn.years=qn,Xn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=zn;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(r=t),"object"==typeof e&&(o=Object.assign({},zn,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),n=this.localeData(),i=function(t,e,n,i){var r=Ve(t).abs(),o=Bn(r.as("s")),a=Bn(r.as("m")),s=Bn(r.as("h")),u=Bn(r.as("d")),h=Bn(r.as("M")),l=Bn(r.as("w")),c=Bn(r.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(d=d||l<=1&&["w"]||l<n.w&&["ww",l]),(d=d||h<=1&&["M"]||h<n.M&&["MM",h]||c<=1&&["y"]||["yy",c])[2]=e,d[3]=+t>0,d[4]=i,Qn.apply(null,d)}(this,!r,o,n),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},Xn.toISOString=$n,Xn.toString=$n,Xn.toJSON=$n,Xn.locale=Je,Xn.localeData=tn,Xn.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),Xn.lang=Ze,M("X",0,0,"unix"),M("x",0,0,"valueOf"),pt("x",ht),pt("X",/[+-]?\d+(\.\d{1,3})?/),vt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),vt("x",(function(t,e,n){n._d=new Date(z(t))})),
//! moment.js
i.version="2.29.0",e=Se,i.fn=mn,i.min=function(){var t=[].slice.call(arguments,0);return Ne("isBefore",t)},i.max=function(){var t=[].slice.call(arguments,0);return Ne("isAfter",t)},i.now=function(){return Date.now?Date.now():+new Date},i.utc=p,i.unix=function(t){return Se(1e3*t)},i.months=function(t,e){return bn(t,e,"months")},i.isDate=l,i.locale=oe,i.invalid=m,i.duration=Ve,i.isMoment=w,i.weekdays=function(t,e,n){return wn(t,e,n,"weekdays")},i.parseZone=function(){return Se.apply(null,arguments).parseZone()},i.localeData=se,i.isDuration=Ae,i.monthsShort=function(t,e){return bn(t,e,"monthsShort")},i.weekdaysMin=function(t,e,n){return wn(t,e,n,"weekdaysMin")},i.defineLocale=ae,i.updateLocale=function(t,e){if(null!=e){var n,i,r=Zt;null!=te[t]&&null!=te[t].parentLocale?te[t].set(N(te[t]._config,e)):(null!=(i=re(t))&&(r=i._config),e=N(r,e),null==i&&(e.abbr=t),(n=new k(e)).parentLocale=te[t],te[t]=n),oe(t)}else null!=te[t]&&(null!=te[t].parentLocale?(te[t]=te[t].parentLocale,t===oe()&&oe(t)):null!=te[t]&&delete te[t]);return te[t]},i.locales=function(){return T(te)},i.weekdaysShort=function(t,e,n){return wn(t,e,n,"weekdaysShort")},i.normalizeUnits=H,i.relativeTimeRounding=function(t){return void 0===t?Bn:"function"==typeof t&&(Bn=t,!0)},i.relativeTimeThreshold=function(t,e){return void 0!==zn[t]&&(void 0===e?zn[t]:(zn[t]=e,"s"===t&&(zn.ss=e-1),!0))},i.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=mn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()})),si=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),fn(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:pn(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),ui=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return mn(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),hi=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new si(e)}}catch(t){}return new ui},li=hi("localStorage"),ci=hi("sessionStorage"),di=new Vn("@firebase/database"),pi=(oi=1,function(){return oi++}),fi=function(t){var e=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var o=r-55296;i++,Xe(i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(o<<10)+(t.charCodeAt(i)-56320)}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e}(t),n=new bn;n.update(e);var i=n.digest();return tn.encodeByteArray(i)},_i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++){var r=t[i];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=_i.apply(null,r):n+="object"==typeof r?fn(r):r,n+=" "}return n},mi=null,yi=!0,vi=function(t,e){Xe(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(di.logLevel=xn.VERBOSE,mi=di.log.bind(di),e&&ci.set("logging_enabled",!0)):"function"==typeof t?mi=t:(mi=null,ci.remove("logging_enabled"))},gi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===yi&&(yi=!1,null===mi&&!0===ci.get("logging_enabled")&&vi(!0)),mi){var n=_i.apply(null,t);mi(n)}},bi=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];gi.apply(void 0,Ge([t],e))}},wi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_i.apply(void 0,Ge(t));di.error(n)},Ei=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_i.apply(void 0,Ge(t));throw di.error(n),new Error(n)},Ci=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_i.apply(void 0,Ge(t));di.warn(n)},Ti=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Si="[MIN_NAME]",Ii="[MAX_NAME]",Pi=function(t,e){if(t===e)return 0;if(t===Si||e===Ii)return-1;if(e===Si||t===Ii)return 1;var n=Mi(t),i=Mi(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1},Ni=function(t,e){return t===e?0:t<e?-1:1},ki=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+fn(e))},Oi=function(t){if("object"!=typeof t||null===t)return fn(t);var e=[];for(var n in t)e.push(n);e.sort();for(var i="{",r=0;r<e.length;r++)0!==r&&(i+=","),i+=fn(e[r]),i+=":",i+=Oi(t[e[r]]);return i+="}"},Ai=function(t,e){var n=t.length;if(n<=e)return[t];for(var i=[],r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Ri=function(t){Xe(!Ti(t),"Invalid JSON number");var e,n,i,r,o;0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var h=parseInt(s.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),u+=h}return u.toLowerCase()},xi=new RegExp("^-?(0*)\\d{1,10}$"),Mi=function(t){if(xi.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Li=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Ci("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Fi=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Ui=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var r=e.split("/");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var i=e.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),r=0;r<n.length&&r<i.length;r++){var o=Pi(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),ji=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Nn(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Nn(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Nn(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Hi=function(){function t(t,e,n,i,r,o,a){void 0===r&&(r=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=li.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&li.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Xe("string"==typeof t,"typeof type must == string"),Xe("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var i=[];return Di(e,(function(t,e){i.push(t+"="+e)})),n+i.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var Vi,Wi,Yi,qi,Bi,zi=function(t,e){var n=Qi(t),i=n.namespace;"firebase.com"===n.domain&&Ei(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ci("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Hi(n.host,n.secure,i,e,r,"",i!==n.subdomain),path:new Ui(n.pathString)}},Qi=function(t){var e="",n="",i="",r="",o="",a=!0,s="https",u=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(s=t.substring(0,h-1),t=t.substring(h+2));var l=t.indexOf("/");-1===l&&(l=t.length);var c=t.indexOf("?");-1===c&&(c=t.length),e=t.substring(0,Math.min(l,c)),l<c&&(r=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}e+="/"+r}return e}(t.substring(l,c)));var d=function(t){var e,n,i={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var r=ze(t.split("&")),o=r.next();!o.done;o=r.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?i[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ci("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}(t.substring(Math.min(t.length,c)));(h=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(h+1),10)):h=e.length;var p=e.slice(0,h);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var f=e.indexOf(".");i=e.substring(0,f).toLowerCase(),n=e.substring(f+1),o=i}"ns"in d&&(o=d.ns)}return{host:e,port:u,domain:n,subdomain:i,secure:a,scheme:s,pathString:r,namespace:o}},Gi=/[\[\].#$\/\u0000-\u001F\u007F]/,Ki=/[\[\].#$\u0000-\u001F\u007F]/,$i=function(t){return"string"==typeof t&&0!==t.length&&!Gi.test(t)},Xi=function(t){return"string"==typeof t&&0!==t.length&&!Ki.test(t)},Ji=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ti(t)||t&&"object"==typeof t&&mn(t,".sv")},Zi=function(t,e,n,i,r){r&&void 0===n||tr(Sn(t,e,r),n,i)},tr=function(t,e,n){var i=n instanceof Ui?new ji(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+e.toString());if(Ti(e))throw new Error(t+"contains "+e.toString()+" "+i.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Nn(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var r=!1,o=!1;if(Di(e,(function(e,n){if(".value"===e)r=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!$i(e)))throw new Error(t+" contains an invalid key ("+e+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(e),tr(t,n,i),i.pop()})),r&&o)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},er=function(t,e,n,i,r){if(!r||void 0!==n){var o=Sn(t,e,r);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];Di(n,(function(t,e){var n=new Ui(t);if(tr(o,e,i.child(n)),".priority"===n.getBack()&&!Ji(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,i;for(n=0;n<e.length;n++)for(var r=(i=e[n]).slice(),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!$i(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ui.comparePaths);var a=null;for(n=0;n<e.length;n++){if(i=e[n],null!==a&&a.contains(i))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}}(o,a)}},nr=function(t,e,n,i){if(!i||void 0!==n){if(Ti(n))throw new Error(Sn(t,e,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ji(n))throw new Error(Sn(t,e,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ir=function(t,e,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Sn(t,e,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},rr=function(t,e,n,i){if(!(i&&void 0===n||$i(n)))throw new Error(Sn(t,e,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},or=function(t,e,n,i){if(!(i&&void 0===n||Xi(n)))throw new Error(Sn(t,e,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ar=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),or(t,e,n,i)},sr=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},ur=function(t,e,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!$i(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Xi(t)}(i))throw new Error(Sn(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},hr=function(t,e,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw new Error(Sn(t,e,i)+"must be a boolean.")},lr=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Tn("OnDisconnect.cancel",0,1,arguments.length),In("OnDisconnect.cancel",1,t,!0);var e=new on;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Tn("OnDisconnect.remove",0,1,arguments.length),sr("OnDisconnect.remove",this.path_),In("OnDisconnect.remove",1,t,!0);var e=new on;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Tn("OnDisconnect.set",1,2,arguments.length),sr("OnDisconnect.set",this.path_),Zi("OnDisconnect.set",1,t,this.path_,!1),In("OnDisconnect.set",2,e,!0);var n=new on;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Tn("OnDisconnect.setWithPriority",2,3,arguments.length),sr("OnDisconnect.setWithPriority",this.path_),Zi("OnDisconnect.setWithPriority",1,t,this.path_,!1),nr("OnDisconnect.setWithPriority",2,e,!1),In("OnDisconnect.setWithPriority",3,n,!0);var i=new on;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,i.wrapCallback(n)),i.promise},t.prototype.update=function(t,e){if(Tn("OnDisconnect.update",1,2,arguments.length),sr("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,Ci("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}er("OnDisconnect.update",1,t,this.path_,!1),In("OnDisconnect.update",2,e,!0);var r=new on;return this.repo_.onDisconnectUpdate(this.path_,t,r.wrapCallback(e)),r.promise},t}(),cr=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Tn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),dr=(Vi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wi=0,Yi=[],function(t){var e,n=t===Wi;Wi=t;var i=new Array(8);for(e=7;e>=0;e--)i[e]=Vi.charAt(t%64),t=Math.floor(t/64);Xe(0===t,"Cannot push at time == 0");var r=i.join("");if(n){for(e=11;e>=0&&63===Yi[e];e--)Yi[e]=0;Yi[e]++}else for(e=0;e<12;e++)Yi[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)r+=Vi.charAt(Yi[e]);return Xe(20===r.length,"nextPushId: Length should be 20."),r}),pr=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),fr=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new pr(Si,t),i=new pr(Si,e);return 0!==this.compare(n,i)},t.prototype.minPost=function(){return pr.MIN},t}(),_r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return We(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return qi},set:function(t){qi=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Pi(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Je("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return pr.MIN},e.prototype.maxPost=function(){return new pr(Ii,qi)},e.prototype.makePost=function(t,e){return Xe("string"==typeof t,"KeyIndex indexValue must always be a string."),new pr(t,qi)},e.prototype.toString=function(){return".key"},e}(fr),mr=new _r;var yr,vr,gr,br=function(t){return"number"==typeof t?"number:"+Ri(t):"string:"+t},wr=function(t){if(t.isLeafNode()){var e=t.val();Xe("string"==typeof e||"number"==typeof e||"object"==typeof e&&mn(e,".sv"),"Priority must be a string or number.")}else Xe(t===Bi||t.isEmpty(),"priority of unexpected type.");Xe(t===Bi||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Er=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Xe(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),wr(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return yr},set:function(t){yr=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var i=e.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(Xe(".priority"!==i||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+br(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Ri(this.value_):this.value_,this.lazyHash_=fi(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Xe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,i=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(i);return Xe(r>=0,"Unknown leaf type: "+n),Xe(o>=0,"Unknown leaf type: "+i),r===o?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Cr,Tr,Sr=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return We(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?Pi(t.name,e.name):r},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return pr.MIN},e.prototype.maxPost=function(){return new pr(Ii,new Er("[PRIORITY-POST]",gr))},e.prototype.makePost=function(t,e){var n=vr(t);return new pr(e,new Er("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(fr)),Ir=function(){function t(t,e,n,i,r){void 0===r&&(r=null),this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pr=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:kr.EMPTY_NODE,this.right=null!=o?o:kr.EMPTY_NODE}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return kr.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,i;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return kr.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nr=function(){function t(){}return t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new Pr(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),kr=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pr.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pr.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,i=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ir(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ir(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ir(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ir(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nr,t}(),Or=Math.log(2),Ar=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Or,10)),this.current_=this.count-1;var n,i=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&i}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dr=function(t,e,n,i){t.sort(e);var r=function(e,i){var o,a,s=i-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Pr(a,o.node,Pr.BLACK,null,null);var u=parseInt(s/2,10)+e,h=r(e,u),l=r(u+1,i);return o=t[u],a=n?n(o):o,new Pr(a,o.node,Pr.BLACK,h,l)},o=function(e){for(var i=null,o=null,a=t.length,s=function(e,i){var o=a-e,s=a;a-=e;var h=r(o+1,s),l=t[o],c=n?n(l):l;u(new Pr(c,l.node,i,null,h))},u=function(t){i?(i.left=t,i=t):(o=t,i=t)},h=0;h<e.count;++h){var l=e.nextBitIsOne(),c=Math.pow(2,e.count-(h+1));l?s(c,Pr.BLACK):(s(c,Pr.BLACK),s(c,Pr.RED))}return o}(new Ar(t.length));return new kr(i||e,o)},Rr={},xr=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Xe(Rr&&Sr,"ChildrenNode.ts has not been loaded"),Cr=Cr||new t({".priority":Rr},{".priority":Sr})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=yn(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof kr?e:null},t.prototype.hasIndex=function(t){return mn(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Xe(e!==mr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,r=[],o=!1,a=n.getIterator(pr.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),r.push(s),s=a.getNext();i=o?Dr(r,e.getCompare()):Rr;var u=e.toString(),h=Ye({},this.indexSet_);h[u]=e;var l=Ye({},this.indexes_);return l[u]=i,new t(l,h)},t.prototype.addToIndexes=function(e,n){var i=this;return new t(gn(this.indexes_,(function(t,r){var o=yn(i.indexSet_,r);if(Xe(o,"Missing index implementation for "+r),t===Rr){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(pr.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),Dr(a,o.getCompare())}return Rr}var h=n.get(e.name),l=t;return h&&(l=l.remove(new pr(e.name,h))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(gn(this.indexes_,(function(t){if(t===Rr)return t;var i=n.get(e.name);return i?t.remove(new pr(e.name,i)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mr(t,e){return Pi(t.name,e.name)}function Lr(t,e){return Pi(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&wr(this.priorityNode_),this.children_.isEmpty()&&Xe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Tr||(Tr=new t(new kr(Lr),null,xr.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Tr},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Tr:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Xe(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var i=new pr(e,n),r=void 0,o=void 0;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));var a=r.isEmpty()?Tr:this.priorityNode_;return new t(r,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Xe(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},i=0,r=0,o=!0;if(this.forEachChild(Sr,(function(a,s){n[a]=s.val(e),i++,o&&t.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1})),!e&&o&&r<2*i){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+br(this.getPriority().val())+":"),this.forEachChild(Sr,(function(e,n){var i=n.hash();""!==i&&(t+=":"+e+":"+i)})),this.lazyHash_=""===t?"":fi(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new pr(t,e));return r?r.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new pr(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new pr(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getIteratorFrom(t.name,pr.Wrap),r=i.peek();null!=r&&e.compare(r,t)<0;)i.getNext(),r=i.peek();return i},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getReverseIteratorFrom(t.name,pr.Wrap),r=i.peek();null!=r&&e.compare(r,t)>0;)i.getNext(),r=i.peek();return i},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ur?-1:0},t.prototype.withIndex=function(e){if(e===mr||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===mr||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Sr),i=e.getIterator(Sr),r=n.getNext(),o=i.getNext();r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=n.getNext(),o=i.getNext()}return null===r&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===mr?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ur=new(function(t){function e(){return t.call(this,new kr(Lr),Fr.EMPTY_NODE,xr.Default)||this}return We(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Fr.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Fr));Object.defineProperties(pr,{MIN:{value:new pr(Si,Fr.EMPTY_NODE)},MAX:{value:new pr(Ii,Ur)}}),_r.__EMPTY_NODE=Fr.EMPTY_NODE,Er.__childrenNodeConstructor=Fr,Bi=Ur,function(t){gr=t}(Ur);function jr(t,e){if(void 0===e&&(e=null),null===t)return Fr.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Xe(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Er(t,jr(e));if(t instanceof Array){var n=Fr.EMPTY_NODE;return Di(t,(function(e,i){if(mn(t,e)&&"."!==e.substring(0,1)){var r=jr(i);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r))}})),n.updatePriority(jr(e))}var i=[],r=!1;if(Di(t,(function(t,e){if("."!==t.substring(0,1)){var n=jr(e);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),i.push(new pr(t,n)))}})),0===i.length)return Fr.EMPTY_NODE;var o=Dr(i,Mr,(function(t){return t.name}),Lr);if(r){var a=Dr(i,Sr.getCompare());return new Fr(o,jr(e),new xr({".priority":a},{".priority":Sr}))}return new Fr(o,jr(e),xr.Default)}!function(t){vr=t}(jr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hr,Vr=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return We(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Pi(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return pr.MIN},e.prototype.maxPost=function(){return pr.MAX},e.prototype.makePost=function(t,e){var n=jr(t);return new pr(e,n)},e.prototype.toString=function(){return".value"},e}(fr)),Wr=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Xe(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return We(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?Pi(t.name,e.name):r},e.prototype.makePost=function(t,e){var n=jr(t),i=Fr.EMPTY_NODE.updateChild(this.indexPath_,n);return new pr(e,i)},e.prototype.maxPost=function(){var t=Fr.EMPTY_NODE.updateChild(this.indexPath_,Ur);return new pr(Ii,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(fr),Yr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Tn("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Tn("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Tn("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Tn("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Tn("DataSnapshot.child",0,1,arguments.length),e=String(e),or("DataSnapshot.child",1,e,!1);var n=new Ui(e),i=this.ref_.child(n);return new t(this.node_.getChild(n),i,Sr)},t.prototype.hasChild=function(t){Tn("DataSnapshot.hasChild",1,1,arguments.length),or("DataSnapshot.hasChild",1,t,!1);var e=new Ui(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Tn("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Tn("DataSnapshot.forEach",1,1,arguments.length),In("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,(function(i,r){return e(new t(r,n.ref_.child(i),Sr))}))},t.prototype.hasChildren=function(){return Tn("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Tn("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Tn("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),qr=function(){function t(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+fn(this.snapshot.exportVal())},t}(),Br=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),zr=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new qr("value",this,new Yr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Xe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callback_;return function(){i.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Br(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Qr=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,mn(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Br(this,t,e):null},t.prototype.createEvent=function(t,e){Xe(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),i=e.getQueryParams().getIndex();return new qr(t.type,this,new Yr(t.snapshotNode,n,i),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Xe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callbacks_[t.eventType];return function(){i.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var i=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),o=i.length;if(o===r.length){if(1===o){var a=i[0],s=r[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return r.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Gr=function(){function t(t,e,n,i){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Xe(Hr,"Reference.ts has not been loaded"),Hr},set:function(t){Hr=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===mr){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Si)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==Ii)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(t.getIndex()===Sr){if(null!=e&&!Ji(e)||null!=n&&!Ji(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Xe(t.getIndex()instanceof Wr||t.getIndex()===Vr,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Tn("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,i,r){Tn("Query.on",2,4,arguments.length),ir("Query.on",1,e,!1),In("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",i,r);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var i=new zr(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(t,e,n){var i=new Qr(t,e,n);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(t,e,n){Tn("Query.off",0,3,arguments.length),ir("Query.off",1,t,!0),In("Query.off",2,e,!0),Pn("Query.off",3,n,!0);var i=null,r=null;if("value"===t){var o=e||null;i=new zr(o,null,n||null)}else t&&(e&&((r={})[t]=e),i=new Qr(r,null,n||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,i,r){var o=this;Tn("Query.once",1,4,arguments.length),ir("Query.once",1,e,!1),In("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",i,r),s=!0,u=new on;u.promise.catch((function(){}));var h=function(t){s&&(s=!1,o.off(e,h),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,h,(function(t){o.off(e,h),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Tn("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Tn("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Tn("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');or("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Ui(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new Wr(n),r=this.queryParams_.orderBy(i);return t.validateQueryEndpoints_(r),new t(this.repo,this.path,r,!0)},t.prototype.orderByKey=function(){Tn("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(mr);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Tn("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Sr);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Tn("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Vr);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Tn("Query.startAt",0,2,arguments.length),Zi("Query.startAt",1,e,this.path,!0),rr("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Tn("Query.endAt",0,2,arguments.length),Zi("Query.endAt",1,e,this.path,!0),rr("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Tn("Query.equalTo",1,2,arguments.length),Zi("Query.equalTo",1,t,this.path,!1),rr("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Tn("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Tn("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Oi(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Tn("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var i=this.repo===e.repo,r=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return i&&r&&o},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,In(t,3,i.cancel,!0),i.context=n,Pn(t,4,i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error(Sn(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Kr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),$r=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Xr=function(t,e,n){return t&&"object"==typeof t?(Xe(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Jr(t[".sv"],e,n):"object"==typeof t[".sv"]?Zr(t[".sv"],e):void Xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Jr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Xe(!1,"Unexpected server value: "+t)}},Zr=function(t,e,n){t.hasOwnProperty("increment")||Xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var i=t.increment;"number"!=typeof i&&Xe(!1,"Unexpected increment value: "+i);var r=e.node();if(Xe(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;var o=r.getValue();return"number"!=typeof o?i:o+i},to=function(t,e,n,i){return no(e,new $r(n,t),i)},eo=function(t,e,n){return no(t,new Kr(e),n)};function no(t,e,n){var i,r=t.getPriority().val(),o=Xr(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=Xr(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Er(s,jr(o)):t}var u=t;return i=u,o!==u.getPriority().val()&&(i=i.updatePriority(new Er(o))),u.forEachChild(Sr,(function(t,r){var o=no(r,e.getImmediateChild(t),n);o!==r&&(i=i.updateImmediateChild(t,o))})),i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var io,ro=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var i=e.getFront();this.children.has(i)||this.children.set(i,new t);var r=this.children.get(i);e=e.popFront(),r.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Sr,(function(t,e){n.remember(new Ui(t),e)})),this.forget(t)}if(this.children.size>0){var i=t.getFront();if(t=t.popFront(),this.children.has(i))this.children.get(i).forget(t)&&this.children.delete(i);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,i){var r=new Ui(t.toString()+"/"+n);i.forEachTree(r,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(io||(io={}));var oo,ao,so=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,Xe(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),uo=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=io.ACK_USER_WRITE,this.source=so.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Xe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ui(e));return new t(Ui.Empty,n,this.revert)}return Xe(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ho=function(){function t(t,e){void 0===e&&(oo||(oo=new kr(Ni)),e=oo),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return Di(e,(function(t,e){n=n.set(new Ui(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ui.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=r?{path:new Ui(n).child(r.path),value:r.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),i=this.children.get(n);return null!==i?i.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var i=e.getFront(),r=(this.children.get(i)||t.Empty).set(e.popFront(),n),o=this.children.insert(i,r);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),i=this.children.get(n);if(i){var r=i.remove(e.popFront()),o=void 0;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var i=e.getFront(),r=(this.children.get(i)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=r.isEmpty()?this.children.remove(i):this.children.insert(i,r),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Ui.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(i,r){n[i]=r.fold_(t.child(i),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Ui.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var i=!!this.value&&n(e,this.value);if(i)return i;if(t.isEmpty())return null;var r=t.getFront(),o=this.children.get(r);return o?o.findOnPath_(t.popFront(),e.child(r),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Ui.Empty,e)},t.prototype.foreachOnPath_=function(e,n,i){if(e.isEmpty())return this;this.value&&i(n,this.value);var r=e.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(e.popFront(),n.child(r),i):t.Empty},t.prototype.foreach=function(t){this.foreach_(Ui.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,i){i.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),lo=function(){function t(t,e){this.source=t,this.path=e,this.type=io.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Ui.Empty):new t(this.source,this.path.popFront())},t}(),co=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=io.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Ui.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),po=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=io.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Ui(e));return n.isEmpty()?null:n.value?new co(this.source,Ui.Empty,n.value):new t(this.source,Ui.Empty,n)}return Xe(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),fo=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),_o=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,i){return new t(new fo(e,n,i),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,i){return new t(this.eventCache_,new fo(e,n,i))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new fo(Fr.EMPTY_NODE,!1,!1),new fo(Fr.EMPTY_NODE,!1,!1)),t}(),mo=function(){function t(t,e,n,i,r){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=i,this.prevName=r}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,i){return new t(t.CHILD_CHANGED,n,e,i)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),yo=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,i,r,o){Xe(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(mo.childRemovedChange(e,a)):Xe(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(mo.childAddedChange(e,n)):o.trackChildChange(mo.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Sr,(function(t,i){e.hasChild(t)||n.trackChildChange(mo.childRemovedChange(t,i))})),e.isLeafNode()||e.forEachChild(Sr,(function(e,i){if(t.hasChild(e)){var r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(mo.childChangedChange(e,i,r))}else n.trackChildChange(mo.childAddedChange(e,i))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Fr.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),vo=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Xe(e===mo.CHILD_ADDED||e===mo.CHILD_CHANGED||e===mo.CHILD_REMOVED,"Only child changes supported for tracking"),Xe(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var r=i.type;if(e===mo.CHILD_ADDED&&r===mo.CHILD_REMOVED)this.changeMap.set(n,mo.childChangedChange(n,t.snapshotNode,i.snapshotNode));else if(e===mo.CHILD_REMOVED&&r===mo.CHILD_ADDED)this.changeMap.delete(n);else if(e===mo.CHILD_REMOVED&&r===mo.CHILD_CHANGED)this.changeMap.set(n,mo.childRemovedChange(n,i.oldSnap));else if(e===mo.CHILD_CHANGED&&r===mo.CHILD_ADDED)this.changeMap.set(n,mo.childAddedChange(n,t.snapshotNode));else{if(e!==mo.CHILD_CHANGED||r!==mo.CHILD_CHANGED)throw Je("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,mo.childChangedChange(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),go=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),bo=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new fo(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,e,1,n,t);return 0===r.length?null:r[0]},t}(),wo=function(t,e){this.viewCache=t,this.changes=e},Eo=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Xe(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Xe(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,i,r){var o,a,s=new vo;if(n.type===io.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,i,r,s):(Xe(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,i,r,a,s))}else if(n.type===io.MERGE){var h=n;h.source.fromUser?o=this.applyUserMerge_(e,h.path,h.children,i,r,s):(Xe(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,h.path,h.children,i,r,a,s))}else if(n.type===io.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,i,r,s):this.ackUserWrite_(e,l.path,l.affectedTree,i,r,s)}else{if(n.type!==io.LISTEN_COMPLETE)throw Je("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,i,s)}var c=s.getChanges();return t.maybeAddValueEvent_(e,o,c),new wo(o,c)},t.maybeAddValueEvent_=function(t,e,n){var i=e.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(mo.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,i,r){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(Xe(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),h=u instanceof Fr?u:Fr.EMPTY_NODE,l=n.calcCompleteEventChildren(h);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,r)}else{var c=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,r)}else{var d=e.getFront();if(".priority"===d){Xe(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=f?this.filter_.updatePriority(p,f):o.getNode()}else{var _=e.popFront(),m=void 0;if(o.isCompleteForChild(d)){s=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);m=null!=y?o.getNode().getImmediateChild(d).updateChild(_,y):o.getNode().getImmediateChild(d)}else m=n.calcCompleteChild(d,t.getServerCache());a=null!=m?this.filter_.updateChild(o.getNode(),d,m,_,i,r):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,i,r,o,a){var s,u=t.getServerCache(),h=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=h.updateFullNode(u.getNode(),n,null);else if(h.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=h.updateFullNode(u.getNode(),l,null)}else{var c=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),p=u.getNode().getImmediateChild(c).updateChild(d,n);s=".priority"===c?h.updatePriority(u.getNode(),p):h.updateChild(u.getNode(),c,p,d,go,null)}var f=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),h.filtersNodes()),_=new bo(i,f,r);return this.generateEventCacheAfterServerEvent_(f,e,i,_,a)},t.prototype.applyUserOverwrite_=function(t,e,n,i,r,o){var a,s,u=t.getEventCache(),h=new bo(i,t,r);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var c=e.popFront(),d=u.getNode().getImmediateChild(l),p=void 0;if(c.isEmpty())p=n;else{var f=h.getCompleteChild(l);p=null!=f?".priority"===c.getBack()&&f.getChild(c.parent()).isEmpty()?f:f.updateChild(c,n):Fr.EMPTY_NODE}if(d.equals(p))a=t;else{var _=this.filter_.updateChild(u.getNode(),l,p,c,h,o);a=t.updateEventSnap(_,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,i,r,o,a){var s=this,u=e;return i.foreach((function(i,h){var l=n.child(i);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,h,r,o,a))})),i.foreach((function(i,h){var l=n.child(i);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,h,r,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,i,r,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,h=t;u=e.isEmpty()?n:ho.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),c=s.applyMerge_(u,n);h=s.applyServerOverwrite_(h,new Ui(e),c,i,r,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var c=t.getServerCache().getNode().getImmediateChild(e),d=s.applyMerge_(c,n);h=s.applyServerOverwrite_(h,new Ui(e),d,i,r,o,a)}})),h},t.prototype.ackUserWrite_=function(t,e,n,i,r,o){if(null!=i.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),i,r,a,o);if(e.isEmpty()){var u=ho.Empty;return s.getNode().forEachChild(mr,(function(t,e){u=u.set(new Ui(t),e)})),this.applyServerMerge_(t,e,u,i,r,a,o)}return t}var h=ho.Empty;return n.foreach((function(t,n){var i=e.child(t);s.isCompleteForPath(i)&&(h=h.set(t,s.getNode().getChild(i)))})),this.applyServerMerge_(t,e,h,i,r,a,o)},t.prototype.listenComplete_=function(t,e,n,i){var r=t.getServerCache(),o=t.updateServerSnap(r.getNode(),r.isFullyInitialized()||e.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,go,i)},t.prototype.revertUserWrite_=function(t,e,n,i,r){var o;if(null!=n.shadowingWrite(e))return t;var a=new bo(n,t,i),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var h=void 0;if(t.getServerCache().isFullyInitialized())h=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();Xe(l instanceof Fr,"serverChildren would be complete if leaf node"),h=n.calcCompleteEventChildren(l)}h=h,u=this.filter_.updateFullNode(s,h,r)}else{var c=e.getFront(),d=n.calcCompleteChild(c,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(c)&&(d=s.getImmediateChild(c)),(u=null!=d?this.filter_.updateChild(s,c,d,e.popFront(),a,r):t.getEventCache().getNode().hasChild(c)?this.filter_.updateChild(s,c,Fr.EMPTY_NODE,e.popFront(),a,r):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,r))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Ui.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Co=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var i=this,r=[],o=[];return t.forEach((function(t){t.type===mo.CHILD_CHANGED&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(mo.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(r,mo.CHILD_REMOVED,t,n,e),this.generateEventsForType_(r,mo.CHILD_ADDED,t,n,e),this.generateEventsForType_(r,mo.CHILD_MOVED,o,n,e),this.generateEventsForType_(r,mo.CHILD_CHANGED,t,n,e),this.generateEventsForType_(r,mo.VALUE,t,n,e),r},t.prototype.generateEventsForType_=function(t,e,n,i,r){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,r);i.forEach((function(i){i.respondsTo(e.type)&&t.push(i.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Je("Should only compare child_ events.");var n=new pr(t.childName,t.snapshotNode),i=new pr(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}(),To=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new yo(n.getIndex()),r=n.getNodeFilter();this.processor_=new Eo(r);var o=e.getServerCache(),a=e.getEventCache(),s=i.updateFullNode(Fr.EMPTY_NODE,o.getNode(),null),u=r.updateFullNode(Fr.EMPTY_NODE,a.getNode(),null),h=new fo(s,o.isFullyInitialized(),i.filtersNodes()),l=new fo(u,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=new _o(l,h),this.eventGenerator_=new Co(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Xe(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var r=t.createCancelEvent(e,i);r&&n.push(r)}))}if(t){for(var r=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(o+1));break}}else r.push(a)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===io.MERGE&&null!==t.source.queryId&&(Xe(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Xe(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,r=this.processor_.applyOperation(i,t,e,n);return this.processor_.assertIndexed(r.viewCache),Xe(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=r.viewCache,this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Sr,(function(t,e){n.push(mo.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(mo.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var i=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,i)},t}(),So=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Xe(ao,"Reference.ts has not been loaded"),ao},set:function(t){Xe(!ao,"__referenceConstructor has already been defined"),ao=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var i,r,o=t.source.queryId;if(null!==o){var a=this.views.get(o);return Xe(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(t,e,n)}var s=[];try{for(var u=ze(this.views.values()),h=u.next();!h.done;h=u.next()){a=h.value;s=s.concat(a.applyOperation(t,e,n))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}return s},t.prototype.addEventRegistration=function(t,e,n,i,r){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(r?i:null),u=!1;s?u=!0:i instanceof Fr?(s=n.calcCompleteEventChildren(i),u=!1):(s=Fr.EMPTY_NODE,u=!1);var h=new _o(new fo(s,u,!1),new fo(i,r,!1));a=new To(t,h),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,i){var r,o,a=e.queryIdentifier(),s=[],u=[],h=this.hasCompleteView();if("default"===a)try{for(var l=ze(this.views.entries()),c=l.next();!c.done;c=l.next()){var d=Qe(c.value,2),p=d[0],f=d[1];u=u.concat(f.removeEventRegistration(n,i)),f.isEmpty()&&(this.views.delete(p),f.getQuery().getQueryParams().loadsAllData()||s.push(f.getQuery()))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}else(f=this.views.get(a))&&(u=u.concat(f.removeEventRegistration(n,i)),f.isEmpty()&&(this.views.delete(a),f.getQuery().getQueryParams().loadsAllData()||s.push(f.getQuery())));return h&&!this.hasCompleteView()&&s.push(new t.__referenceConstructor(e.repo,e.path)),{removed:s,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var i=ze(this.views.values()),r=i.next();!r.done;r=i.next()){var o=r.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,i=null;try{for(var r=ze(this.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;i=i||a.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=ze(this.views.values()),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.getQuery().getQueryParams().loadsAllData())return r}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Io=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ho(n));var i=this.writeTree_.findRootMostValueAndPath(e);if(null!=i){var r=i.path,o=i.value,a=Ui.relativePath(r,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(r,o))}var s=new ho(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return Di(e,(function(e,i){n=n.addWrite(t.child(e),i)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ho.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Ui.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Sr,(function(e,n){t.push(new pr(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new pr(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ho(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,i){if(null!=n.value)return i.updateChild(e,n.value);var r=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(Xe(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):i=t(e.child(n),o,i)})),i.getChild(e).isEmpty()||null===r||(i=i.updateChild(e.child(".priority"),r)),i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Ui.Empty,this.writeTree_,t)},t.Empty=new t(new ho(null)),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Po=function(){function t(){this.visibleWrites_=Io.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new No(t,this)},t.prototype.addOverwrite=function(t,e,n,i){Xe(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Xe(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Xe(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,o=!1,a=this.allWrites_.length-1;r&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,i.path)?r=!1:i.path.contains(s.path)&&(o=!0)),a--}if(r){if(o)return this.resetTree_(),!0;i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):Di(i.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(i.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,i,r){if(i||r){var o=this.visibleWrites_.childCompoundWrite(e);if(!r&&o.isEmpty())return n;if(r||null!=n||o.hasCompleteWrite(Ui.Empty)){var a=t.layerTree_(this.allWrites_,(function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);h=n||Fr.EMPTY_NODE;return a.apply(h)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Ui.Empty)){var h=n||Fr.EMPTY_NODE;return u.apply(h)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Fr.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(t);if(i)return i.isLeafNode()||i.forEachChild(Sr,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var r=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Sr,(function(t,e){var i=r.childCompoundWrite(new Ui(t)).apply(e);n=n.updateImmediateChild(t,i)})),r.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,i){Xe(n||i,"Either existingEventSnap or existingServerSnap must exist");var r=t.child(e);if(this.visibleWrites_.hasCompleteWrite(r))return null;var o=this.visibleWrites_.childCompoundWrite(r);return o.isEmpty()?i.getChild(e):o.apply(i.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var i=t.child(e),r=this.visibleWrites_.getCompleteNode(i);return null!=r?r:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,i,r,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(Ui.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var h=[],l=o.getCompare(),c=r?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),d=c.getNext();d&&h.length<i;)0!==l(d,n)&&h.push(d),d=c.getNext();return h},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Ui.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var i=Io.Empty,r=0;r<t.length;++r){var o=t[r];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=Ui.relativePath(n,a),i=i.addWrite(s,o.snap)):a.contains(n)&&(s=Ui.relativePath(a,n),i=i.addWrite(Ui.Empty,o.snap.getChild(s)));else{if(!o.children)throw Je("WriteRecord should have .snap or .children");if(n.contains(a))s=Ui.relativePath(n,a),i=i.addWrites(s,o.children);else if(a.contains(n))if((s=Ui.relativePath(a,n)).isEmpty())i=i.addWrites(Ui.Empty,o.children);else{var u=yn(o.children,s.getFront());if(u){var h=u.getChild(s.popFront());i=i.addWrite(Ui.Empty,h)}}}}}return i},t}(),No=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,i,r)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),ko=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ho.Empty,this.pendingWriteTree_=new Po,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,i){return this.pendingWriteTree_.addOverwrite(t,e,n,i),i?this.applyOperationToSyncPoints_(new co(so.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var i=ho.fromObject(e);return this.applyOperationToSyncPoints_(new po(so.User,t,i))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var i=ho.Empty;return null!=n.snap?i=i.set(Ui.Empty,!0):Di(n.children,(function(t,e){i=i.set(new Ui(t),e)})),this.applyOperationToSyncPoints_(new uo(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new co(so.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ho.fromObject(e);return this.applyOperationToSyncPoints_(new po(so.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new lo(so.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,i){var r=this.queryKeyForTag_(i);if(null!=r){var o=t.parseQueryKey_(r),a=o.path,s=o.queryId,u=Ui.relativePath(a,e),h=new co(so.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,h)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,i){var r=this.queryKeyForTag_(i);if(r){var o=t.parseQueryKey_(r),a=o.path,s=o.queryId,u=Ui.relativePath(a,e),h=ho.fromObject(n),l=new po(so.forServerTaggedQuery(s),u,h);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var i=this.queryKeyForTag_(n);if(i){var r=t.parseQueryKey_(i),o=r.path,a=r.queryId,s=Ui.relativePath(o,e),u=new lo(so.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,r=null,o=!1;this.syncPointTree_.foreachOnPath(i,(function(t,e){var n=Ui.relativePath(t,i);r=r||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,s=this.syncPointTree_.get(i);(s?(o=o||s.hasCompleteView(),r=r||s.getCompleteServerCache(Ui.Empty)):(s=new So,this.syncPointTree_=this.syncPointTree_.set(i,s)),null!=r)?a=!0:(a=!1,r=Fr.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild((function(t,e){var n=e.getCompleteServerCache(Ui.Empty);n&&(r=r.updateImmediateChild(t,n))})));var u=s.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);Xe(!this.queryToTagMap.has(h),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(h,l),this.tagToQueryMap.set(l,h)}var c=this.pendingWriteTree_.childWrites(i),d=s.addEventRegistration(e,n,c,r,a);if(!u&&!o){var p=s.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,i){var r=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,i);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var h=u.removed;s=u.events;var l=-1!==h.findIndex((function(t){return t.getQueryParams().loadsAllData()})),c=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!c){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),f=0;f<p.length;++f){var _=p[f],m=_.getQuery(),y=this.createListenerForView_(_);this.listenProvider_.startListening(t.queryForListening_(m),this.tagForQuery_(m),y.hashFn,y.onComplete)}}if(!c&&h.length>0&&!i)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else h.forEach((function(e){var n=r.queryToTagMap.get(t.makeQueryKey_(e));r.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(h)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,(function(e,n){var i=Ui.relativePath(e,t),r=n.getCompleteServerCache(i);if(r)return r}));return n.calcCompleteEventCache(t,i,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var i=[];return e&&(i=e.getQueryViews()),Di(n,(function(t,e){i=i.concat(e)})),i}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var i=e[n];if(!i.getQueryParams().loadsAllData()){var r=t.makeQueryKey_(i),o=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,r=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),r,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(i);if(r)Xe(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var i=[];return e&&(i=i.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),Di(n,(function(t,e){i=i.concat(e)})),i})),h=0;h<u.length;++h){var l=u[h];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Fr.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?e.applyTaggedListenComplete(n.path,i):e.applyListenComplete(n.path);var r=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var i=new Error(t+" at "+e.path.toString()+": "+n);return i.code=t.toUpperCase(),i}(t,n);return e.removeEventRegistration(n,null,r)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Xe(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ui(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Xe(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Ui.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,i);var r=e.get(Ui.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(Ui.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var h=n?n.getImmediateChild(a):null,l=i.child(a);o=o.concat(this.applyOperationHelper_(s,u,h,l))}return r&&(o=o.concat(r.applyOperation(t,i,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,i){var r=this,o=e.get(Ui.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Ui.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=i.child(e),h=t.operationForChild(e);h&&(a=a.concat(r.applyOperationDescendantsHelper_(h,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,i,n))),a},t.nextQueryTag_=1,t}(),Oo=function(){function t(){this.rootNode_=Fr.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ao=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),mn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return nn(this.counters_)},t}(),Do=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ao),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ro=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Ye({},t);return this.last_&&Di(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),xo=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ro(t);var n=1e4+2e4*Math.random();Fi(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},i=!1;Di(e,(function(e,r){r>0&&mn(t.statsToReport_,e)&&(n[e]=r,i=!0)})),i&&this.server_.reportStats(n),Fi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Mo=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Lo(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];if(i)t(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Lo=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();mi&&gi("event: "+e.toString()),Li(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Fo=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Xe(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var i=Ge(this.listeners_[t]),r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var i=this.getInitialEvent(t);i&&e.apply(n,i)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var i=this.listeners_[t]||[],r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)},t.prototype.validateEventType_=function(t){Xe(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Uo=function(t){function e(){var e,n,i=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger("visible",t))}),!1),i}return We(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Xe("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Fo),jo=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||an()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return We(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Xe("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Fo),Ho=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=function(e){t[e]&&Li((function(){n.onMessage_(t[e])}))},i=0;i<t.length;++i)e(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum];){if("break"===i())break}},t}(),Vo=function(){function t(t,e,n,i,r){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=i,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bi(t),this.stats_=Do.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ho(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Wo((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Qe(t,5),r=i[0],o=i[1],a=i[2];i[3],i[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===r)n.id=o,n.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Qe(t,2),r=i[0],o=i[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=fn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,i=(n=Ze(e),tn.encodeByteArray(n,!0)),r=Ai(i,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=fn(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Wo=function(){function t(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=pi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){gi("frame writing exception"),t.stack&&gi(t.stack),gi(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||gi("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var i=function(){n.outstandingRequests.delete(e),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(r),i()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){gi("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(t){}}),Math.floor(1))},t}(),Yo="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var qo=null;"undefined"!=typeof MozWebSocket?qo=MozWebSocket:"undefined"!=typeof WebSocket&&(qo=WebSocket);var Bo=function(){function t(e,n,i,r,o){this.connId=e,this.applicationId=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bi(this.connId),this.stats_=Do.getCollection(n),this.connURL=t.connectionURL_(n,r,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var i={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),t.connectionURL("websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,li.set("previous_websocket_failure",!0);try{if(un()){var i=this.nodeAdmin?"AdminNode":"Node",r={headers:{"User-Agent":"Firebase/5/"+Yo+"/"+process.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new qo(this.connURL,[],r)}else{r={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new qo(this.connURL,[],r)}}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==qo&&!t.forceDisallow_},t.previouslyFailed=function(){return li.isInMemoryStorage||!0===li.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){li.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=pn(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Xe(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=fn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Ai(e,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),zo=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Vo,Bo]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,i,r=Bo&&Bo.isAvailable(),o=r&&!Bo.previouslyFailed();if(e.webSocketOnly&&(r||Ci("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Bo];else{var a=this.transports_=[];try{for(var s=ze(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var h=u.value;h&&h.isAvailable()&&a.push(h)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Qo=function(){function t(t,e,n,i,r,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=i,this.onReady_=r,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bi("c:"+this.id+":"),this.transportManager_=new zo(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,i)}),Math.floor(0));var r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Fi((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(r)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=ki("t",t),n=ki("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=ki("t",t),n=ki("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=ki("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?wi("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wi("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Ci("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Fi((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fi((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(li.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Go=function(){function t(){}return t.prototype.put=function(t,e,n,i){},t.prototype.merge=function(t,e,n,i){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Ko=function(t){function e(n,i,r,o,a,s,u){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=i,h.onDataUpdate_=r,h.onConnectStatus_=o,h.onServerInfoUpdate_=a,h.authTokenProvider_=s,h.authOverride_=u,h.id=e.nextPersistentConnectionId_++,h.log_=bi("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingPutCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,u&&!un())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),Uo.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&jo.getInstance().on("online",h.onOnline_,h),h}return We(e,t),e.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(fn(r)),Xe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},e.prototype.listen=function(t,e,n,i){var r=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),Xe(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Xe(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,i=t.query,r=i.path.toString(),o=i.queryIdentifier();this.log_("Listen on "+r+" for "+o);var a={p:r};t.tag&&(a.q=i.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,i),(n.listens.get(r)&&n.listens.get(r).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(r,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&mn(t,"w")){var n=yn(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',r=e.path.toString();Ci("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+r+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=_n(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,i=(t=_n(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",r={cred:n};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,(function(t){var i=t.s,r=t.d||"error";e.authToken_===n&&("ok"===i?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(i,r))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),Xe(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,i){var r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(function(t){i&&setTimeout((function(){i(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},e.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},e.prototype.putInternal=function(t,e,n,i,r){var o={p:e,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,(function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),r&&r(i.s,i.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+fn(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):wi("Unrecognized action received from server: "+fn(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Xe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,s=this.lastSessionId,u=!1,h=null,l=function(){h?h.close():(u=!0,r())};this.realtime_={close:l,sendRequest:function(t){Xe(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(t)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then((function(t){u?gi("getToken() completed but was canceled"):(gi("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,h=new Qo(o,a.repoInfo_,a.applicationId_,n,i,r,(function(t){Ci(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),s))})).then(null,(function(e){a.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&Ci(e),l())}))}},e.prototype.interrupt=function(t){gi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){gi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],vn(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Oi(t)})).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,i=new Ui(t).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(e),r.delete(e),0===r.size&&this.listens.delete(i)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){gi("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,i;this.tryAuth();try{for(var r=ze(this.listens.values()),o=r.next();!o.done;o=r.next()){var a=o.value;try{for(var s=(n=void 0,ze(a.values())),u=s.next();!u.done;u=s.next()){var h=u.value;this.sendListen_(h)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Yo.replace(/\./g,"-")]=1,an()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=jo.getInstance().currentlyOnline();return vn(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Go),$o=function(t){function e(e,n,i){var r=t.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=n,r.authTokenProvider_=i,r.log_=bi("p:rest:"),r.listens_={},r}return We(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Xe(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,i,r){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,i),u={};this.listens_[s]=u;var h=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",h,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,i),yn(o.listens_,s)===u)&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var i=e.getListenId_(t,n);delete this.listens_[i]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var i=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(r){var o=r&&r.accessToken;o&&(e.auth=o);var a=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+t+"?ns="+i.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},i=0,r=Object.entries(t);i<r.length;i++){var o=r[i];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);i.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){i.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=pn(s.responseText)}catch(t){Ci("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&Ci("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},e}(Go),Xo=function(){function t(t,e,n,i){var r=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ro,this.persistentConnection_=null,this.stats_=Do.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new $o(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{fn(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Ko(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener((function(t){r.server_.refreshAuthToken(t)})),this.statsReporter_=Do.getOrCreateReporter(t,(function(){return new xo(r.stats_,r.server_)})),this.transactionsInit_(),this.infoData_=new Oo,this.infoSyncTree_=new ko({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ko({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,(function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Ui(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,i){this.dataUpdateCount++;var r=new Ui(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(i)if(n){var a=gn(e,(function(t){return jr(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(r,a,i)}else{var s=jr(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(r,s,i)}else if(n){var u=gn(e,(function(t){return jr(t)}));o=this.serverSyncTree_.applyServerMerge(r,u)}else{var h=jr(e);o=this.serverSyncTree_.applyServerOverwrite(r,h)}var l=r;o.length>0&&(l=this.rerunTransactions_(r)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;Di(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Ui("/.info/"+t),i=jr(e);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,i){var r=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=jr(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=eo(a,s,o),h=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,h,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||Ci("set at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(h,!o);r.eventQueue_.raiseEventsForChangedPath(t,a),r.callOnCompleteCallback(i,e,n)}));var c=this.abortTransactions_(t);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},t.prototype.update=function(t,e,n){var i=this;this.log_("update",{path:t.toString(),value:e});var r=!0,o=this.generateServerValues(),a={};if(Di(e,(function(e,n){r=!1,a[e]=to(t.child(e),jr(n),i.serverSyncTree_,o)})),r)gi("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,r){var o="ok"===e;o||Ci("update at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(u,a),i.callOnCompleteCallback(n,e,r)})),Di(e,(function(e){var n=i.abortTransactions_(t.child(e));i.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ro;this.onDisconnect_.forEachTree(Ui.Empty,(function(i,r){var o=to(i,r,t.serverSyncTree_,e);n.remember(i,o)}));var i=[];n.forEachTree(Ui.Empty,(function(e,n){i=i.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var r=t.abortTransactions_(e);t.rerunTransactions_(r)})),this.onDisconnect_=new ro,this.eventQueue_.raiseEventsForChangedPath(Ui.Empty,i)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(i,r){"ok"===i&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,i,r)}))},t.prototype.onDisconnectSet=function(t,e,n){var i=this,r=jr(e);this.server_.onDisconnectPut(t.toString(),r.val(!0),(function(e,o){"ok"===e&&i.onDisconnect_.remember(t,r),i.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,i){var r=this,o=jr(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(i,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var i=this;if(vn(e))return gi("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(r,o){"ok"===r&&Di(e,(function(e,n){var r=jr(n);i.onDisconnect_.remember(t.child(e),r)})),i.callOnCompleteCallback(n,r,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ro(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);Di(e,(function(t,e){for(var i=t,r=t.length;r<n+2;r++)i+=" ";console.log(i+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),gi.apply(void 0,Ge([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Li((function(){if("ok"===e)t(null);else{var i=(e||"error").toUpperCase(),r=i;n&&(r+=": "+n);var o=new Error(r);o.code=i,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new ha(this))},enumerable:!1,configurable:!0}),t}(),Jo=function(){function t(e){this.indexedFilter_=new yo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,i,r,o){return this.matches(new pr(e,n))||(n=Fr.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Fr.EMPTY_NODE);var i=e.withIndex(this.index_);i=i.updatePriority(Fr.EMPTY_NODE);var r=this;return e.forEachChild(Sr,(function(t,e){r.matches(new pr(t,e))||(i=i.updateImmediateChild(t,Fr.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Zo=function(){function t(t){this.rangedFilter_=new Jo(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,i,r,o){return this.rangedFilter_.matches(new pr(e,n))||(n=Fr.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,o):this.fullLimitUpdateChild_(t,e,n,r,o)},t.prototype.updateFullNode=function(t,e,n){var i;if(e.isLeafNode()||e.isEmpty())i=Fr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){i=Fr.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;r.hasNext()&&o<this.limit_;){var a=r.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(a.name,a.node),o++}}else{i=(i=e.withIndex(this.index_)).updatePriority(Fr.EMPTY_NODE);var s=void 0,u=void 0,h=void 0;r=void 0;if(this.reverse_){r=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();h=function(t,e){return l(e,t)}}else r=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();o=0;for(var c=!1;r.hasNext();){a=r.getNext();!c&&h(s,a)<=0&&(c=!0),c&&o<this.limit_&&h(a,u)<=0?o++:i=i.updateImmediateChild(a.name,Fr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,i,r){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;Xe(s.numChildren()===this.limit_,"");var u=new pr(e,n),h=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var c=s.getImmediateChild(e),d=i.getChildAfterChild(this.index_,h,this.reverse_);null!=d&&(d.name===e||s.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,u);if(l&&!n.isEmpty()&&p>=0)return null!=r&&r.trackChildChange(mo.childChangedChange(e,n,c)),s.updateImmediateChild(e,n);null!=r&&r.trackChildChange(mo.childRemovedChange(e,c));var f=s.updateImmediateChild(e,Fr.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=r&&r.trackChildChange(mo.childAddedChange(d.name,d.node)),f.updateImmediateChild(d.name,d.node)):f}return n.isEmpty()?t:l&&o(h,u)>=0?(null!=r&&(r.trackChildChange(mo.childRemovedChange(h.name,h.node)),r.trackChildChange(mo.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(h.name,Fr.EMPTY_NODE)):t},t}(),ta=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sr}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Xe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Xe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Si},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Xe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Xe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ii},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Xe(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=i}return this.index_!==Sr&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Sr},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new yo(this.getIndex()):this.hasLimit()?new Zo(this):new Jo(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(this.index_===Sr?e=n.PRIORITY_INDEX:this.index_===Vr?e=n.VALUE_INDEX:this.index_===mr?e=n.KEY_INDEX:(Xe(this.index_ instanceof Wr,"Unrecognized index type!"),e=this.index_.toString()),i[n.ORDER_BY]=fn(e),this.startSet_&&(i[n.START_AT]=fn(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+fn(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=fn(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+fn(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),ea=function(t){function e(e,n){if(!(e instanceof Xo))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,ta.DEFAULT,!1)||this}return We(e,t),e.prototype.getKey=function(){return Tn("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Tn("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Ui||(null===this.path.getFront()?ar("Reference.child",1,t,!1):or("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Tn("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Tn("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Tn("Reference.set",1,2,arguments.length),sr("Reference.set",this.path),Zi("Reference.set",1,t,this.path,!1),In("Reference.set",2,e,!0);var n=new on;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Tn("Reference.update",1,2,arguments.length),sr("Reference.update",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,Ci("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}er("Reference.update",1,t,this.path,!1),In("Reference.update",2,e,!0);var r=new on;return this.repo.update(this.path,t,r.wrapCallback(e)),r.promise},e.prototype.setWithPriority=function(t,e,n){if(Tn("Reference.setWithPriority",2,3,arguments.length),sr("Reference.setWithPriority",this.path),Zi("Reference.setWithPriority",1,t,this.path,!1),nr("Reference.setWithPriority",2,e,!1),In("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new on;return this.repo.setWithPriority(this.path,t,e,i.wrapCallback(n)),i.promise},e.prototype.remove=function(t){return Tn("Reference.remove",0,1,arguments.length),sr("Reference.remove",this.path),In("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Tn("Reference.transaction",1,3,arguments.length),sr("Reference.transaction",this.path),In("Reference.transaction",1,t,!1),In("Reference.transaction",2,e,!0),hr("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new on;"function"==typeof e&&i.promise.catch((function(){}));var r=function(t,n,r){t?i.reject(t):i.resolve(new cr(n,r)),"function"==typeof e&&e(t,n,r)};return this.repo.startTransaction(this.path,t,r,n),i.promise},e.prototype.setPriority=function(t,e){Tn("Reference.setPriority",1,2,arguments.length),sr("Reference.setPriority",this.path),nr("Reference.setPriority",1,t,!1),In("Reference.setPriority",2,e,!0);var n=new on;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Tn("Reference.push",0,2,arguments.length),sr("Reference.push",this.path),Zi("Reference.push",1,t,this.path,!0),In("Reference.push",2,e,!0);var n,i=this.repo.serverTime(),r=dr(i),o=this.child(r),a=this.child(r);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return sr("Reference.onDisconnect",this.path),new lr(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Gr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr.__referenceConstructor=ea,So.__referenceConstructor=ea;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var na,ia=function(){this.children={},this.childCount=0,this.value=null},ra=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new ia),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Ui?e:new Ui(e),i=this,r=n.getFront();null!==r;){i=new t(r,i,yn(i.node_.children,r)||new ia),r=(n=n.popFront()).getFront()}return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Xe(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;Di(this.node_.children,(function(i,r){e(new t(i,n,r))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Ui(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),i=mn(this.node_.children,t);n&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(na||(na={})),Xo.MAX_TRANSACTION_RETRIES_=25,Xo.prototype.transactionsInit_=function(){this.transactionQueueTree_=new ra},Xo.prototype.startTransaction=function(t,e,n,i){this.log_("transaction on "+t);var r=function(){},o=new ea(this,t);o.on("value",r);var a={path:t,update:e,onComplete:n,status:null,order:pi(),applyLocally:i,retryCount:0,unwatcher:function(){o.off("value",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var h=new Yr(a.currentInputSnapshot,new ea(this,a.path),Sr);a.onComplete(null,!1,h)}}else{tr("transaction failed: Data returned ",u,a.path),a.status=na.RUN;var l=this.transactionQueueTree_.subTree(t),c=l.getValue()||[];c.push(a),l.setValue(c);var d=void 0;if("object"==typeof u&&null!==u&&mn(u,".priority"))d=yn(u,".priority"),Xe(Ji(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else d=(this.serverSyncTree_.calcCompleteEventCache(t)||Fr.EMPTY_NODE).getPriority().val();d=d;var p=this.generateServerValues(),f=jr(u,d),_=eo(f,s,p);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=_,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,_,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},Xo.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Fr.EMPTY_NODE},Xo.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Xe(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===na.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Xo.prototype.sendTransactionQueue_=function(t,e){for(var n=this,i=e.map((function(t){return t.currentWriteId})),r=this.getLatestState_(t,i),o=r,a=r.hash(),s=0;s<e.length;s++){var u=e[s];Xe(u.status===na.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=na.SENT,u.retryCount++;var h=Ui.relativePath(t,u.path);o=o.updateChild(h,u.currentOutputSnapshotRaw)}var l=o.val(!0),c=t;this.server_.put(c.toString(),l,(function(i){n.log_("transaction put response",{path:c.toString(),status:i});var r=[];if("ok"===i){for(var o=[],a=0;a<e.length;a++){if(e[a].status=na.COMPLETED,r=r.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new ea(n,e[a].path),h=new Yr(s,u,Sr);o.push(e[a].onComplete.bind(null,null,!0,h))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,r);for(a=0;a<o.length;a++)Li(o[a])}else{if("datastale"===i)for(a=0;a<e.length;a++)e[a].status===na.SENT_NEEDS_ABORT?e[a].status=na.NEEDS_ABORT:e[a].status=na.RUN;else{Ci("transaction at "+c.toString()+" failed: "+i);for(a=0;a<e.length;a++)e[a].status=na.NEEDS_ABORT,e[a].abortReason=i}n.rerunTransactions_(t)}}),a)},Xo.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),i=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(i,n),n},Xo.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,i=[],r=[],o=t.filter((function(t){return t.status===na.RUN})).map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var s=t[a],u=Ui.relativePath(e,s.path),h=!1,l=void 0;if(Xe(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===na.NEEDS_ABORT)h=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===na.RUN)if(s.retryCount>=Xo.MAX_TRANSACTION_RETRIES_)h=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var c=this.getLatestState_(s.path,o);s.currentInputSnapshot=c;var d=t[a].update(c.val());if(void 0!==d){tr("transaction failed: Data returned ",d,s.path);var p=jr(d);"object"==typeof d&&null!=d&&mn(d,".priority")||(p=p.updatePriority(c.getPriority()));var f=s.currentWriteId,_=this.generateServerValues(),m=eo(p,c,_);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(f),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,m,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else h=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],h&&(t[a].status=na.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===l){var y=new ea(this,t[a].path),v=t[a].currentInputSnapshot,g=new Yr(v,y,Sr);i.push(t[a].onComplete.bind(null,null,!1,g))}else i.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<i.length;a++)Li(i[a]);this.sendReadyTransactions_()}},Xo.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Xo.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Xo.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,i=t.getValue();if(null!==i)for(var r=0;r<i.length;r++)e.push(i[r]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Xo.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,r=0;r<n.length;r++)n[r].status!==na.COMPLETED&&(n[i]=n[r],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Xo.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(i),i.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Xo.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],r=-1,o=0;o<e.length;o++)if(e[o].status===na.SENT_NEEDS_ABORT);else if(e[o].status===na.SENT)Xe(r===o-1,"All SENT items should be at beginning of queue."),r=o,e[o].status=na.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(Xe(e[o].status===na.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===r?t.setValue(null):e.length=r+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i);for(o=0;o<n.length;o++)Li(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oa,aa=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ci(t)},t}(),sa=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),ua=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return oa||(oa=new t),oa},t.prototype.interrupt=function(){var t,e,n,i;try{for(var r=ze(Object.keys(this.repos_)),o=r.next();!o.done;o=r.next()){var a=o.value;try{for(var s=(n=void 0,ze(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var h=u.value;this.repos_[a][h].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,i;try{for(var r=ze(Object.keys(this.repos_)),o=r.next();!o.done;o=r.next()){var a=o.value;try{for(var s=(n=void 0,ze(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var h=u.value;this.repos_[a][h].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n,i){var r=n||t.options.databaseURL;void 0===r&&(t.options.projectId||Ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gi("Using default host for project ",t.options.projectId),r=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=zi(r,i),s=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,r="http://"+u+"?ns="+s.namespace,s=(a=zi(r,i)).repoInfo):o=!a.repoInfo.secure;var h=i&&o?new sa:new aa(t,e);return ur("Invalid Firebase Database URL",1,a),a.path.isEmpty()||Ei("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,h).database},t.prototype.deleteRepo=function(t){var e=yn(this.repos_,t.app.name);e&&yn(e,t.repoInfo_.toURLString())===t||Ei("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var i=yn(this.repos_,e.name);i||(i={},this.repos_[e.name]=i);var r=yn(i,t.toURLString());return r&&Ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Xo(t,this.useRestClient_,e,n),i[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),ha=function(){function t(t){this.repo_=t,t instanceof Xo||Ei("Don't call new Database() directly - please use firebase.database()."),this.root_=new ea(t,Ui.Empty),this.INTERNAL=new la(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),Tn("database.ref",0,1,arguments.length),t instanceof ea?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Tn(e,1,1,arguments.length);var n=zi(t,this.repo_.repoInfo_.nodeAdmin);ur(e,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&Ei(e+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Ei("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Tn("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Tn("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),la=function(){function t(t){this.database=t}return t.prototype.delete=function(){return qe(this,void 0,void 0,(function(){return Be(this,(function(t){return this.database.checkDeleted_("delete"),ua.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),ca=Object.freeze({__proto__:null,forceLongPolling:function(){Bo.forceDisallow(),Vo.forceAllow()},forceWebSockets:function(){Vo.forceDisallow()},isWebSocketsAvailable:function(){return Bo.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),da=Ko;Ko.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ko.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var pa,fa=Qo,_a=Hi,ma=Object.freeze({__proto__:null,DataConnection:da,RealTimeConnection:fa,hijackHash:function(t){var e=Ko.prototype.put;return Ko.prototype.put=function(n,i,r,o){void 0!==o&&(o=t()),e.call(this,n,i,r,o)},function(){Ko.prototype.put=e}},ConnectionTarget:_a,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){ua.getInstance().forceRestClient(t)}}),ya=ha.ServerValue;(function(t){Yo=t})((pa=ti).SDK_VERSION),pa.INTERNAL.registerComponent(new kn("database",(function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return ua.getInstance().databaseFromApp(n,i,e)}),"PUBLIC").setServiceProps({Reference:ea,Query:Gr,Database:ha,DataSnapshot:Yr,enableLogging:vi,INTERNAL:ca,ServerValue:ya,TEST_ACCESS:ma}).setMultipleInstances(!0)),pa.registerVersion("@firebase/database","0.6.13"),import("./uvalib-accordion-ff1d1bad.js"),import("./uvalib-accordion-item-60ef0471.js"),import("./vaadin-number-field-447d62e4.js"),import("./vaadin-button-0fc390d5.js"),import("./uvalib-model-realtime-database-b3dc90ba.js"),import("./uvalib-data-viz-sparkline-cd819842.js");window.customElements.define("uvalib-counts",class extends de{static get template(){return ce`
      <style>
        :host {
          display: block;
        }
        .time {
          font-style: italic;
          font-size: smaller;
          font-weight: lighter;
        }
        uvalib-data-viz-sparkline {
          display: inline-block;
          padding-left: 20px;
        }
      </style>

      <uvalib-account-auth id="auth" auto></uvalib-account-auth>
      
      <uvalib-accordion multi>
        <template is="dom-repeat" items="[[_filter(libraries,type)]]" as="library">
          <template is="dom-if" if="[[library.occupancy]]">
              <uvalib-accordion-item opened$="[[editMode]]" heading-level="1">
                <div slot="heading">
                  <div style="padding: 20px">
                    <h1 inner-h-t-m-l="[[library.name]]"></h1>
                  </div>
                  <div style="float: left; padding: 20px;">
                    <div hidden$="[[!library.maximumAttendeeCapacity]]" style="font-size: 55px; font-weight: bolder;">[[_calcPercent(library.maximumAttendeeCapacity, library.occupancy.value)]]%</div>
                    <div hidden$="[[!library.maximumAttendeeCapacity]]" style="font-size: 20px; font-weight: bolder;">Percent Occupied</div>
                    <div hidden$="[[noMaskTrack]]" style="font-size: 55px; font-weight: bolder;">[[_calcInversePercent(library.occupancy.value,library.noMaskCount.value)]]%</div>
                    <div hidden$="[[noMaskTrack]]" style="font-size: 20px; font-weight: bolder;">Mask Compliance</div>
                  </div>
                  <div style="float: right; padding: 20px;">
                    <h2 hidden$="[[!library.maximumAttendeeCapacity]]">Capacity: [[library.maximumAttendeeCapacity]]</h2>
                    <h2>Occupancy: 
                      <span>[[library.occupancy.value]]</span>
                      <br/><span class="time">[[_timeformat(library.occupancy.timestamp_end)]]</span></h2>
                      <div>
                        <uvalib-data-viz-sparkline series-name="occupancy" series-data-event="uvalib-model-data-value">
                          <uvalib-model-realtime-database start-key="[[_todayStart()]]" path="/locationsLogs/[[library.key]]/occupancylogs"></uvalib-model-realtime-database>
                        </uvalib-data-viz-sparkline>
                      </div>
                    <h2 hidden$="[[_isNull(library.estimatedOccupancy.value)]]">Estimated Occupancy: [[library.estimatedOccupancy.value]]<br/><span class="time">[[_timeformat(library.estimatedOccupancy.timestamp)]]</span></h2>
                    <h2 hidden$="[[noMaskTrack]]">Mask Non-Compliance: [[library.noMaskCount.value]]<br/>
                    <span class="time">[[_timeformat(library.noMaskCount.timestamp_end)]]</span></h2>
                    <div>
                    <uvalib-data-viz-sparkline series-name="no mask" series-data-event="uvalib-model-data-value">
                      <uvalib-model-realtime-database start-key="[[_todayStart()]]" path="/locationsLogs/[[library.key]]/noMaskCountlogs"></uvalib-model-realtime-database>
                    </uvalib-data-viz-sparkline>
                  </div>
                  </div>
                </div>
                <div slot="body">
                  <div style="background-color: lightgrey; padding: 20px;">
                  <template is="dom-if" if="[[!library.containedInPlace]]">
                    <vaadin-button theme="error primary" library-id="[[library.key]]" on-click="_clearCount">Clear</vaadin-button><br />
                    <div>Occupancy:
                      <vaadin-number-field hidden$="[[!editMode]]" library-id$="[[library.key]]" action-id="[[_occupancy]]" value="0" min="0" has-controls></vaadin-number-field> ([[library.occupancy.value]])
                    </div>
                    <div>Mask Violations:
                      <vaadin-number-field hidden$="[[!editMode]]" library-id$="[[library.key]]" action-id="[[_noMaskCount]]" value="0" min="0" has-controls></vaadin-number-field> ([[library.noMaskCount.value]])
                    </div>
                    <vaadin-button hidden$="[[!editMode]]" theme="success primary" library-id="[[library.key]]" on-click="_updateMainCount">Submit</vaadin-button>
                  </template>
                  <template is="dom-if" if="[[library.containedInPlace]]">
                    <div hidden$="[[!editMode]]">
                      <vaadin-button theme="error primary" library-id="[[library.key]]" on-click="_clearCount">Clear</vaadin-button>
                    </div>
                    <template is="dom-repeat" items="[[_values(library.containedInPlace)]]" as="place">
                      <template is="dom-if" if="[[place.occupancy]]">
                        <h3>[[place.name]]</h3>
                        <div style="display:flex; flex-direction:row">
                          <div style="flex:1">
                            <div>Occupancy:
                              <vaadin-number-field hidden$="[[!editMode]]" library-id$="[[library.key]]" place-id$="[[place.key]]" action-id="[[_occupancy]]" value="0" min="0" has-controls></vaadin-number-field>
                              <span>([[place.occupancy.value]])</span>
                              <uvalib-data-viz-sparkline series-name="occupancy" series-data-event="uvalib-model-data-value">
                                <uvalib-model-realtime-database start-key="[[_todayStart()]]" path="/locationsLogs/[[library.key]]/[[place.key]]/occupancylogs"></uvalib-model-realtime-database>
                              </uvalib-data-viz-sparkline>
                            </div>
                            <div>Mask Violations:
                              <vaadin-number-field hidden$="[[!editMode]]" library-id$="[[library.key]]" place-id$="[[place.key]]" action-id="[[_noMaskCount]]" value="0" min="0" has-controls></vaadin-number-field>
                              <span>([[place.noMaskCount.value]])</span>
                              <uvalib-data-viz-sparkline series-name="no masks" series-data-event="uvalib-model-data-value">
                                <uvalib-model-realtime-database start-key="[[_todayStart()]]" path="/locationsLogs/[[library.key]]/[[place.key]]/noMaskCountlogs"></uvalib-model-realtime-database>
                              </uvalib-data-viz-sparkline>
                            </div>
                          </div>
                        </div>
                      </template>
                    </template>
                    <div><vaadin-button hidden$="[[!editMode]]" theme="success primary" library-id="[[library.key]]" on-click="_updateCount">Submit</vaadin-button></div>
                  </template>  
                  </div>
                </div>
              </uvalib-accordion-item>
          </template>
        </template>
      </uvalib-accordion>
    `}static get properties(){return{libraries:Array,_occupancy:{type:String,value:"occupancy"},_noMaskCount:{type:String,value:"noMaskCount"},editMode:{type:Boolean,value:!1,observer:"_setState"},_state:{type:Number,value:1,observer:"_setMode"},type:{type:String,value:null},noMaskTrack:{type:Boolean,value:!1},_data:{type:Object,value:function(){return{1600266267649:0,1600266798670:0,1600270356460:7,1600274033392:9}}}}}ready(){super.ready(),this.shadowRoot.getElementById("auth").addEventListener("uvalib-model-authenticated",function(){this.database=ti.default.database(),this.database.ref("locations-schemaorg/location").on("value",function(t){this._libraries=t.val(),this.libraries=this._values(this._libraries)}.bind(this))}.bind(this))}_todayStart(){var t=new Date;return 1*new Date(t.getFullYear(),t.getMonth(),t.getDate())}_isNull(t){return null==t}_calcPercent(t,e){return Math.round((e/t*100).toFixed(3))}_calcInversePercent(t,e){var n=100-this._calcPercent(t,e);return isNaN(n)?100:n}_timeformat(t){return ai(t).format("MMMM Do, h:mm:ss a")}_filter(t,e){return e&&Array.isArray(t)?t.filter(t=>t["@type"]===e):t}_values(t){if(t){var e=[];return Object.keys(t).forEach((function(n){t[n].key=n,e.push(t[n])})),e}return t}_clearCount(t){const e=t.target.libraryId;this.shadowRoot.querySelectorAll('vaadin-number-field[library-id="'+e+'"]').forEach(t=>{t.value=0})}_updateMainCount(t){const e=t.target.libraryId;t.target.actionId;this.shadowRoot.querySelectorAll('vaadin-number-field[library-id="'+e+'"]').forEach(t=>{const n=t.actionId,i=t.value;this.database.ref("locations-schemaorg/location/"+e+"/"+n).update({timestamp:ti.default.database.ServerValue.TIMESTAMP,value:i})})}_updateCount(t){const e=t.target.libraryId,n=this.shadowRoot.querySelectorAll('vaadin-number-field[library-id="'+e+'"]');var i=[];n.forEach(t=>{const n=t.getAttribute("place-id"),r=t.actionId,o=t.value,a=this.database.ref("locations-schemaorg/location/"+e+"/containedInPlace/"+n+"/"+r);i.push(a.update({timestamp:ti.default.database.ServerValue.TIMESTAMP,value:o}))}),Promise.all(i).then(function(){const t=this._values(this._libraries[e].containedInPlace);var n={timestamp_start:null,timestamp_end:null,value:0},i={timestamp_start:null,timestamp_end:null,value:0};t.forEach(t=>{t.noMaskCount&&((t.noMaskCount.timestamp<n.timestamp_start||!n.timestamp_start)&&(n.timestamp_start=t.noMaskCount.timestamp),(t.noMaskCount.timestamp>n.timestamp_end||!n.timestamp_end)&&(n.timestamp_end=t.noMaskCount.timestamp),n.value=Number(n.value)+Number(t.noMaskCount.value)),t.occupancy&&((t.occupancy.timestamp<i.timestamp_start||!i.timestamp_start)&&(i.timestamp_start=t.occupancy.timestamp),(t.occupancy.timestamp>i.timestamp_end||!i.timestamp_end)&&(i.timestamp_end=t.occupancy.timestamp),i.value=Number(i.value)+Number(t.occupancy.value))}),this.database.ref("locations-schemaorg/location/"+e+"/noMaskCount").update(n),this.database.ref("locations-schemaorg/location/"+e+"/occupancy").update(i)}.bind(this))}});export{Oe as D,ue as E,_e as O,ft as P,f as a,se as b,F as c,S as d,ie as e,de as f,Q as g,Le as h,ce as i,J as j,O as k,E as l,ht as m,ut as n,De as o,c as p,st as q,oe as r,d as s,at as t,s as u,ti as v,j as w,ri as x,ni as y};
